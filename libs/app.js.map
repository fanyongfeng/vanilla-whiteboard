{"version":3,"file":"app.js","sources":["../node_modules/core-js/library/modules/_iter-step.js","../node_modules/core-js/library/modules/_iterators.js","../node_modules/core-js/library/modules/_cof.js","../node_modules/core-js/library/modules/_iobject.js","../node_modules/core-js/library/modules/_defined.js","../node_modules/core-js/library/modules/_to-iobject.js","../node_modules/core-js/library/modules/_library.js","../node_modules/core-js/library/modules/_global.js","../node_modules/core-js/library/modules/_core.js","../node_modules/core-js/library/modules/_a-function.js","../node_modules/core-js/library/modules/_ctx.js","../node_modules/core-js/library/modules/_is-object.js","../node_modules/core-js/library/modules/_an-object.js","../node_modules/core-js/library/modules/_fails.js","../node_modules/core-js/library/modules/_descriptors.js","../node_modules/core-js/library/modules/_dom-create.js","../node_modules/core-js/library/modules/_ie8-dom-define.js","../node_modules/core-js/library/modules/_to-primitive.js","../node_modules/core-js/library/modules/_object-dp.js","../node_modules/core-js/library/modules/_property-desc.js","../node_modules/core-js/library/modules/_hide.js","../node_modules/core-js/library/modules/_has.js","../node_modules/core-js/library/modules/_export.js","../node_modules/core-js/library/modules/_redefine.js","../node_modules/core-js/library/modules/_to-integer.js","../node_modules/core-js/library/modules/_to-length.js","../node_modules/core-js/library/modules/_to-absolute-index.js","../node_modules/core-js/library/modules/_array-includes.js","../node_modules/core-js/library/modules/_shared.js","../node_modules/core-js/library/modules/_uid.js","../node_modules/core-js/library/modules/_shared-key.js","../node_modules/core-js/library/modules/_object-keys-internal.js","../node_modules/core-js/library/modules/_enum-bug-keys.js","../node_modules/core-js/library/modules/_object-keys.js","../node_modules/core-js/library/modules/_object-dps.js","../node_modules/core-js/library/modules/_html.js","../node_modules/core-js/library/modules/_object-create.js","../node_modules/core-js/library/modules/_wks.js","../node_modules/core-js/library/modules/_set-to-string-tag.js","../node_modules/core-js/library/modules/_iter-create.js","../node_modules/core-js/library/modules/_to-object.js","../node_modules/core-js/library/modules/_object-gpo.js","../node_modules/core-js/library/modules/_iter-define.js","../node_modules/core-js/library/modules/es6.array.iterator.js","../node_modules/core-js/library/modules/web.dom.iterable.js","../node_modules/core-js/library/modules/_string-at.js","../node_modules/core-js/library/modules/es6.string.iterator.js","../node_modules/core-js/library/modules/_classof.js","../node_modules/core-js/library/modules/core.get-iterator-method.js","../node_modules/core-js/library/modules/core.get-iterator.js","../node_modules/core-js/library/modules/es6.number.epsilon.js","../src/graphic/algorithm/math.js","../src/graphic/types/Point.ts","../node_modules/tslib/tslib.es6.js","../src/graphic/algorithm/corner.js","../src/decorators/mixin.ts","../src/graphic/types/Rect.ts","../node_modules/core-js/library/modules/_string-ws.js","../node_modules/core-js/library/modules/_string-trim.js","../node_modules/core-js/library/modules/_parse-int.js","../node_modules/core-js/library/modules/es6.parse-int.js","../node_modules/core-js/library/fn/parse-int.js","../node_modules/@babel/runtime-corejs2/core-js/parse-int.js","../src/graphic/algorithm/color.js","../src/graphic/types/Color.ts","../src/graphic/types/Style.ts","../src/graphic/types/Matrix.ts","../src/graphic/algorithm/calcCurve.js","../src/graphic/types/Segment.ts","../src/graphic/algorithm/fitCurve.js","../src/graphic/algorithm/smoothCurve.js","../src/decorators/memoized.ts","../src/util/id.ts","../src/decorators/emitter.ts","../src/graphic/Item.ts","../src/graphic/Path.ts","../src/util/dom.ts","../src/Whiteboard/ItemCollection.ts","../src/Whiteboard/Layer.ts","../src/animate/animate.js","../node_modules/core-js/library/modules/_object-gops.js","../node_modules/core-js/library/modules/_object-pie.js","../node_modules/core-js/library/modules/_object-assign.js","../node_modules/core-js/library/modules/es6.object.assign.js","../node_modules/core-js/library/fn/object/assign.js","../node_modules/@babel/runtime-corejs2/core-js/object/assign.js","../node_modules/core-js/library/modules/_parse-float.js","../node_modules/core-js/library/modules/es6.parse-float.js","../node_modules/core-js/library/fn/parse-float.js","../node_modules/@babel/runtime-corejs2/core-js/parse-float.js","../src/animate/animateColor.js","../src/Whiteboard/OperateLayer.ts","../src/Whiteboard/EventType.ts","../node_modules/core-js/library/modules/es6.date.now.js","../node_modules/core-js/library/fn/date/now.js","../node_modules/@babel/runtime-corejs2/core-js/date/now.js","../src/util/throttle.js","../src/Whiteboard/EventHandler.ts","../src/tools/Tool.ts","../src/tools/ArcDrawing.ts","../src/graphic/shape/Image.ts","../src/tools/mixins/cursor.ts","../src/graphic/Shape.ts","../src/graphic/shape/Rectangle.ts","../src/graphic/shape/Line.ts","../src/graphic/shape/Arrow.ts","../src/graphic/shape/Triangle.ts","../src/graphic/shape/Ellipse.ts","../src/graphic/shape/Star.ts","../src/graphic/shape/Writing.ts","../src/graphic/shape/Text.ts","../src/graphic/shape/ChatBox.ts","../src/graphic/CompoundPath.ts","../src/graphic/ItemFactory.ts","../src/tools/mixins/itemCreator.ts","../src/tools/FreeDrawing.ts","../src/tools/mixins/dragBounds.ts","../src/tools/ShapeDrawing.ts","../src/tools/mixins/selectable.ts","../src/graphic/component/ControlRect.ts","../src/graphic/Group.ts","../src/graphic/algorithm/trigonometry.js","../src/tools/mixins/transformable.ts","../src/tools/Selection.ts","../src/tools/Pointer.ts","../src/tools/Eraser.ts","../src/tools/TextInput.ts","../src/tools/mixins/mutable.ts","../src/tools/PathMutator.ts","../src/tools/index.ts","../src/graphic/component/Grid.ts","../src/graphic/component/Axes.ts","../src/Whiteboard/MaterialProvider.ts","../src/commands/Action.ts","../src/commands/History.ts","../src/Whiteboard/index.ts","../src/animate/easing.js","../src/eventlog-player.js","../src/playground.js","../src/index.ts"],"sourcesContent":["module.exports = function (done, value) {\n  return { value: value, done: !!done };\n};\n","module.exports = {};\n","var toString = {}.toString;\n\nmodule.exports = function (it) {\n  return toString.call(it).slice(8, -1);\n};\n","// fallback for non-array-like ES3 and non-enumerable old V8 strings\nvar cof = require('./_cof');\n// eslint-disable-next-line no-prototype-builtins\nmodule.exports = Object('z').propertyIsEnumerable(0) ? Object : function (it) {\n  return cof(it) == 'String' ? it.split('') : Object(it);\n};\n","// 7.2.1 RequireObjectCoercible(argument)\nmodule.exports = function (it) {\n  if (it == undefined) throw TypeError(\"Can't call method on  \" + it);\n  return it;\n};\n","// to indexed object, toObject with fallback for non-array-like ES3 strings\nvar IObject = require('./_iobject');\nvar defined = require('./_defined');\nmodule.exports = function (it) {\n  return IObject(defined(it));\n};\n","module.exports = true;\n","// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nvar global = module.exports = typeof window != 'undefined' && window.Math == Math\n  ? window : typeof self != 'undefined' && self.Math == Math ? self\n  // eslint-disable-next-line no-new-func\n  : Function('return this')();\nif (typeof __g == 'number') __g = global; // eslint-disable-line no-undef\n","var core = module.exports = { version: '2.5.7' };\nif (typeof __e == 'number') __e = core; // eslint-disable-line no-undef\n","module.exports = function (it) {\n  if (typeof it != 'function') throw TypeError(it + ' is not a function!');\n  return it;\n};\n","// optional / simple context binding\nvar aFunction = require('./_a-function');\nmodule.exports = function (fn, that, length) {\n  aFunction(fn);\n  if (that === undefined) return fn;\n  switch (length) {\n    case 1: return function (a) {\n      return fn.call(that, a);\n    };\n    case 2: return function (a, b) {\n      return fn.call(that, a, b);\n    };\n    case 3: return function (a, b, c) {\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function (/* ...args */) {\n    return fn.apply(that, arguments);\n  };\n};\n","module.exports = function (it) {\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};\n","var isObject = require('./_is-object');\nmodule.exports = function (it) {\n  if (!isObject(it)) throw TypeError(it + ' is not an object!');\n  return it;\n};\n","module.exports = function (exec) {\n  try {\n    return !!exec();\n  } catch (e) {\n    return true;\n  }\n};\n","// Thank's IE8 for his funny defineProperty\nmodule.exports = !require('./_fails')(function () {\n  return Object.defineProperty({}, 'a', { get: function () { return 7; } }).a != 7;\n});\n","var isObject = require('./_is-object');\nvar document = require('./_global').document;\n// typeof document.createElement is 'object' in old IE\nvar is = isObject(document) && isObject(document.createElement);\nmodule.exports = function (it) {\n  return is ? document.createElement(it) : {};\n};\n","module.exports = !require('./_descriptors') && !require('./_fails')(function () {\n  return Object.defineProperty(require('./_dom-create')('div'), 'a', { get: function () { return 7; } }).a != 7;\n});\n","// 7.1.1 ToPrimitive(input [, PreferredType])\nvar isObject = require('./_is-object');\n// instead of the ES6 spec version, we didn't implement @@toPrimitive case\n// and the second argument - flag - preferred type is a string\nmodule.exports = function (it, S) {\n  if (!isObject(it)) return it;\n  var fn, val;\n  if (S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n  if (typeof (fn = it.valueOf) == 'function' && !isObject(val = fn.call(it))) return val;\n  if (!S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n  throw TypeError(\"Can't convert object to primitive value\");\n};\n","var anObject = require('./_an-object');\nvar IE8_DOM_DEFINE = require('./_ie8-dom-define');\nvar toPrimitive = require('./_to-primitive');\nvar dP = Object.defineProperty;\n\nexports.f = require('./_descriptors') ? Object.defineProperty : function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPrimitive(P, true);\n  anObject(Attributes);\n  if (IE8_DOM_DEFINE) try {\n    return dP(O, P, Attributes);\n  } catch (e) { /* empty */ }\n  if ('get' in Attributes || 'set' in Attributes) throw TypeError('Accessors not supported!');\n  if ('value' in Attributes) O[P] = Attributes.value;\n  return O;\n};\n","module.exports = function (bitmap, value) {\n  return {\n    enumerable: !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable: !(bitmap & 4),\n    value: value\n  };\n};\n","var dP = require('./_object-dp');\nvar createDesc = require('./_property-desc');\nmodule.exports = require('./_descriptors') ? function (object, key, value) {\n  return dP.f(object, key, createDesc(1, value));\n} : function (object, key, value) {\n  object[key] = value;\n  return object;\n};\n","var hasOwnProperty = {}.hasOwnProperty;\nmodule.exports = function (it, key) {\n  return hasOwnProperty.call(it, key);\n};\n","var global = require('./_global');\nvar core = require('./_core');\nvar ctx = require('./_ctx');\nvar hide = require('./_hide');\nvar has = require('./_has');\nvar PROTOTYPE = 'prototype';\n\nvar $export = function (type, name, source) {\n  var IS_FORCED = type & $export.F;\n  var IS_GLOBAL = type & $export.G;\n  var IS_STATIC = type & $export.S;\n  var IS_PROTO = type & $export.P;\n  var IS_BIND = type & $export.B;\n  var IS_WRAP = type & $export.W;\n  var exports = IS_GLOBAL ? core : core[name] || (core[name] = {});\n  var expProto = exports[PROTOTYPE];\n  var target = IS_GLOBAL ? global : IS_STATIC ? global[name] : (global[name] || {})[PROTOTYPE];\n  var key, own, out;\n  if (IS_GLOBAL) source = name;\n  for (key in source) {\n    // contains in native\n    own = !IS_FORCED && target && target[key] !== undefined;\n    if (own && has(exports, key)) continue;\n    // export native or passed\n    out = own ? target[key] : source[key];\n    // prevent global pollution for namespaces\n    exports[key] = IS_GLOBAL && typeof target[key] != 'function' ? source[key]\n    // bind timers to global for call from export context\n    : IS_BIND && own ? ctx(out, global)\n    // wrap global constructors for prevent change them in library\n    : IS_WRAP && target[key] == out ? (function (C) {\n      var F = function (a, b, c) {\n        if (this instanceof C) {\n          switch (arguments.length) {\n            case 0: return new C();\n            case 1: return new C(a);\n            case 2: return new C(a, b);\n          } return new C(a, b, c);\n        } return C.apply(this, arguments);\n      };\n      F[PROTOTYPE] = C[PROTOTYPE];\n      return F;\n    // make static versions for prototype methods\n    })(out) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;\n    // export proto methods to core.%CONSTRUCTOR%.methods.%NAME%\n    if (IS_PROTO) {\n      (exports.virtual || (exports.virtual = {}))[key] = out;\n      // export proto methods to core.%CONSTRUCTOR%.prototype.%NAME%\n      if (type & $export.R && expProto && !expProto[key]) hide(expProto, key, out);\n    }\n  }\n};\n// type bitmap\n$export.F = 1;   // forced\n$export.G = 2;   // global\n$export.S = 4;   // static\n$export.P = 8;   // proto\n$export.B = 16;  // bind\n$export.W = 32;  // wrap\n$export.U = 64;  // safe\n$export.R = 128; // real proto method for `library`\nmodule.exports = $export;\n","module.exports = require('./_hide');\n","// 7.1.4 ToInteger\nvar ceil = Math.ceil;\nvar floor = Math.floor;\nmodule.exports = function (it) {\n  return isNaN(it = +it) ? 0 : (it > 0 ? floor : ceil)(it);\n};\n","// 7.1.15 ToLength\nvar toInteger = require('./_to-integer');\nvar min = Math.min;\nmodule.exports = function (it) {\n  return it > 0 ? min(toInteger(it), 0x1fffffffffffff) : 0; // pow(2, 53) - 1 == 9007199254740991\n};\n","var toInteger = require('./_to-integer');\nvar max = Math.max;\nvar min = Math.min;\nmodule.exports = function (index, length) {\n  index = toInteger(index);\n  return index < 0 ? max(index + length, 0) : min(index, length);\n};\n","// false -> Array#indexOf\n// true  -> Array#includes\nvar toIObject = require('./_to-iobject');\nvar toLength = require('./_to-length');\nvar toAbsoluteIndex = require('./_to-absolute-index');\nmodule.exports = function (IS_INCLUDES) {\n  return function ($this, el, fromIndex) {\n    var O = toIObject($this);\n    var length = toLength(O.length);\n    var index = toAbsoluteIndex(fromIndex, length);\n    var value;\n    // Array#includes uses SameValueZero equality algorithm\n    // eslint-disable-next-line no-self-compare\n    if (IS_INCLUDES && el != el) while (length > index) {\n      value = O[index++];\n      // eslint-disable-next-line no-self-compare\n      if (value != value) return true;\n    // Array#indexOf ignores holes, Array#includes - not\n    } else for (;length > index; index++) if (IS_INCLUDES || index in O) {\n      if (O[index] === el) return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n","var core = require('./_core');\nvar global = require('./_global');\nvar SHARED = '__core-js_shared__';\nvar store = global[SHARED] || (global[SHARED] = {});\n\n(module.exports = function (key, value) {\n  return store[key] || (store[key] = value !== undefined ? value : {});\n})('versions', []).push({\n  version: core.version,\n  mode: require('./_library') ? 'pure' : 'global',\n  copyright: '© 2018 Denis Pushkarev (zloirock.ru)'\n});\n","var id = 0;\nvar px = Math.random();\nmodule.exports = function (key) {\n  return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + px).toString(36));\n};\n","var shared = require('./_shared')('keys');\nvar uid = require('./_uid');\nmodule.exports = function (key) {\n  return shared[key] || (shared[key] = uid(key));\n};\n","var has = require('./_has');\nvar toIObject = require('./_to-iobject');\nvar arrayIndexOf = require('./_array-includes')(false);\nvar IE_PROTO = require('./_shared-key')('IE_PROTO');\n\nmodule.exports = function (object, names) {\n  var O = toIObject(object);\n  var i = 0;\n  var result = [];\n  var key;\n  for (key in O) if (key != IE_PROTO) has(O, key) && result.push(key);\n  // Don't enum bug & hidden keys\n  while (names.length > i) if (has(O, key = names[i++])) {\n    ~arrayIndexOf(result, key) || result.push(key);\n  }\n  return result;\n};\n","// IE 8- don't enum bug keys\nmodule.exports = (\n  'constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf'\n).split(',');\n","// 19.1.2.14 / 15.2.3.14 Object.keys(O)\nvar $keys = require('./_object-keys-internal');\nvar enumBugKeys = require('./_enum-bug-keys');\n\nmodule.exports = Object.keys || function keys(O) {\n  return $keys(O, enumBugKeys);\n};\n","var dP = require('./_object-dp');\nvar anObject = require('./_an-object');\nvar getKeys = require('./_object-keys');\n\nmodule.exports = require('./_descriptors') ? Object.defineProperties : function defineProperties(O, Properties) {\n  anObject(O);\n  var keys = getKeys(Properties);\n  var length = keys.length;\n  var i = 0;\n  var P;\n  while (length > i) dP.f(O, P = keys[i++], Properties[P]);\n  return O;\n};\n","var document = require('./_global').document;\nmodule.exports = document && document.documentElement;\n","// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\nvar anObject = require('./_an-object');\nvar dPs = require('./_object-dps');\nvar enumBugKeys = require('./_enum-bug-keys');\nvar IE_PROTO = require('./_shared-key')('IE_PROTO');\nvar Empty = function () { /* empty */ };\nvar PROTOTYPE = 'prototype';\n\n// Create object with fake `null` prototype: use iframe Object with cleared prototype\nvar createDict = function () {\n  // Thrash, waste and sodomy: IE GC bug\n  var iframe = require('./_dom-create')('iframe');\n  var i = enumBugKeys.length;\n  var lt = '<';\n  var gt = '>';\n  var iframeDocument;\n  iframe.style.display = 'none';\n  require('./_html').appendChild(iframe);\n  iframe.src = 'javascript:'; // eslint-disable-line no-script-url\n  // createDict = iframe.contentWindow.Object;\n  // html.removeChild(iframe);\n  iframeDocument = iframe.contentWindow.document;\n  iframeDocument.open();\n  iframeDocument.write(lt + 'script' + gt + 'document.F=Object' + lt + '/script' + gt);\n  iframeDocument.close();\n  createDict = iframeDocument.F;\n  while (i--) delete createDict[PROTOTYPE][enumBugKeys[i]];\n  return createDict();\n};\n\nmodule.exports = Object.create || function create(O, Properties) {\n  var result;\n  if (O !== null) {\n    Empty[PROTOTYPE] = anObject(O);\n    result = new Empty();\n    Empty[PROTOTYPE] = null;\n    // add \"__proto__\" for Object.getPrototypeOf polyfill\n    result[IE_PROTO] = O;\n  } else result = createDict();\n  return Properties === undefined ? result : dPs(result, Properties);\n};\n","var store = require('./_shared')('wks');\nvar uid = require('./_uid');\nvar Symbol = require('./_global').Symbol;\nvar USE_SYMBOL = typeof Symbol == 'function';\n\nvar $exports = module.exports = function (name) {\n  return store[name] || (store[name] =\n    USE_SYMBOL && Symbol[name] || (USE_SYMBOL ? Symbol : uid)('Symbol.' + name));\n};\n\n$exports.store = store;\n","var def = require('./_object-dp').f;\nvar has = require('./_has');\nvar TAG = require('./_wks')('toStringTag');\n\nmodule.exports = function (it, tag, stat) {\n  if (it && !has(it = stat ? it : it.prototype, TAG)) def(it, TAG, { configurable: true, value: tag });\n};\n","'use strict';\nvar create = require('./_object-create');\nvar descriptor = require('./_property-desc');\nvar setToStringTag = require('./_set-to-string-tag');\nvar IteratorPrototype = {};\n\n// 25.1.2.1.1 %IteratorPrototype%[@@iterator]()\nrequire('./_hide')(IteratorPrototype, require('./_wks')('iterator'), function () { return this; });\n\nmodule.exports = function (Constructor, NAME, next) {\n  Constructor.prototype = create(IteratorPrototype, { next: descriptor(1, next) });\n  setToStringTag(Constructor, NAME + ' Iterator');\n};\n","// 7.1.13 ToObject(argument)\nvar defined = require('./_defined');\nmodule.exports = function (it) {\n  return Object(defined(it));\n};\n","// 19.1.2.9 / 15.2.3.2 Object.getPrototypeOf(O)\nvar has = require('./_has');\nvar toObject = require('./_to-object');\nvar IE_PROTO = require('./_shared-key')('IE_PROTO');\nvar ObjectProto = Object.prototype;\n\nmodule.exports = Object.getPrototypeOf || function (O) {\n  O = toObject(O);\n  if (has(O, IE_PROTO)) return O[IE_PROTO];\n  if (typeof O.constructor == 'function' && O instanceof O.constructor) {\n    return O.constructor.prototype;\n  } return O instanceof Object ? ObjectProto : null;\n};\n","'use strict';\nvar LIBRARY = require('./_library');\nvar $export = require('./_export');\nvar redefine = require('./_redefine');\nvar hide = require('./_hide');\nvar Iterators = require('./_iterators');\nvar $iterCreate = require('./_iter-create');\nvar setToStringTag = require('./_set-to-string-tag');\nvar getPrototypeOf = require('./_object-gpo');\nvar ITERATOR = require('./_wks')('iterator');\nvar BUGGY = !([].keys && 'next' in [].keys()); // Safari has buggy iterators w/o `next`\nvar FF_ITERATOR = '@@iterator';\nvar KEYS = 'keys';\nvar VALUES = 'values';\n\nvar returnThis = function () { return this; };\n\nmodule.exports = function (Base, NAME, Constructor, next, DEFAULT, IS_SET, FORCED) {\n  $iterCreate(Constructor, NAME, next);\n  var getMethod = function (kind) {\n    if (!BUGGY && kind in proto) return proto[kind];\n    switch (kind) {\n      case KEYS: return function keys() { return new Constructor(this, kind); };\n      case VALUES: return function values() { return new Constructor(this, kind); };\n    } return function entries() { return new Constructor(this, kind); };\n  };\n  var TAG = NAME + ' Iterator';\n  var DEF_VALUES = DEFAULT == VALUES;\n  var VALUES_BUG = false;\n  var proto = Base.prototype;\n  var $native = proto[ITERATOR] || proto[FF_ITERATOR] || DEFAULT && proto[DEFAULT];\n  var $default = $native || getMethod(DEFAULT);\n  var $entries = DEFAULT ? !DEF_VALUES ? $default : getMethod('entries') : undefined;\n  var $anyNative = NAME == 'Array' ? proto.entries || $native : $native;\n  var methods, key, IteratorPrototype;\n  // Fix native\n  if ($anyNative) {\n    IteratorPrototype = getPrototypeOf($anyNative.call(new Base()));\n    if (IteratorPrototype !== Object.prototype && IteratorPrototype.next) {\n      // Set @@toStringTag to native iterators\n      setToStringTag(IteratorPrototype, TAG, true);\n      // fix for some old engines\n      if (!LIBRARY && typeof IteratorPrototype[ITERATOR] != 'function') hide(IteratorPrototype, ITERATOR, returnThis);\n    }\n  }\n  // fix Array#{values, @@iterator}.name in V8 / FF\n  if (DEF_VALUES && $native && $native.name !== VALUES) {\n    VALUES_BUG = true;\n    $default = function values() { return $native.call(this); };\n  }\n  // Define iterator\n  if ((!LIBRARY || FORCED) && (BUGGY || VALUES_BUG || !proto[ITERATOR])) {\n    hide(proto, ITERATOR, $default);\n  }\n  // Plug for library\n  Iterators[NAME] = $default;\n  Iterators[TAG] = returnThis;\n  if (DEFAULT) {\n    methods = {\n      values: DEF_VALUES ? $default : getMethod(VALUES),\n      keys: IS_SET ? $default : getMethod(KEYS),\n      entries: $entries\n    };\n    if (FORCED) for (key in methods) {\n      if (!(key in proto)) redefine(proto, key, methods[key]);\n    } else $export($export.P + $export.F * (BUGGY || VALUES_BUG), NAME, methods);\n  }\n  return methods;\n};\n","'use strict';\nvar addToUnscopables = require('./_add-to-unscopables');\nvar step = require('./_iter-step');\nvar Iterators = require('./_iterators');\nvar toIObject = require('./_to-iobject');\n\n// 22.1.3.4 Array.prototype.entries()\n// 22.1.3.13 Array.prototype.keys()\n// 22.1.3.29 Array.prototype.values()\n// 22.1.3.30 Array.prototype[@@iterator]()\nmodule.exports = require('./_iter-define')(Array, 'Array', function (iterated, kind) {\n  this._t = toIObject(iterated); // target\n  this._i = 0;                   // next index\n  this._k = kind;                // kind\n// 22.1.5.2.1 %ArrayIteratorPrototype%.next()\n}, function () {\n  var O = this._t;\n  var kind = this._k;\n  var index = this._i++;\n  if (!O || index >= O.length) {\n    this._t = undefined;\n    return step(1);\n  }\n  if (kind == 'keys') return step(0, index);\n  if (kind == 'values') return step(0, O[index]);\n  return step(0, [index, O[index]]);\n}, 'values');\n\n// argumentsList[@@iterator] is %ArrayProto_values% (9.4.4.6, 9.4.4.7)\nIterators.Arguments = Iterators.Array;\n\naddToUnscopables('keys');\naddToUnscopables('values');\naddToUnscopables('entries');\n","require('./es6.array.iterator');\nvar global = require('./_global');\nvar hide = require('./_hide');\nvar Iterators = require('./_iterators');\nvar TO_STRING_TAG = require('./_wks')('toStringTag');\n\nvar DOMIterables = ('CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,' +\n  'DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,' +\n  'MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,' +\n  'SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,' +\n  'TextTrackList,TouchList').split(',');\n\nfor (var i = 0; i < DOMIterables.length; i++) {\n  var NAME = DOMIterables[i];\n  var Collection = global[NAME];\n  var proto = Collection && Collection.prototype;\n  if (proto && !proto[TO_STRING_TAG]) hide(proto, TO_STRING_TAG, NAME);\n  Iterators[NAME] = Iterators.Array;\n}\n","var toInteger = require('./_to-integer');\nvar defined = require('./_defined');\n// true  -> String#at\n// false -> String#codePointAt\nmodule.exports = function (TO_STRING) {\n  return function (that, pos) {\n    var s = String(defined(that));\n    var i = toInteger(pos);\n    var l = s.length;\n    var a, b;\n    if (i < 0 || i >= l) return TO_STRING ? '' : undefined;\n    a = s.charCodeAt(i);\n    return a < 0xd800 || a > 0xdbff || i + 1 === l || (b = s.charCodeAt(i + 1)) < 0xdc00 || b > 0xdfff\n      ? TO_STRING ? s.charAt(i) : a\n      : TO_STRING ? s.slice(i, i + 2) : (a - 0xd800 << 10) + (b - 0xdc00) + 0x10000;\n  };\n};\n","'use strict';\nvar $at = require('./_string-at')(true);\n\n// 21.1.3.27 String.prototype[@@iterator]()\nrequire('./_iter-define')(String, 'String', function (iterated) {\n  this._t = String(iterated); // target\n  this._i = 0;                // next index\n// 21.1.5.2.1 %StringIteratorPrototype%.next()\n}, function () {\n  var O = this._t;\n  var index = this._i;\n  var point;\n  if (index >= O.length) return { value: undefined, done: true };\n  point = $at(O, index);\n  this._i += point.length;\n  return { value: point, done: false };\n});\n","// getting tag from 19.1.3.6 Object.prototype.toString()\nvar cof = require('./_cof');\nvar TAG = require('./_wks')('toStringTag');\n// ES3 wrong here\nvar ARG = cof(function () { return arguments; }()) == 'Arguments';\n\n// fallback for IE11 Script Access Denied error\nvar tryGet = function (it, key) {\n  try {\n    return it[key];\n  } catch (e) { /* empty */ }\n};\n\nmodule.exports = function (it) {\n  var O, T, B;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (T = tryGet(O = Object(it), TAG)) == 'string' ? T\n    // builtinTag case\n    : ARG ? cof(O)\n    // ES3 arguments fallback\n    : (B = cof(O)) == 'Object' && typeof O.callee == 'function' ? 'Arguments' : B;\n};\n","var classof = require('./_classof');\nvar ITERATOR = require('./_wks')('iterator');\nvar Iterators = require('./_iterators');\nmodule.exports = require('./_core').getIteratorMethod = function (it) {\n  if (it != undefined) return it[ITERATOR]\n    || it['@@iterator']\n    || Iterators[classof(it)];\n};\n","var anObject = require('./_an-object');\nvar get = require('./core.get-iterator-method');\nmodule.exports = require('./_core').getIterator = function (it) {\n  var iterFn = get(it);\n  if (typeof iterFn != 'function') throw TypeError(it + ' is not iterable!');\n  return anObject(iterFn.call(it));\n};\n","// 20.1.2.1 Number.EPSILON\nvar $export = require('./_export');\n\n$export($export.S, 'Number', { EPSILON: Math.pow(2, -52) });\n","/**\n * Helpers & alias of Math.\n */\n\n/** Represents an arbitrary very small number. epsilon2, epsilon3*/\nexport const epsilon = 1e-6;\nexport const epsilon2 = 1e-12;\nexport const epsilon3 = Number.EPSILON; //2.2204460492503130808472633361816E-16\nexport const pi = Math.PI;\nexport const halfPi = pi / 2;\nexport const quarterPi = pi / 4;\nexport const tau = pi * 2;\n\nexport const degrees = 180 / pi;\nexport const radians = pi / 180;\n\nexport const abs = Math.abs;\nexport const atan = Math.atan;\nexport const atan2 = Math.atan2;\nexport const cos = Math.cos;\nexport const ceil = Math.ceil;\nexport const exp = Math.exp;\nexport const floor = Math.floor;\nexport const log = Math.log;\nexport const pow = Math.pow;\nexport const sin = Math.sin;\nexport const sign =\n  Math.sign ||\n  function(x) {\n    return x > 0 ? 1 : x < 0 ? -1 : 0;\n  };\nexport const sqrt = Math.sqrt;\nexport const tan = Math.tan;\nexport const max = Math.max;\nexport const min = Math.min;\n\nexport function acos(x) {\n  return x > 1 ? 0 : x < -1 ? pi : Math.acos(x);\n}\n\nexport function asin(x) {\n  return x > 1 ? halfPi : x < -1 ? -halfPi : Math.asin(x);\n}\n\nexport function haversin(x) {\n  x = sin(x / 2);\n  return x * x;\n}\n\nexport function isZero(val) {\n  return val >= -epsilon2 && val <= epsilon2;\n}\n\nexport function random(min, max) {\n  if (typeof min === 'undefined') {\n    max = 1;\n    min = 0;\n  } else if (typeof max === 'undefined') {\n    max = min;\n    min = 0;\n  }\n  return min === max ? min : Math.random() * (max - min) + min;\n}\n\nexport function sum(array) {\n  let result;\n\n  for (const value of array) {\n    if (value !== undefined) {\n      result = result === undefined ? value : result + value;\n    }\n  }\n  return result;\n}\n\nexport function mean(array) {\n  let len = array.length;\n  return sum(array) / len;\n}\n","import { isZero } from '../algorithm/math';\nimport Matrix from './Matrix';\n/**\n * The base type of graphic ,(location & vector)\n */\nexport default class Point implements Point {\n  /**\n   * static method to create instance from params\n   */\n  static instantiate(x: number | Point, y?: number): Point {\n    if (typeof x === 'undefined') throw TypeError('Invalid arguments!');\n    if (typeof x === 'number') {\n      return typeof y === 'number' ? new Point(x, y) : new Point(x, x);\n    }\n    // if x is Point\n    return x.clone();\n  }\n\n  x = 0;\n  y = 0;\n  /**\n   * Create Point with x, y\n   *\n   * @param x\n   * @param y\n   */\n  constructor(x = 0, y = 0) {\n    this.x = x;\n    this.y = y;\n  }\n\n  /**\n   * 返回是否小于极小值\n   */\n  isZero() {\n    return isZero(this.x) && isZero(this.y);\n  }\n\n  /**\n   * Returns the addition of the supplied value to both coordinates of\n   * the point as a new point.\n   * The object itself is not modified!\n   */\n  add(x: number, y: number): Point;\n  add(x: Point): Point;\n  add(x: number | Point, y?: number): Point {\n    let point = Point.instantiate(x, y);\n    return new Point(this.x + point.x, this.y + point.y);\n  }\n\n  /**\n   *\n   * @param x point.x\n   * @param y point.y\n   */\n  multiply(x: number, y: number): Point;\n  multiply(x: number): Point;\n  multiply(x: Point): Point;\n  /**\n   * Returns the multiplication of the supplied point to the point as a new\n   * point.\n   * The object itself is not modified!\n   */\n  multiply(x: number | Point, y?: number): Point {\n    let point = Point.instantiate(x, y);\n    return new Point(this.x * point.x, this.y * point.y);\n  }\n\n  /**\n   * @param x point.x\n   * @param y point.y\n   */\n  subtract(x: number, y: number): Point;\n  /**\n   * @param x instance of Pint\n   */\n  subtract(x: Point): Point;\n  /**\n   * Returns the subtraction of the supplied value to both coordinates of\n   * the point as a new point.\n   * The object itself is not modified!\n   */\n  subtract(x: number | Point, y?: number): Point {\n    let point = Point.instantiate(x, y);\n    return new Point(this.x - point.x, this.y - point.y);\n  }\n\n  /**\n   * Returns the division of the supplied value to both coordinates of\n   * the point as a new point.\n   * The object itself is not modified!\n   */\n  divide(x: number, y: number) {\n    let point = Point.instantiate(x, y);\n    return new Point(this.x / point.x, this.y / point.y);\n  }\n\n  /**\n   * Transforms the point by the matrix as a new point. The object itself is\n   * not modified!\n   *\n   * @param matrix\n   */\n  transform(matrix: Matrix) {\n    matrix.applyToPoint(this);\n    return this;\n  }\n\n  /**\n   * Add and return this\n   * @param other\n   */\n  addEquals(other: Point) {\n    this.x += other.x;\n    this.y += other.y;\n    return this;\n  }\n\n  /**\n   * Assign x, y from other point.\n   * @param {*} point\n   */\n  assign(point: Point) {\n    this.x = point.x;\n    this.y = point.y;\n    return this;\n  }\n\n  /**\n   * If the point coord is equal to the other point.\n   * @param other\n   */\n  equals(other: Point) {\n    return this === other || (this.x === other.x && this.y === other.y);\n  }\n\n  /**\n   * Returns new point which is the result of linear interpolation with this one and another one\n   * @param  other\n   * @param time , position of interpolation, between 0 and 1 default 0.5\n   */\n  lerp(other: Point, time = 0.5) {\n    if (time > 1 || time < 0) throw new TypeError(`Param 'Time' must between 0 and 1;`);\n    time = Math.max(Math.min(1, time), 0);\n    return new Point(this.x + (other.x - this.x) * time, this.y + (other.y - this.y) * time);\n  }\n\n  /**\n   * Returns the point between this point and another one\n   * @param other\n   */\n  midPointFrom(other: Point) {\n    return this.lerp(other);\n  }\n\n  /**\n   * Returns distance from other point.\n   * @param other\n   */\n  getDistance(other: Point) {\n    const dx = this.x - other.x,\n      dy = this.y - other.y;\n\n    return Math.sqrt(dx * dx + dy * dy);\n  }\n\n  /**\n   *\n   * @param point\n   * @param threshold\n   */\n  nearby(point: Point, threshold = 4) {\n    return this.getDistance(point) < threshold;\n  }\n\n  /**\n   * negate point & return a new point.\n   */\n  negate() {\n    return new Point(-this.x, -this.y);\n  }\n\n  /**\n   * get the length of point from (0,0);\n   */\n  get length() {\n    return Math.sqrt(this.x * this.x + this.y * this.y);\n  }\n\n  /**\n   * Get Angle In Radians, Vector\n   */\n  get angle() {\n    if (!this.length) return 0;\n    return Math.atan2(this.y, this.x);\n  }\n\n  /**\n   *\n   * Rotates the point the given angle around origin center point;\n   * @param angle\n   */\n  rotate(angle: number): Point;\n  /**\n   * Rotates the point by the given angle around an optional center point.\n   * The object itself is not modified.\n   *\n   * Read more about angle units and orientation in the description of the\n   * {@link #angle} property.\n   *\n   * @param angle the rotation angle\n   * @param center the center point of the rotation\n   */\n  rotate(angle: number, center?: Point) {\n    if (angle === 0) return this.clone();\n    angle = (angle * Math.PI) / 180;\n\n    let point = center ? this.subtract(center.x, center.y) : this,\n      sin = Math.sin(angle),\n      cos = Math.cos(angle);\n\n    point = new Point(point.x * cos - point.y * sin, point.x * sin + point.y * cos);\n\n    return center ? point.add(center) : point;\n  }\n\n  /**\n   * Normalize modifies the {@link #length} of the vector to `1` without\n   * changing its angle and returns it as a new point. The optional `length`\n   * parameter defines the length to normalize to. The object itself is not\n   * modified!\n   *\n   * @param [length=1] The length of the normalized vector\n   * @return the normalized vector of the vector that is represented\n   *     by this point's coordinates\n   */\n  normalize(length = 1) {\n    let current = this.length,\n      scale = current !== 0 ? length / current : 0;\n\n    return new Point(this.x * scale, this.y * scale);\n  }\n\n  /**\n   * {@group-title Vector Math Functions}\n   * Returns the dot product of the point and another point.\n   *\n   * @param point\n   * @return the dot product of the two points\n   */\n  dot(point: Point) {\n    return this.x * point.x + this.y * point.y;\n  }\n\n  /**\n   * return a cloned instance of the point\n   */\n  clone() {\n    return new Point(this.x, this.y);\n  }\n\n  /**\n   * return point data as JSON-format: [x, y]\n   */\n  toJSON(precision = -1) {\n    if (precision === -1) return [this.x, this.y];\n\n    let multiplier = Math.pow(10, precision);\n    return [Math.round(this.x * multiplier) / multiplier, Math.round(this.y * multiplier) / multiplier];\n  }\n\n  /**\n   * return point data as String-format\n   */\n  toString() {\n    return '{ x: ' + this.x + ', y: ' + this.y + ' }';\n  }\n}\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","/**\n * 处理矩形各个控制点逻辑\n * 1）返回矩形各个控制点的getter, setter\n * 2) 返回各控制点的逻辑\n * 3）返回各控制点名字和反向点名字，并排序\n */\nimport Point from '../types/Point';\n\n// x方向，对应坐标 -1, 0, 1\nconst horizontal = ['right', 'centerX', 'left']; // order sensitive\n// y方向，对应坐标 -1, 0, 1\nconst vertical = ['bottom', 'centerY', 'top']; // order sensitive\n\n/**\n * 首字幕大写\n * @param { } str\n */\nconst capitalize = str => {\n  return str.replace(/\\b[a-z]/g, function(match) {\n    return match.toUpperCase();\n  });\n};\n\n/**\n * 获取属性名\n * @param {*} indexY\n * @param {*} indexX\n */\nconst getDirection = (indexY, indexX) => {\n  // 将centerX, centerY, 简写为center。\n  if (indexY === 0) {\n    if (indexX === 0) return 'center';\n    return horizontal[indexX + 1] + 'Center';\n  }\n  if (indexX === 0) {\n    return vertical[indexY + 1] + 'Center';\n  }\n  return vertical[indexY + 1] + capitalize(horizontal[indexX + 1]);\n};\n\n/**\n * Cross product\n * @param {Array} a1\n * @param {Array} a2\n * @param {Function} itor\n */\nconst cross = (a1, a2, itor) => {\n  a1.forEach((i1, i1Idx) => {\n    a2.forEach((i2, i2Idx) => {\n      itor.apply(null, [i1, i2, i1Idx - 1, i2Idx - 1]);\n    });\n  });\n};\n\n//export constants\nconst boundsPoi = [];\nconst antiDir = {};\nconst props = {}; //set to rect prototype\n\n(() => {\n  let _tempBounds = [];\n\n  //控制点临时数组\n  cross(horizontal, vertical, (x, y, coordX, coordY) => {\n    let dir = getDirection(coordY, coordX);\n    let anti = getDirection(-coordY, -coordX);\n    let vector = new Point(coordX, coordY);\n    _tempBounds.push({ x, y, dir, anti, vector });\n  });\n\n  //控制点按矢量进行排序，确保顺时针\n  _tempBounds.sort((l, r) => (l.vector.angle > r.vector.angle ? -1 : 1));\n\n  _tempBounds.forEach(({ x, y, dir, anti, vector }) => {\n    props[dir] = {\n      get() {\n        return new Point(this[x], this[y]);\n      },\n      set(point) {\n        this[x] = point.x;\n        this[y] = point.y;\n        return this;\n      },\n      enumerable: true,\n      configurable: true,\n    };\n\n    if (vector.isZero()) return; // ignore center.\n\n    boundsPoi.push(dir);\n    antiDir[dir] = anti;\n  });\n})();\n\nconst cursorMap = {\n  topLeft: 'nw-resize',\n  topCenter: 'n-resize',\n  topRight: 'ne-resize',\n  rightCenter: 'e-resize',\n  bottomRight: 'se-resize',\n  bottomCenter: 's-resize',\n  bottomLeft: 'sw-resize',\n  leftCenter: 'w-resize',\n};\n\nexport { boundsPoi, antiDir, props, cursorMap };\n","function assign(target: object, frm: object) {\n  return Object.assign(target, frm);\n}\n\n/**\n * Mixins an object into the classes prototype.\n *\n * @export\n * @param {...Object[]} srcs\n * @returns {ClassDecorator}\n * @example\n *\n * const myMixin = {\n *   blorg: () => 'blorg!'\n * }\n *\n * @Mixin(myMixin)\n * class MyClass {}\n *\n * const myClass = new MyClass();\n *\n * myClass.blorg(); // => 'blorg!'\n *\n */\nexport function mixin(srcs: Object): ClassDecorator {\n  return target => {\n    assign(target.prototype, srcs);\n    return target;\n  };\n}\n\n/**\n * 组合两个function\n * @param {Object} proto, prototype of class.\n * @param {String} name 名字\n * @param {Function} fn 带绑定的function\n */\nconst combineFnToProto = function combineFnToProto(proto: object, name: string, fn: (...arg: any[]) => any) {\n  let origin = proto[name];\n  if (typeof origin === 'undefined') {\n    proto[name] = fn;\n    return fn;\n  }\n  if (typeof origin !== 'function') throw new TypeError(`${name} already exist!`);\n\n  proto[name] = function() {\n    //call origin function first,\n    if (origin.apply(this, arguments) !== false) {\n      // cancel second fn call, if origin function return 'false'.\n      return fn.apply(this, arguments);\n    }\n    return false;\n  };\n  return proto[name];\n};\n\n/**\n * Deep mixins an object into the classes prototype.\n */\nexport function deepMixin(srcs: Object): ClassDecorator {\n  return target => {\n    for (let key in srcs) {\n      let descriptor = Object.getOwnPropertyDescriptor(srcs, key);\n      if (!descriptor) continue;\n      if (typeof descriptor.value === 'function') {\n        // if is function, combine with old function.\n        combineFnToProto(target.prototype, key, descriptor.value);\n      } else if (typeof descriptor.get === 'function' || typeof descriptor.set === 'function') {\n        //@ts-ignore\n        if (!IS_PRODUCTION) {\n          target.prototype[key] && console.warn(`${target.name}.${key} already exist!`);\n        }\n        // if is getter & setter, set descriptor to prototype.\n        Object.defineProperty(target.prototype, key, descriptor);\n      } else {\n        //@ts-ignore\n        if (!IS_PRODUCTION) {\n          target.prototype[key] && console.warn(`${target.name}.${key} already exist!`);\n        }\n        // if is other types, just overwrite\n        target.prototype[key] = descriptor.value;\n      }\n    }\n    return target;\n  };\n}\n\n/**\n *\n * Mixins property into the classes prototype.\n * @param {Map} props\n */\nexport function mixinProps(props: Object): ClassDecorator {\n  //Object.defineProperty\n  return target => {\n    for (const key in props) {\n      Object.defineProperty(target.prototype, key, props[key]);\n    }\n    return target;\n  };\n}\n\nexport default mixin;\n","import Point from './Point';\nimport { props } from '../algorithm/corner';\nimport { mixinProps } from '../../decorators/mixin';\nimport Item from '../Item';\nimport Matrix from './Matrix';\n\n/**\n *  Type Rect\n */\n@mixinProps(props)\nclass Rect {\n\n  /**\n   * static method to create instance from params\n   */\n  static instantiate(x: number, y: number, width: number, height: number) {\n    if (typeof x === 'undefined') throw TypeError('Invalid arguments!');\n    return new Rect(x, y, width, height);\n    // if x is Rect\n    // return x.clone();\n  }\n\n  x = 0;\n  y = 0;\n  width = 0;\n  height = 0;\n  owner: Item | null; // tool instance\n  center: Point;\n\n  constructor(x: number, y: number, width: number, height: number, owner?: Item) {\n    this.x = x;\n    this.y = y;\n    this.width = width;\n    this.height = height;\n    this.owner = owner || null;\n    this.center = Point.instantiate(this.centerX, this.centerY);\n  }\n\n  /**\n   * Assign x, y, width, height from other rect.\n   * @param rect\n   */\n  assign(x: number, y: number, width: number, height: number) {\n    let rect = Rect.instantiate(x, y, width, height);\n    this.x = rect.x;\n    this.y = rect.y;\n    this.width = rect.width;\n    this.height = rect.height;\n  }\n\n  /** The coordinate of the top, left, right, bottom. */\n\n  /**\n   * The coordinate of the top.\n   *\n   * @type Number\n   *\n   */\n  get top(): number {\n    return this.y;\n  }\n  set top(top: number) {\n    this.y = top;\n  }\n\n  /**\n   * The coordinate of the left.\n   *\n   * @type Number\n   *\n   */\n  get left() {\n    return this.x;\n  }\n  set left(left: number) {\n    this.x = left;\n  }\n\n  /**\n   * The coordinate of bottom, getter && setter\n   *\n   * @type Number\n   *\n   */\n  get bottom() {\n    return this.y + this.height;\n  }\n  set bottom(bottom: number) {\n    this.y = bottom - this.height;\n  }\n\n  /**\n   * The coordinate of right, getter && setter\n   *\n   * @type Number\n   */\n  get right() {\n    return this.x + this.width;\n  }\n  set right(right: number) {\n    this.x = right - this.width;\n  }\n\n  /**\n   * The center-x coordinate of the rectangle.\n   *\n   * @type Number\n   */\n  get centerX() {\n    return this.x + this.width / 2;\n  }\n\n  set centerX(val: number) {\n    this.x = val - this.width / 2;\n  }\n\n  /**\n   * The center-y coordinate of the rectangle.\n   *\n   * @type Number\n   */\n  get centerY() {\n    return this.y + this.height / 2;\n  }\n\n  set centerY(val: number) {\n    this.y = val - this.height / 2;\n  }\n\n  //alias for setter ‘center’\n  setCenter(x: number, y: number) {\n    this.center = Point.instantiate(x, y);\n    return this;\n  }\n\n  /**\n   * The area of the rectangle.\n   *\n   * @bean\n   * @type Number\n   */\n  get area() {\n    return this.width * this.height;\n  }\n\n  /**\n   * Returns a new rectangle representing the union of this rectangle with the\n   * specified rectangle.\n   *\n   * @param rect the rectangle to be combined with this rectangle\n   * @return the smallest rectangle containing both the specified\n   * rectangle and this rectangle\n   */\n  unite(rect: Rect) {\n    let x1 = Math.min(this.x, rect.x),\n      y1 = Math.min(this.y, rect.y),\n      x2 = Math.max(this.x + this.width, rect.x + rect.width),\n      y2 = Math.max(this.y + this.height, rect.y + rect.height);\n\n    return new Rect(x1, y1, x2 - x1, y2 - y1);\n  }\n\n  /**\n   * Returns a new rectangle representing the intersection of this rectangle with the\n   * specified rectangle.\n   *\n   * @param rect the rectangle to be combined with this rectangle\n   * @return the smallest rectangle containing both the specified, if\n   * rectangle and this rectangle\n   */\n  intersect(rect: Rect) {\n    let x1 = Math.max(this.x, rect.x);\n    var width1 = Math.min(this.x + this.width, rect.x + rect.width);\n    var y1 = Math.max(this.y, rect.y);\n    var height1 = Math.min(this.y + this.height, rect.y + rect.height);\n    if (width1 >= x1 && height1 >= y1) {\n      return new Rect(x1, y1, width1, height1);\n    }\n    return null;\n  }\n\n  /**\n   *  Tests if the specified point is inside the boundary of the rectangle.\n   *\n   * @function\n   * @param point the specified point\n   * @type Boolean\n   * @ignore\n   */\n  containsPoint(point: Point) {\n    var x = point.x,\n      y = point.y;\n    return x >= this.x && y >= this.y && x <= this.x + this.width && y <= this.y + this.height;\n  }\n\n  /**\n   * Tests if the interior of the rectangle entirely contains the specified\n   *\n   * @function\n   * @param point the specified rectangle\n   * @type Boolean\n   * @ignore\n   */\n  containsRect(rect: Rect) {\n    var x = rect.x,\n      y = rect.y;\n    return (\n      x >= this.x && y >= this.y && x + rect.width <= this.x + this.width && y + rect.height <= this.y + this.height\n    );\n  }\n\n  /**\n   * Returns a copy of the rectangle.\n   *\n   * @function\n   * @type Point\n   */\n  clone() {\n    return new Rect(this.x, this.y, this.width, this.height);\n  }\n\n  /**\n   * If the rect is equal to the other rect.\n   * @param other\n   */\n  equals(other: Rect): boolean {\n    return (\n      this === other ||\n      (this.x === other.x && this.y === other.y && this.width === other.width && this.height === other.height)\n    );\n  }\n\n  /**\n   * Expend width, height. as same keep center\n   * @param width\n   * @param height\n   */\n  expand(width: number, height?: number): Rect {\n    if (typeof height === 'undefined') height = width;\n\n    return new Rect(this.x - width / 2, this.y - height / 2, this.width + width, this.height + height);\n  }\n\n  /**\n   * transform by matrix\n   * @param matrix\n   */\n  transform(matrix: Matrix) {\n    matrix.applyToRect(this);\n  }\n\n  /**\n   * return point data as JSON-format: [x, y, width, height]\n   */\n  toJSON() {\n    return [this.x, this.y, this.width, this.height];\n  }\n\n  /**\n   * return string format.\n   */\n  toString() {\n    return '{ x: ' + this.x + ', y: ' + this.y + ', width: ' + this.width + ', height: ' + this.height + ' }';\n  }\n}\n\nexport default Rect;\n","module.exports = '\\x09\\x0A\\x0B\\x0C\\x0D\\x20\\xA0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003' +\n  '\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF';\n","var $export = require('./_export');\nvar defined = require('./_defined');\nvar fails = require('./_fails');\nvar spaces = require('./_string-ws');\nvar space = '[' + spaces + ']';\nvar non = '\\u200b\\u0085';\nvar ltrim = RegExp('^' + space + space + '*');\nvar rtrim = RegExp(space + space + '*$');\n\nvar exporter = function (KEY, exec, ALIAS) {\n  var exp = {};\n  var FORCE = fails(function () {\n    return !!spaces[KEY]() || non[KEY]() != non;\n  });\n  var fn = exp[KEY] = FORCE ? exec(trim) : spaces[KEY];\n  if (ALIAS) exp[ALIAS] = fn;\n  $export($export.P + $export.F * FORCE, 'String', exp);\n};\n\n// 1 -> String#trimLeft\n// 2 -> String#trimRight\n// 3 -> String#trim\nvar trim = exporter.trim = function (string, TYPE) {\n  string = String(defined(string));\n  if (TYPE & 1) string = string.replace(ltrim, '');\n  if (TYPE & 2) string = string.replace(rtrim, '');\n  return string;\n};\n\nmodule.exports = exporter;\n","var $parseInt = require('./_global').parseInt;\nvar $trim = require('./_string-trim').trim;\nvar ws = require('./_string-ws');\nvar hex = /^[-+]?0[xX]/;\n\nmodule.exports = $parseInt(ws + '08') !== 8 || $parseInt(ws + '0x16') !== 22 ? function parseInt(str, radix) {\n  var string = $trim(String(str), 3);\n  return $parseInt(string, (radix >>> 0) || (hex.test(string) ? 16 : 10));\n} : $parseInt;\n","var $export = require('./_export');\nvar $parseInt = require('./_parse-int');\n// 18.2.5 parseInt(string, radix)\n$export($export.G + $export.F * (parseInt != $parseInt), { parseInt: $parseInt });\n","require('../modules/es6.parse-int');\nmodule.exports = require('../modules/_core').parseInt;\n","module.exports = require(\"core-js/library/fn/parse-int\");","/**\n * Color helper.\n */\nimport { max, min } from './math';\n\n// CSS named colors.\nconst NamedColor = {\n  transparent: [0, 0, 0, 0],\n  aliceblue: [240, 248, 255, 1],\n  antiquewhite: [250, 235, 215, 1],\n  aqua: [0, 255, 255, 1],\n  aquamarine: [127, 255, 212, 1],\n  azure: [240, 255, 255, 1],\n  beige: [245, 245, 220, 1],\n  bisque: [255, 228, 196, 1],\n  black: [0, 0, 0, 1],\n  blanchedalmond: [255, 235, 205, 1],\n  blue: [0, 0, 255, 1],\n  blueviolet: [138, 43, 226, 1],\n  brown: [165, 42, 42, 1],\n  burlywood: [222, 184, 135, 1],\n  cadetblue: [95, 158, 160, 1],\n  chartreuse: [127, 255, 0, 1],\n  chocolate: [210, 105, 30, 1],\n  coral: [255, 127, 80, 1],\n  cornflowerblue: [100, 149, 237, 1],\n  cornsilk: [255, 248, 220, 1],\n  crimson: [220, 20, 60, 1],\n  cyan: [0, 255, 255, 1],\n  darkblue: [0, 0, 139, 1],\n  darkcyan: [0, 139, 139, 1],\n  darkgoldenrod: [184, 134, 11, 1],\n  darkgray: [169, 169, 169, 1],\n  darkgreen: [0, 100, 0, 1],\n  darkgrey: [169, 169, 169, 1],\n  darkkhaki: [189, 183, 107, 1],\n  darkmagenta: [139, 0, 139, 1],\n  darkolivegreen: [85, 107, 47, 1],\n  darkorange: [255, 140, 0, 1],\n  darkorchid: [153, 50, 204, 1],\n  darkred: [139, 0, 0, 1],\n  darksalmon: [233, 150, 122, 1],\n  darkseagreen: [143, 188, 143, 1],\n  darkslateblue: [72, 61, 139, 1],\n  darkslategray: [47, 79, 79, 1],\n  darkslategrey: [47, 79, 79, 1],\n  darkturquoise: [0, 206, 209, 1],\n  darkviolet: [148, 0, 211, 1],\n  deeppink: [255, 20, 147, 1],\n  deepskyblue: [0, 191, 255, 1],\n  dimgray: [105, 105, 105, 1],\n  dimgrey: [105, 105, 105, 1],\n  dodgerblue: [30, 144, 255, 1],\n  firebrick: [178, 34, 34, 1],\n  floralwhite: [255, 250, 240, 1],\n  forestgreen: [34, 139, 34, 1],\n  fuchsia: [255, 0, 255, 1],\n  gainsboro: [220, 220, 220, 1],\n  ghostwhite: [248, 248, 255, 1],\n  gold: [255, 215, 0, 1],\n  goldenrod: [218, 165, 32, 1],\n  gray: [128, 128, 128, 1],\n  green: [0, 128, 0, 1],\n  greenyellow: [173, 255, 47, 1],\n  grey: [128, 128, 128, 1],\n  honeydew: [240, 255, 240, 1],\n  hotpink: [255, 105, 180, 1],\n  indianred: [205, 92, 92, 1],\n  indigo: [75, 0, 130, 1],\n  ivory: [255, 255, 240, 1],\n  khaki: [240, 230, 140, 1],\n  lavender: [230, 230, 250, 1],\n  lavenderblush: [255, 240, 245, 1],\n  lawngreen: [124, 252, 0, 1],\n  lemonchiffon: [255, 250, 205, 1],\n  lightblue: [173, 216, 230, 1],\n  lightcoral: [240, 128, 128, 1],\n  lightcyan: [224, 255, 255, 1],\n  lightgoldenrodyellow: [250, 250, 210, 1],\n  lightgray: [211, 211, 211, 1],\n  lightgreen: [144, 238, 144, 1],\n  lightgrey: [211, 211, 211, 1],\n  lightpink: [255, 182, 193, 1],\n  lightsalmon: [255, 160, 122, 1],\n  lightseagreen: [32, 178, 170, 1],\n  lightskyblue: [135, 206, 250, 1],\n  lightslategray: [119, 136, 153, 1],\n  lightslategrey: [119, 136, 153, 1],\n  lightsteelblue: [176, 196, 222, 1],\n  lightyellow: [255, 255, 224, 1],\n  lime: [0, 255, 0, 1],\n  limegreen: [50, 205, 50, 1],\n  linen: [250, 240, 230, 1],\n  magenta: [255, 0, 255, 1],\n  maroon: [128, 0, 0, 1],\n  mediumaquamarine: [102, 205, 170, 1],\n  mediumblue: [0, 0, 205, 1],\n  mediumorchid: [186, 85, 211, 1],\n  mediumpurple: [147, 112, 219, 1],\n  mediumseagreen: [60, 179, 113, 1],\n  mediumslateblue: [123, 104, 238, 1],\n  mediumspringgreen: [0, 250, 154, 1],\n  mediumturquoise: [72, 209, 204, 1],\n  mediumvioletred: [199, 21, 133, 1],\n  midnightblue: [25, 25, 112, 1],\n  mintcream: [245, 255, 250, 1],\n  mistyrose: [255, 228, 225, 1],\n  moccasin: [255, 228, 181, 1],\n  navajowhite: [255, 222, 173, 1],\n  navy: [0, 0, 128, 1],\n  oldlace: [253, 245, 230, 1],\n  olive: [128, 128, 0, 1],\n  olivedrab: [107, 142, 35, 1],\n  orange: [255, 165, 0, 1],\n  orangered: [255, 69, 0, 1],\n  orchid: [218, 112, 214, 1],\n  palegoldenrod: [238, 232, 170, 1],\n  palegreen: [152, 251, 152, 1],\n  paleturquoise: [175, 238, 238, 1],\n  palevioletred: [219, 112, 147, 1],\n  papayawhip: [255, 239, 213, 1],\n  peachpuff: [255, 218, 185, 1],\n  peru: [205, 133, 63, 1],\n  pink: [255, 192, 203, 1],\n  plum: [221, 160, 221, 1],\n  powderblue: [176, 224, 230, 1],\n  purple: [128, 0, 128, 1],\n  red: [255, 0, 0, 1],\n  rosybrown: [188, 143, 143, 1],\n  royalblue: [65, 105, 225, 1],\n  saddlebrown: [139, 69, 19, 1],\n  salmon: [250, 128, 114, 1],\n  sandybrown: [244, 164, 96, 1],\n  seagreen: [46, 139, 87, 1],\n  seashell: [255, 245, 238, 1],\n  sienna: [160, 82, 45, 1],\n  silver: [192, 192, 192, 1],\n  skyblue: [135, 206, 235, 1],\n  slateblue: [106, 90, 205, 1],\n  slategray: [112, 128, 144, 1],\n  slategrey: [112, 128, 144, 1],\n  snow: [255, 250, 250, 1],\n  springgreen: [0, 255, 127, 1],\n  steelblue: [70, 130, 180, 1],\n  tan: [210, 180, 140, 1],\n  teal: [0, 128, 128, 1],\n  thistle: [216, 191, 216, 1],\n  tomato: [255, 99, 71, 1],\n  turquoise: [64, 224, 208, 1],\n  violet: [238, 130, 238, 1],\n  wheat: [245, 222, 179, 1],\n  white: [255, 255, 255, 1],\n  whitesmoke: [245, 245, 245, 1],\n  yellow: [255, 255, 0, 1],\n  yellowgreen: [154, 205, 50, 1],\n};\n\n/**\n * Adapt from <a href=\"https://rawgithub.com/mjijackson/mjijackson.github.com/master/2008/02/rgb-to-hsl-and-rgb-to-hsv-color-model-conversion-algorithms-in-javascript.html\">https://github.com/mjijackson</a>\n * @param {Number} r Red color value\n * @param {Number} g Green color value\n * @param {Number} b Blue color value\n * @return {Array} hsl color\n */\nfunction RGB2HSL(r, g, b) {\n  let maxc = max(r, g, b),\n    minc = min(r, g, b),\n    delta = maxc - minc,\n    achromatic = delta === 0,\n    h = achromatic\n      ? 0\n      : (maxc == r ? (g - b) / delta + (g < b ? 6 : 0) : maxc == g ? (b - r) / delta + 2 : (r - g) / delta + 4) * 60, // maxc == b\n    l = (maxc + minc) / 2,\n    s = achromatic ? 0 : l < 0.5 ? delta / (maxc + minc) : delta / (2 - maxc - minc);\n\n  return [h, s, l];\n}\n\n/**\n * Convert RGB color tp HSL(LSV)\n *\n * @param {Number} h hue\n * @param {Number} s saturation\n * @param {Number} l lightness\n */\nfunction HSL2RGB(h, s, l) {\n  // Scale h to 0..1 with modulo for negative values too\n  h = (((h / 360) % 1) + 1) % 1;\n  if (s === 0) return [l, l, l];\n  let t3s = [h + 1 / 3, h, h - 1 / 3],\n    t2 = l < 0.5 ? l * (1 + s) : l + s - l * s,\n    t1 = 2 * l - t2,\n    c = [];\n  for (let i = 0; i < 3; i++) {\n    let t3 = t3s[i];\n    if (t3 < 0) t3 += 1;\n    if (t3 > 1) t3 -= 1;\n    c[i] = 6 * t3 < 1 ? t1 + (t2 - t1) * 6 * t3 : 2 * t3 < 1 ? t2 : 3 * t3 < 2 ? t1 + (t2 - t1) * (2 / 3 - t3) * 6 : t1;\n  }\n  return c;\n}\n\n/**\n * Using the standard NTSC conversion formula that is used for\n * calculating the effective lumincance of an RGB color:\n * http://www.mathworks.com/support/solutions/en/data/1-1ASCU/index.html?solution=1-1ASCU\n *\n * @param {Number} r Red color value\n * @param {Number} g Green color value\n * @param {Number} b Blue color value\n * */\nfunction RGB2Gray(r, g, b) {\n  return [r * 0.2989 + g * 0.587 + b * 0.114];\n}\n\n/**\n * Convert RGB to HEX.\n *\n * @param {Number} r Red color value\n * @param {Number} g Green color value\n * @param {Number} b Blue color value\n */\nfunction RGB2HEX(r, g, b) {\n  var s = (65536 * Math.round(255 * r) + 256 * Math.round(255 * g) + Math.round(255 * b)).toString(16);\n  return '#' + '00000'.substr(0, 6 - s.length) + s;\n}\n\n/**\n * Convert hex color string to rgb.\n * @param {String} hex e.g. #ffffff, #c19\n */\nfunction HEX2RGB(hex) {\n  //TODO: check format.\n  if (hex.length === 4) {\n    //#fff\n    hex = `${hex[1]}${hex[1]}${hex[2]}${hex[2]}${hex[2]}${hex[2]}`;\n  } else if (hex.length === 7) {\n    hex = hex.replace(/^#/, '');\n  } else {\n    throw new TypeError('invalid hex format!');\n  }\n\n  const num = parseInt(hex, 16);\n  const red = num >> 16;\n  const green = (num >> 8) & 255;\n  const blue = num & 255;\n\n  return [red, green, blue];\n}\n\n/**\n * Convert gray color to rgb.\n * @param {Number} g gray\n */\nfunction Gray2RGB(g) {\n  return [g, g, g];\n}\n\n/**\n * Convert gray color to HSB.\n * @param {Number} g gray\n */\nfunction Gray2HSB(g) {\n  return [0, 0, g];\n}\n\n/**\n *Color convert helpers.\n */\nexport { NamedColor, RGB2HSL, HSL2RGB, RGB2Gray, Gray2RGB, Gray2HSB, RGB2HEX, HEX2RGB };\n","import { RGB2HSL, HEX2RGB } from '../algorithm/color';\n\nconst hexRE = /^#(?:[0-9a-f]{3}|[0-9a-f]{6})$/i;\nconst rgbaRE = /^rgba?\\((.*)\\)$/i;\n\n/**\n * 所用颜色统一处理为 rgba\n */\nclass Color {\n  //4 channels.\n  red = 0;\n  green = 0;\n  blue = 0;\n  alpha = 1;\n\n  /**\n   *\n   *  e.g.\n   *  String: '#fff','#ac78bf', 'rgb(30, 30, 30)', 'rgba(30, 30, 30, 0.5)'\n   *  Array: [128, 128, 128, 0.5],  [250, 250, 250]\n   */\n  constructor(colorStr?: string | [number, number, number, number]) {\n    if (typeof colorStr === 'string') this.normalizeColor(colorStr);\n    else if (Array.isArray(colorStr)) {\n      this.red = colorStr[0];\n      this.green = colorStr[1];\n      this.blue = colorStr[2];\n      this.alpha = colorStr[3] || 1;\n    }\n  }\n\n  /**\n   *\n   * normalize color to rgba.\n   * hex => rgba;\n   * rgb => rgba;\n   *\n   * @param colorStr\n   */\n  normalizeColor(colorStr: string) {\n    let color: number[] = [];\n\n    if (hexRE.test(colorStr)) {\n      color = HEX2RGB(colorStr);\n    } else {\n      const match = colorStr.match(rgbaRE);\n      if (match) {\n        const parts = match[1].split(',');\n        color = parts.map(part => +part);\n      }\n    }\n\n    this.red = color[0];\n    this.green = color[1];\n    this.blue = color[2];\n\n    if (typeof color[3] !== 'undefined') this.alpha = color[3];\n  }\n\n  /**\n   * If equals other color.\n   * @param other\n   */\n  equals(color: Color) {\n    return (\n      this === color ||\n      (this.red === color.red && this.green === color.green && this.blue === color.blue && this.alpha === color.alpha)\n    );\n  }\n\n  /**\n   * Return a new duplicate of this instance.\n   */\n  clone() {\n    let ret = new Color();\n    Object.assign(ret, this); // ...this, remain red, blue, green, alpha.\n    return ret;\n  }\n\n  /**\n   * Convert to HSL format.\n   */\n  toHSL() {\n    return RGB2HSL(this.red, this.green, this.blue);\n  }\n\n  /**\n   * Convert to HEX number.\n   */\n  toHex() {\n    return (this.red << 16) + (this.green << 8) + this.blue;\n  }\n\n  /**\n   * Convert to HEX string.\n   */\n  toHexString() {\n    const colorStr = this.toHex().toString(16);\n    return '#000000'.substr(0, 7 - colorStr.length) + colorStr;\n  }\n\n  /**\n   * Convert to JSON format\n   */\n  toJSON() {\n    return [this.red, this.green, this.blue, this.alpha];\n  }\n\n  /**\n   * Convert to RGBA string (css format).\n   */\n  toString() {\n    return `rgba(${this.toJSON().join(',')})`;\n  }\n}\n\nexport default Color;\n","import Color from './Color';\n\nconst fillRule = {\n  nonzero: 'nonzero',\n  evenodd: 'evenodd',\n};\n/**\n * default style settings of path\n */\nexport const defaultStyles = {\n  //reset default value to adapt whiteboard.\n  // Paths\n  fillRule: fillRule.nonzero,\n  lineWidth: 3,\n  lineCap: 'round',\n  lineJoin: 'round',\n  miterLimit: 10,\n  lineDashOffset: 0,\n  dashArray: [], // for: setLineDash, getLineDash\n  // Shadows\n  shadowColor: null,\n  shadowBlur: 0,\n  shadowOffsetX: 0,\n  shadowOffsetY: 0,\n};\n\n/**\n * default font=style settings of fillText\n */\nexport const fontStyles = {\n  // Characters\n  strokeColor: 'rgba(232, 20, 20, 1)',\n  fontSize: 36,\n  fontFamily: 'sans-serif',\n  textAlign: 'left',\n  justification: 'left',\n};\n\nexport default class Style {\n  private _strokeStyle: Color;\n  private _fillStyle: Color;\n  fillRule!: \"nonzero\" | \"evenodd\";\n  lineWidth!: number;\n  lineCap!: \"butt\" | \"round\" | \"square\";\n  lineJoin!: \"bevel\" | \"round\" | \"miter\";\n  miterLimit!: number;\n  lineDashOffset!: number;\n  dashArray!: number[];\n  shadowColor!: Color;\n  shadowBlur!: number;\n  shadowOffsetX!: number;\n  shadowOffsetY!: number;\n  strokeColor!: string;\n  fontSize!: number;\n  fontFamily!: string;\n  textAlign!: string;\n  justification!: string;\n\n  constructor(options: Partial<typeof defaultStyles & typeof fontStyles> = {}) {\n    /** new copy of color instance! */\n    this._strokeStyle = new Color('#c69');\n    this._fillStyle = new Color('#c69');\n    // this.lineWidth = 3;\n    Object.assign(this, defaultStyles, fontStyles, options);\n  }\n\n  get strokeStyle() {\n    return this._strokeStyle;\n  }\n\n  /**\n   * ensure Color type\n   */\n  set strokeStyle(val) {\n    if (typeof val === 'string') {\n      this._strokeStyle = new Color(val);\n    } else {\n      this._strokeStyle = val;\n    }\n  }\n\n  get fillStyle() {\n    return this._fillStyle;\n  }\n\n  /**\n   * ensure Color type\n   */\n  set fillStyle(val) {\n    if (typeof val === 'string') {\n      this._fillStyle = new Color(val);\n    } else {\n      this._fillStyle = val;\n    }\n  }\n\n  /**\n   * Apply styles on canvas context.\n   * @param ctx, canvas context.\n   */\n  apply(ctx: CanvasRenderingContext2D) {\n    ctx.lineWidth = this.lineWidth;\n    ctx.lineJoin = this.lineJoin;\n    ctx.lineCap = this.lineCap;\n\n    if (this.hasStroke) {\n      ctx.strokeStyle = this.strokeStyle.toString();\n    }\n    if (this.hasFill) {\n      ctx.fillStyle = this.fillStyle.toString();\n    }\n    if (this.dashArray && this.dashArray.length) {\n      ctx.setLineDash(this.dashArray);\n      ctx.lineDashOffset = this.lineDashOffset;\n    }\n\n    if(this.hasShadow) {\n      ctx.shadowColor = this.shadowColor.toString();\n      ctx.shadowBlur = this.shadowBlur;\n    }\n\n    //TODO: implement rest props.\n  }\n\n  /**\n   * Return a new duplicate of this instance.\n   */\n  clone() {\n    const ret = new Style();\n    const { strokeStyle, fillStyle, ...rest } = Object.create(this);\n    Object.assign(ret, rest);\n\n    ret.fillStyle = fillStyle.clone();\n    ret.strokeStyle = strokeStyle.clone();\n    return ret;\n  }\n\n  /**\n   * If equals other style.\n   * @param style\n   */\n  equals(other: Style) {\n    function compare(style1: Style, style2: Style) {\n      let values1 = Object.keys(style1),\n        values2 = Object.keys(style2);\n\n      for (let key in values1) {\n        let value1 = values1[key],\n          value2 = values2[key];\n        if (value1 !== value2) return false;\n      }\n      return true;\n    }\n\n    return other === this || compare(this, other) || false;\n  }\n\n  /**\n   * Read-only prop\n   */\n  get font() {\n    return `${this.fontSize}px ${this.fontFamily}`;\n  }\n\n  /**\n   * Get line-height of fonts\n   */\n  get leading() {\n    //hard-code as 1.4 times of fontSize.\n    return this.fontSize * 1.4;\n  }\n\n  /**\n   * If has stroke.\n   */\n  get hasStroke() {\n    let color = this.strokeStyle;\n    return !!color && color.alpha > 0 && this.lineWidth > 0;\n  }\n\n  /**\n   * If has fill.\n   */\n  get hasFill() {\n    let color = this.fillStyle;\n    return !!color && color.alpha > 0;\n  }\n\n  /**\n   * If has shadow.\n   */\n  get hasShadow() {\n    let color = this.shadowColor;\n    // In order to draw a shadow, we need either a shadow blur or an\n    // offset, or both.\n    return (\n      !!color && color.alpha > 0 && (this.shadowBlur > 0 || !(this.shadowOffsetX === 0 && this.shadowOffsetY === 0))\n    );\n  }\n\n  /**\n   * Convert to Shortly JSON format. used for MilkyWay concerns.\n   */\n  toShortJSON() {\n    return {\n      sc: this.strokeStyle.toHexString(),\n      fc: this.fillStyle.toHexString(),\n      w: this.lineWidth,\n      f: this.fontSize,\n    };\n  }\n\n  /**\n   * Convert to JSON format.\n   */\n  toJSON() {\n    // return { ...this };\n    return Object.assign({}, this);\n  }\n\n  /**\n   * Convert to string.\n   * e.g. 'stokeStyle=rgba(0,0,0,1) lineWidth=10'\n   */\n  toString() {\n    // return Object.keys({ ...this })\n    return Object.keys(this)\n      .filter(key => this[key] && this[key].length !== 0)\n      .map(key => `${key} = ${this[key].toString()}`)\n      .join(';');\n  }\n}\n","import Point from './Point';\nimport { Rect } from '../..';\n\n//https://github.com/chrisaljoudi/transformatrix.js\n\n/**\n *\n * * Such a coordinate transformation can be represented by a 3 row by 3\n * column matrix with an implied last row of `[ 0 0 1 ]`. This matrix\n * transforms source coordinates `(x, y)` into destination coordinates `(x',y')`\n * by considering them to be a column vector and multiplying the coordinate\n * vector by the matrix according to the following process:\n *\n *     [ x ]   [ a  c  tx ] [ x ]   [ a * x + c * y + tx ]\n *     [ y ] = [ b  d  ty ] [ y ] = [ b * x + d * y + ty ]\n *     [ 1 ]   [ 0  0  1  ] [ 1 ]   [         1          ]\n * 变换矩阵，用于transform\n */\nclass Matrix {\n\n  m: number[];\n  /**\n   * Build Matrix via matrix array.\n   * @param {Array} m matrix array, default value: [1, 0, 0, 1, 0, 0].\n   */\n  constructor(m?: number[]) {\n    m = m || [1, 0, 0, 1, 0, 0];\n    this.m = [m[0], m[1], m[2], m[3], m[4], m[5]];\n  }\n\n  /**\n   *reset to initial value\n   */\n  reset() {\n    this.m = [1, 0, 0, 1, 0, 0];\n    return this;\n  }\n\n  /**\n   * Return a duplicate matrix.\n   */\n  clone() {\n    return new Matrix(this.m.map(i => i));\n  }\n\n  /**\n   *\n   * 一个矩阵作用该矩阵，支持链式书写\n   * 等价于 `(this matrix) * (specified matrix)`.\n   * @param m\n   */\n  append(m: number[] | Matrix ) {\n    const m1 = this.m;\n    let m2;\n\n    if (m instanceof Matrix) {\n      m2 = m.m;\n    } else {\n      m2 = m;\n    }\n\n    const m11 = m1[0] * m2[0] + m1[2] * m2[1],\n      m12 = m1[1] * m2[0] + m1[3] * m2[1],\n      m21 = m1[0] * m2[2] + m1[2] * m2[3],\n      m22 = m1[1] * m2[2] + m1[3] * m2[3];\n\n    const dx = m1[0] * m2[4] + m1[2] * m2[5] + m1[4],\n      dy = m1[1] * m2[4] + m1[3] * m2[5] + m1[5];\n\n    m1[0] = m11;\n    m1[1] = m12;\n    m1[2] = m21;\n    m1[3] = m22;\n    m1[4] = dx;\n    m1[5] = dy;\n\n    return this;\n  }\n  /**\n   * 一个矩阵作用于该矩阵，支持链式书写\n   * 等价于： `(specified matrix) * (this matrix)`.\n   * @param m specified matrix\n   */\n  prepend(m: number[] | Matrix) {\n    const m1 = this.m;\n    let m2;\n\n    if (m instanceof Matrix) {\n      m2 = m.m;\n    } else {\n      m2 = m;\n    }\n\n    const m11 = m1[0] * m2[0] + m2[2] * m1[1],\n      m12 = m1[0] * m2[1] + m2[3] * m1[1],\n      m21 = m1[2] * m2[0] + m1[3] * m2[2],\n      m22 = m1[2] * m2[1] + m1[3] * m2[3];\n\n    const dx = m2[0] * m1[4] + m2[2] * m1[5] + m2[4],\n      dy = m2[1] * m1[4] + m2[3] * m1[5] + m2[5];\n\n    m1[0] = m11;\n    m1[1] = m12;\n    m1[2] = m21;\n    m1[3] = m22;\n    m1[4] = dx;\n    m1[5] = dy;\n\n    return this;\n  }\n\n  /**\n   * 返回反操作矩阵\n   */\n  inverse() {\n    const inv = new Matrix(this.m),\n      invm = inv.m;\n\n    const d = 1 / (invm[0] * invm[3] - invm[1] * invm[2]),\n      m0 = invm[3] * d,\n      m1 = -invm[1] * d,\n      m2 = -invm[2] * d,\n      m3 = invm[0] * d,\n      m4 = d * (invm[2] * invm[5] - invm[3] * invm[4]),\n      m5 = d * (invm[1] * invm[4] - invm[0] * invm[5]);\n\n    invm[0] = m0;\n    invm[1] = m1;\n    invm[2] = m2;\n    invm[3] = m3;\n    invm[4] = m4;\n    invm[5] = m5;\n    return inv;\n  }\n\n  /**\n   * 语法糖移动\n    (1, 0, sx)\n    (0, 1, sy)\n   * */\n  translate(point: Point) {\n    return this.append([1, 0, 0, 1, point.x, point.y]);\n  }\n\n  /**\n   *  语法糖旋转\n   *  可以根据基准点旋转，默认是 基于0，0\n      (cos, -sin, 0)\n      (sin, cos, 0)\n   */\n  rotate(deg: number, point?: Point) {\n    let rad = (deg * Math.PI) / 180,\n      c = Math.cos(rad),\n      s = Math.sin(rad),\n      x = 0,\n      y = 0,\n      tx = 0,\n      ty = 0;\n\n    if (point) {\n      x = point.x;\n      y = point.y;\n      tx = x - x * c + y * s;\n      ty = y - x * s - y * c;\n    }\n\n    return this.append([c, s, -s, c, tx, ty]);\n  }\n\n  /**\n   *\n   *  语法糖倾斜，\n   *  可以根据基准点倾斜，默认是 基于 [0，0]\n   *  (1, tx, 0)\n   *  (ty, 1, 0)\n   */\n  skew(degX = 0, degY = 0, point?: Point) {\n    if (point) this.translate(point);\n    degY |= 0;\n    const radX = (degX * Math.PI) / 180,\n      radY = (degY * Math.PI) / 180;\n    const tx = Math.tan(radX),\n      ty = Math.tan(radY);\n\n    this.append([1, ty, tx, 1, 0, 0]);\n    if (point) this.translate(point.negate());\n\n    return this;\n  }\n\n  /**\n   * 缩放\n   * 可以根据基准点缩放，默认是 基于 [0，0]\n   * (sx, 0, 0)\n   * (0, sy, 0)\n   */\n  scale(sx = 0, sy = 0, point?: Point) {\n    if (point) this.translate(point);\n    this.append([sx, 0, 0, sy, 0, 0]);\n    if (point) this.translate(point.negate());\n    return this;\n  }\n\n  /**\n   * transform Coordinate.\n   * @param x\n   * @param y\n   */\n  transformCoordinate(x: number, y: number) {\n    return [x * this.m[0] + y * this.m[2] + this.m[4], x * this.m[1] + y * this.m[3] + this.m[5]];\n  }\n\n  /**\n   * 变形边界矩阵\n   * @param {*} bounds\n   */\n  applyToRect(bounds: Rect) {\n    const { x, y, width, height } = bounds;\n    const pointTL = new Point(x, y);\n    const pointTR = new Point(x, y + height);\n    const pointBL = new Point(x + width, y);\n    const pointBR = new Point(x + width, y + height);\n\n    this.applyToPoint(pointTL)\n      .applyToPoint(pointTR)\n      .applyToPoint(pointBL)\n      .applyToPoint(pointBR);\n\n    bounds.assign(pointTL.x, pointTL.y, pointBR.x - pointTL.x, pointBR.y - pointTL.y);\n\n    //FIXME: 优化算法\n    return this;\n  }\n\n  /**\n   * 变形一个点\n   * @param {*} point\n   */\n  applyToPoint(point: Point) {\n    let { x, y } = point;\n\n    point.x = x * this.m[0] + y * this.m[2] + this.m[4];\n    point.y = x * this.m[1] + y * this.m[3] + this.m[5];\n\n    return this;\n  }\n\n  /**\n   * 变形向量\n   * 去除位移相关变换\n   * @param {*} point\n   */\n  applyToVector(point: Point) {\n    let { x, y } = point;\n\n    point.x = x * this.m[0] + y * this.m[2];\n    point.y = x * this.m[1] + y * this.m[3];\n\n    return this;\n  }\n\n  /**\n   * Applies this matrix to the specified Canvas Context.\n   *\n   */\n  applyToContext(ctx: CanvasRenderingContext2D) {\n    ctx.transform.apply(ctx, this.m);\n  }\n\n  /**\n   * Convert to JSON\n   */\n  toJSON() {\n    return [...this.m];\n  }\n\n  /**\n   * Convert to CSS style string.\n   * e.g 'matrix(1,0,0,1,0,0)'\n   */\n  toString() {\n    return `matrix(${this.toJSON().join(',')});`;\n  }\n}\n\nexport default Matrix;\n","import Rect from '../types/Rect';\n\n/**\n * 向量距离平方\n * @param {Vector2} v1\n * @param {Vector2} v2\n * @return {Number}\n */\nfunction distanceSquare(v1, v2) {\n  return (v1[0] - v2[0]) * (v1[0] - v2[0]) + (v1[1] - v2[1]) * (v1[1] - v2[1]);\n}\n\nfunction cubicAt(p0, p1, p2, p3, t) {\n  const onet = 1 - t;\n  return onet * onet * (onet * p3 + 3 * t * p2) + t * t * (t * p0 + 3 * onet * p1);\n}\n\n/**\n * 投射点到三次贝塞尔曲线上，返回投射距离。\n * 投射点有可能会有一个或者多个，这里只返回其中距离最短的一个。\n * @param {Number} x0\n * @param {Number} y0\n * @param {Number} x1\n * @param {Number} y1\n * @param {Number} x2\n * @param {Number} y2\n * @param {Number} x3\n * @param {Number} y3\n * @param {Number} x\n * @param {Number} y\n * @param {Array.<Number>} [out] 投射点\n * @return {Number}\n */\nfunction cubicProjectPoint(x1, y1, x2, y2, x3, y3, x4, y4, x, y, out) {\n  let t;\n  let interval = 0.005;\n  let d = Infinity;\n  let _t;\n  let v1;\n  let d1;\n  let d2;\n  let v2;\n  let prev;\n  let next;\n  const EPSILON = 0.0001;\n  const v0 = [x, y];\n\n  for (_t = 0; _t < 1; _t += 0.05) {\n    v1 = [cubicAt(x1, x2, x3, x4, _t), cubicAt(y1, y2, y3, y4, _t)];\n\n    d1 = distanceSquare(v0, v1);\n    if (d1 < d) {\n      t = _t;\n      d = d1;\n    }\n  }\n  d = Infinity;\n\n  for (let i = 0; i < 32; i++) {\n    if (interval < EPSILON) {\n      break;\n    }\n\n    prev = t - interval;\n    next = t + interval;\n\n    v1 = [cubicAt(x1, x2, x3, x4, prev), cubicAt(y1, y2, y3, y4, prev)];\n\n    d1 = distanceSquare(v0, v1);\n\n    if (prev >= 0 && d1 < d) {\n      t = prev;\n      d = d1;\n    } else {\n      v2 = [cubicAt(x1, x2, x3, x4, next), cubicAt(y1, y2, y3, y4, next)];\n\n      d2 = distanceSquare(v0, v2);\n\n      if (next <= 1 && d2 < d) {\n        t = next;\n        d = d2;\n      } else {\n        interval *= 0.5;\n      }\n    }\n  }\n\n  if (out) {\n    out.x = cubicAt(x1, x2, x3, x4, t);\n    out.y = cubicAt(y1, y2, y3, y4, t);\n  }\n\n  return Math.sqrt(d);\n}\n\n/**\n * 三次贝塞尔曲线描边包含判断\n * @param  {Number}  x0\n * @param  {Number}  y0\n * @param  {Number}  x1\n * @param  {Number}  y1\n * @param  {Number}  x2\n * @param  {Number}  y2\n * @param  {Number}  x3\n * @param  {Number}  y3\n * @param  {Number}  lineWidth\n * @param  {Number}  x\n * @param  {Number}  y\n * @return {Boolean}\n */\nfunction containStroke(x0, y0, x1, y1, x2, y2, x3, y3, lineWidth, x, y) {\n  if (lineWidth === 0) {\n    return false;\n  }\n  let _l = lineWidth;\n  // Quick reject\n  if (\n    (y > y0 + _l && y > y1 + _l && y > y2 + _l && y > y3 + _l) ||\n    (y < y0 - _l && y < y1 - _l && y < y2 - _l && y < y3 - _l) ||\n    (x > x0 + _l && x > x1 + _l && x > x2 + _l && x > x3 + _l) ||\n    (x < x0 - _l && x < x1 - _l && x < x2 - _l && x < x3 - _l)\n  ) {\n    return false;\n  }\n  let d = cubicProjectPoint(x0, y0, x1, y1, x2, y2, x3, y3, x, y, null);\n  return d <= _l / 2;\n}\n\nlet PI2 = Math.PI * 2;\n\nfunction normalizeRadian(angle) {\n  angle %= PI2;\n  if (angle < 0) {\n    angle += PI2;\n  }\n  return angle;\n}\n\n/**\n * 圆弧描边包含判断\n * @param  {Number}  cx\n * @param  {Number}  cy\n * @param  {Number}  r\n * @param  {Number}  startAngle\n * @param  {Number}  endAngle\n * @param  {Boolean}  anticlockwise\n * @param  {Number} lineWidth\n * @param  {Number}  x\n * @param  {Number}  y\n * @return {Boolean}\n */\nfunction containStrokeArc(cx, cy, r, startAngle, endAngle, anticlockwise, lineWidth, x, y) {\n  if (lineWidth === 0) return false;\n\n  let _l = lineWidth;\n\n  x -= cx;\n  y -= cy;\n  let d = Math.sqrt(x * x + y * y);\n\n  if (d - _l > r || d + _l < r) return false;\n\n  if (Math.abs(startAngle - endAngle) % PI2 < 1e-4) {\n    // Is a circle\n    return true;\n  }\n  if (anticlockwise) {\n    let tmp = startAngle;\n    startAngle = normalizeRadian(endAngle);\n    endAngle = normalizeRadian(tmp);\n  } else {\n    startAngle = normalizeRadian(startAngle);\n    endAngle = normalizeRadian(endAngle);\n  }\n  if (startAngle > endAngle) {\n    endAngle += PI2;\n  }\n\n  let angle = Math.atan2(y, x);\n  if (angle < 0) {\n    angle += PI2;\n  }\n  return (angle >= startAngle && angle <= endAngle) || (angle + PI2 >= startAngle && angle + PI2 <= endAngle);\n}\n\n// Converted from code found here:\n// http://blog.hackers-cafe.net/2009/06/how-to-calculate-bezier-curves-bounding.html\n//\nfunction calcBoundsOfBezier(x0, y0, x1, y1, x2, y2, x3, y3) {\n  const tvalues = [],\n    bounds = [[], []];\n  let a, b, c, t;\n\n  for (let i = 0; i < 2; ++i) {\n    if (i === 0) {\n      b = 6 * x0 - 12 * x1 + 6 * x2;\n      a = -3 * x0 + 9 * x1 - 9 * x2 + 3 * x3;\n      c = 3 * x1 - 3 * x0;\n    } else {\n      b = 6 * y0 - 12 * y1 + 6 * y2;\n      a = -3 * y0 + 9 * y1 - 9 * y2 + 3 * y3;\n      c = 3 * y1 - 3 * y0;\n    }\n    if (Math.abs(a) < 1e-12) {\n      if (Math.abs(b) < 1e-12) {\n        continue;\n      }\n      t = -c / b;\n      if (t > 0 && t < 1) {\n        tvalues.push(t);\n      }\n      continue;\n    }\n    const b2ac = b * b - 4 * c * a;\n    const sqrtb2ac = Math.sqrt(b2ac);\n    if (b2ac < 0) continue;\n\n    const t1 = (-b + sqrtb2ac) / (2 * a);\n    if (t1 > 0 && t1 < 1) {\n      tvalues.push(t1);\n    }\n    const t2 = (-b - sqrtb2ac) / (2 * a);\n    if (t2 > 0 && t2 < 1) {\n      tvalues.push(t2);\n    }\n  }\n\n  let j = tvalues.length;\n  const jlen = j;\n  let mt;\n  while (j--) {\n    t = tvalues[j];\n    mt = 1 - t;\n    bounds[0][j] = mt * mt * mt * x0 + 3 * mt * mt * t * x1 + 3 * mt * t * t * x2 + t * t * t * x3;\n    bounds[1][j] = mt * mt * mt * y0 + 3 * mt * mt * t * y1 + 3 * mt * t * t * y2 + t * t * t * y3;\n  }\n\n  bounds[0][jlen] = x0;\n  bounds[1][jlen] = y0;\n  bounds[0][jlen + 1] = x3;\n  bounds[1][jlen + 1] = y3;\n  bounds[0].length = bounds[1].length = jlen + 2;\n\n  let x = Math.min.apply(0, bounds[0]);\n  let y = Math.min.apply(0, bounds[1]);\n  let w = Math.max.apply(0, bounds[0]) - x;\n  let h = Math.max.apply(0, bounds[1]) - y;\n\n  return new Rect(x, y, w, h);\n}\n\n/**\n * 线段包含判断\n * @param  {Number}  x0\n * @param  {Number}  y0\n * @param  {Number}  x1\n * @param  {Number}  y1\n * @param  {Number}  lineWidth\n * @param  {Number}  x\n * @param  {Number}  y\n * @return {Boolean}\n */\nfunction containStrokeLine(x0, y0, x1, y1, lineWidth, x, y) {\n  if (lineWidth === 0) {\n    return false;\n  }\n  let _l = lineWidth;\n  let _a = 0;\n  let _b = x0;\n  // Quick reject\n  if (\n    (y > y0 + _l && y > y1 + _l) ||\n    (y < y0 - _l && y < y1 - _l) ||\n    (x > x0 + _l && x > x1 + _l) ||\n    (x < x0 - _l && x < x1 - _l)\n  ) {\n    return false;\n  }\n\n  if (x0 !== x1) {\n    _a = (y0 - y1) / (x0 - x1);\n    _b = (x0 * y1 - x1 * y0) / (x0 - x1);\n  } else {\n    return Math.abs(x - x0) <= _l / 2;\n  }\n  let tmp = _a * x - y + _b;\n  let _s = (tmp * tmp) / (_a * _a + 1);\n  return _s <= ((_l / 2) * _l) / 2;\n}\n\nexport { containStroke, containStrokeArc, containStrokeLine, calcBoundsOfBezier };\n","import Rect from './Rect';\nimport Point from './Point';\nimport Matrix from './Matrix';\nimport Item from '../Item';\n\nimport { containStroke, containStrokeArc, containStrokeLine, calcBoundsOfBezier } from '../algorithm/calcCurve';\n\nconst POINT_WIDTH = 4;\nconst OFFSET = POINT_WIDTH / 2;\nexport abstract class Segment {\n  /**\n   * record start point via context\n   */\n  command!: string;\n  contextPoint!: Point;\n  point!: Point;\n  owner: Item | null = null;\n  // style: IStyle;\n  control!: Point;\n  control1!: Point;\n  control2!: Point;\n\n  nearby() {\n    return false;\n  }\n\n  get points() {\n    return [this.point];\n  }\n\n  // get strokeBounds() {\n  // return this.bounds.expand(this.style.lineWidth) / 2;\n  // return this.bounds.expand(this.style.lineWidth);\n  // }\n\n  get bounds(): Rect {\n    return new Rect(this.point.x, this.point.y, 0, 0);\n  }\n\n  get length() {\n    return 0;\n  }\n\n  transformCoordinates(matrix: Matrix) {\n    let point = this.point,\n      control1 = this.control1 || null,\n      control2 = this.control2 || null;\n\n    matrix.applyToPoint(point);\n\n    if (control1) {\n      matrix.applyToPoint(control1);\n    }\n\n    if (control2) {\n      matrix.applyToPoint(control2);\n    }\n  }\n\n  abstract containsPoint(point: Point, lineWidth: number): boolean;\n\n  drawPoint(ctx: CanvasRenderingContext2D, point?: Point) {\n    if (!point) return;\n    ctx.strokeRect(point.x - OFFSET, point.y - OFFSET, POINT_WIDTH, POINT_WIDTH);\n  }\n\n  drawControlPoint(ctx: CanvasRenderingContext2D, point: Point, controlPoint?: Point) {\n    if (!controlPoint) return;\n    ctx.fillRect(controlPoint.x - OFFSET, controlPoint.y - OFFSET, POINT_WIDTH, POINT_WIDTH);\n\n    ctx.moveTo(point.x, point.y);\n    ctx.lineTo(controlPoint.x, controlPoint.y);\n  }\n\n  /**\n   * tmp method for debugger bezier\n   * @param ctx\n   */\n  draw(ctx: CanvasRenderingContext2D) {\n    ctx.fillStyle = '#4f80ff';\n    ctx.lineWidth = 1;\n    ctx.strokeStyle = '#5887ff';\n    ctx.beginPath();\n    this.drawPoint(ctx, this.point);\n    this.drawPoint(ctx, this.contextPoint);\n\n    this.drawControlPoint(ctx, this.point, this.control);\n    this.drawControlPoint(ctx, this.contextPoint, this.control1);\n    this.drawControlPoint(ctx, this.point, this.control2);\n\n    ctx.stroke();\n  }\n\n  /**\n   * Arguments fot Canvas context api.\n   */\n  get args(): Point[] | number[] {\n    return this.points.slice(1).reduce((acc, item) => {\n      [].push.apply(acc, item.toJSON());\n      return acc;\n    }, []);\n  }\n\n  /**\n   * return point data as JSON-format:\n   */\n  toJSON() {\n    return this.points.map(p => p.toJSON());\n  }\n\n  toString() {\n    return `${this.command} ${this.args.join(' ')}`;\n  }\n}\n\n/**\n * DO NOT draw segment ,just move.\n */\nexport class MoveSegment extends Segment {\n  command = 'M';\n  constructor(point: Point) {\n    super();\n    this.point = point;\n  }\n  containsPoint(_point: Point, _lineWidth: number) {\n    return false;\n  }\n}\n\nexport class LineSegment extends Segment {\n  command = 'L';\n  constructor(point: Point) {\n    super();\n    this.point = point;\n  }\n\n  containsPoint(point: Point, lineWidth: number): boolean {\n    return containStrokeLine(\n      this.contextPoint.x,\n      this.contextPoint.y,\n      this.point.x,\n      this.point.y,\n      lineWidth,\n      point.x,\n      point.y\n    );\n  }\n\n  get bounds(): Rect {\n    let frm = this.contextPoint,\n      x = frm.x,\n      y = frm.y,\n      width,\n      height;\n\n    let to = this.point;\n    width = to.x - x;\n    height = to.y - y;\n\n    // Check if horizontal or vertical order needs to be reversed.\n    if (width < 0) {\n      x = to.x;\n      width = -width;\n    }\n    if (height < 0) {\n      y = to.y;\n      height = -height;\n    }\n    return new Rect(x, y, width, height);\n  }\n\n  get length() {\n    return this.contextPoint.subtract(this.point).length;\n  }\n\n  get points() {\n    return [this.contextPoint, this.point];\n  }\n}\n\n/**\n * 3 阶贝塞尔\n */\nexport class BezierSegment extends Segment {\n  command = 'C';\n\n  constructor(cp1: Point, cp2: Point, point: Point) {\n    super();\n    this.control1 = cp1;\n    this.control2 = cp2;\n    this.point = point;\n  }\n\n  containsPoint(point: Point, lineWidth: number) {\n    return containStroke(\n      this.contextPoint.x,\n      this.contextPoint.y,\n      this.control1.x,\n      this.control1.y,\n      this.control2.x,\n      this.control2.y,\n      this.point.x,\n      this.point.y,\n      lineWidth,\n      point.x,\n      point.y\n    );\n  }\n\n  get fullArgs() {\n    return [\n      this.contextPoint.x,\n      this.contextPoint.y,\n      this.control1.x,\n      this.control1.y,\n      this.control2.x,\n      this.control2.y,\n      this.point.x,\n      this.point.y,\n    ];\n  }\n\n  get bounds() {\n    return calcBoundsOfBezier.apply(null, this.fullArgs);\n  }\n\n  get points() {\n    return [this.contextPoint, this.control1, this.control2, this.point];\n  }\n\n  _calcPoint(t: number, start: number, c1: number, c2: number, end: number) {\n    return (\n      start * (1.0 - t) * (1.0 - t) * (1.0 - t) +\n      3.0 * c1 * (1.0 - t) * (1.0 - t) * t +\n      3.0 * c2 * (1.0 - t) * t * t +\n      end * t * t * t\n    );\n  }\n\n  /**\n   * 算出近似值\n   */\n  get length() {\n    const steps = 10;\n    let length = 0;\n    let px = 0;\n    let py = 0;\n\n    for (let i = 0; i <= steps; i += 1) {\n      const t = i / steps;\n      const cx = this._calcPoint(t, this.contextPoint.x, this.control1.x, this.control2.x, this.point.x);\n      const cy = this._calcPoint(t, this.contextPoint.y, this.control1.y, this.control2.y, this.point.y);\n      if (i > 0) {\n        const xdiff = cx - px;\n        const ydiff = cy - py;\n        length += Math.sqrt(xdiff * xdiff + ydiff * ydiff);\n      }\n      px = cx;\n      py = cy;\n    }\n\n    return length;\n  }\n}\n\n/**\n * 2 阶贝塞尔\n */\nexport class QuadraticSegment extends Segment {\n  command = 'Q';\n\n  constructor(cp: Point, point: Point) {\n    super();\n    this.control = cp;\n    this.point = point;\n  }\n\n  containsPoint(_point: Point, _lineWidth: number) { return false }\n\n  // get bounds() {\n  //   //转成三阶算\n  //   return calcBoundsOfBezier(this.fullArgs);\n  // }\n\n  get length() {\n    //转成三阶算\n    return this.contextPoint.subtract(this.point).length;\n  }\n\n  get points() {\n    return [this.contextPoint, this.control, this.point];\n  }\n}\n\nexport class ArcSegment extends Segment {\n  command = 'A';\n  arc!: number[];\n  radius = 0;\n\n  constructor(cp1?: Point, cp2?: Point, radius?: number) { // TODO: problem\n    super();\n    cp1 && (this.control1 = cp1);\n    cp2 && (this.control2 = cp2);\n    cp1 && (this.point = cp1);\n    radius && (this.radius = radius);\n  }\n\n  containsPoint(point: Point, lineWidth: number): boolean {\n    return containStrokeArc(\n      this.contextPoint.x,\n      this.contextPoint.y,\n      this.control1.x,\n      this.control1.y,\n      this.control2.x,\n      !!this.control2.y,\n      // this.point.x,\n      // this.point.y,\n      lineWidth,\n      point.x,\n      point.y\n    );\n  }\n\n  get args() {\n    return [this.control1.x, this.control1.y, this.control2.x, this.control2.y, this.radius];\n  }\n\n  get points() {\n    return [this.contextPoint, this.control1, this.point];\n  }\n\n  get length() {\n    return 0;\n  }\n}\n","import Point from '../types/Point';\nimport { BezierSegment } from '../types/Segment';\n\n/**\n *  Adapt from https://github.com/paperjs/paper.js\n *\n *  https://github.com/soswow/fit-curves\n *\n *   Refactor paper.js PathFitter.js to pure-function\n *\n * 输入: 多个点的数组\n * 输出: 优化好的曲线列表\n *\n */\n\nconst EPSILON = 1e-12;\n\n/**\n * 优化曲线的点\n * @param {Array} points\n * @param {Number} maxError\n */\nfunction fitCurve(points, maxError) {\n  if (points.length <= 1) return [];\n\n  let _points = [],\n    curves,\n    length;\n\n  for (let i = 0, prev, l = points.length; i < l; i++) {\n    let point = points[i];\n    if (!prev || !prev.equals(point)) {\n      _points.push((prev = point.clone()));\n    }\n  }\n\n  length = _points.length;\n\n  if (length > 1) {\n    curves = fitCubic(\n      _points,\n      maxError,\n      0,\n      length - 1,\n      // Left Tangent\n      points[1].subtract(points[0]),\n      // Right Tangent\n      points[length - 2].subtract(points[length - 1])\n    );\n  }\n\n  return curves;\n}\n\nfunction fitCubic(points, error, first, last, tan1, tan2) {\n  if (last - first === 1) {\n    let pt1 = points[first],\n      pt2 = points[last],\n      dist = pt1.getDistance(pt2) / 3;\n\n    let seg = new BezierSegment(pt1.add(tan1.normalize(dist)), pt2.add(tan2.normalize(dist)), pt2);\n    seg.contextPoint = pt1;\n\n    return [seg];\n  }\n\n  let uPrime = chordLengthParameterize(points, first, last),\n    maxError = Math.max(error, error * error),\n    split,\n    parametersInOrder = true;\n\n  for (let i = 0; i <= 4; i++) {\n    let curve = generateBezier(points, first, last, uPrime, tan1, tan2);\n    //  Find max deviation of points to fitted curve\n    let max = findMaxError(points, first, last, curve, uPrime);\n    if (max.error < error && parametersInOrder) {\n      let seg = new BezierSegment(curve[1], curve[2], curve[3]);\n      seg.contextPoint = curve[0];\n      return [seg];\n    }\n\n    split = max.index;\n    // If error not too large, try reparameterization and iteration\n    if (max.error >= maxError) break;\n    parametersInOrder = reparameterize(points, first, last, uPrime, curve);\n    maxError = max.error;\n  }\n\n  let tanCenter = points[split - 1].subtract(points[split + 1]),\n    curves = [];\n  curves = curves.concat(fitCubic(points, error, first, split, tan1, tanCenter));\n  curves = curves.concat(fitCubic(points, error, split, last, tanCenter.negate(), tan2));\n\n  return curves;\n}\n\n// Use least-squares method to find Bezier control points for region.\nfunction generateBezier(points, first, last, uPrime, tan1, tan2) {\n  let epsilon = EPSILON,\n    abs = Math.abs,\n    pt1 = points[first],\n    pt2 = points[last],\n    // Create the C and X matrices\n    C = [[0, 0], [0, 0]],\n    X = [0, 0];\n\n  for (let i = 0, l = last - first + 1; i < l; i++) {\n    let u = uPrime[i],\n      t = 1 - u,\n      b = 3 * u * t,\n      b0 = t * t * t,\n      b1 = b * t,\n      b2 = b * u,\n      b3 = u * u * u,\n      a1 = tan1.normalize(b1),\n      a2 = tan2.normalize(b2),\n      tmp = points[first + i].subtract(pt1.multiply(b0 + b1)).subtract(pt2.multiply(b2 + b3));\n    C[0][0] += a1.dot(a1);\n    C[0][1] += a1.dot(a2);\n    // C[1][0] += a1.dot(a2);\n    C[1][0] = C[0][1];\n    C[1][1] += a2.dot(a2);\n    X[0] += a1.dot(tmp);\n    X[1] += a2.dot(tmp);\n  }\n\n  // Compute the determinants of C and X\n  let detC0C1 = C[0][0] * C[1][1] - C[1][0] * C[0][1],\n    alpha1,\n    alpha2;\n  if (abs(detC0C1) > epsilon) {\n    // Kramer's rule\n    let detC0X = C[0][0] * X[1] - C[1][0] * X[0],\n      detXC1 = X[0] * C[1][1] - X[1] * C[0][1];\n    // Derive alpha values\n    alpha1 = detXC1 / detC0C1;\n    alpha2 = detC0X / detC0C1;\n  } else {\n    // Matrix is under-determined, try assuming alpha1 == alpha2\n    let c0 = C[0][0] + C[0][1],\n      c1 = C[1][0] + C[1][1];\n    alpha1 = alpha2 = abs(c0) > epsilon ? X[0] / c0 : abs(c1) > epsilon ? X[1] / c1 : 0;\n  }\n\n  // If alpha negative, use the Wu/Barsky heuristic (see text)\n  // (if alpha is 0, you get coincident control points that lead to\n  // divide by zero in any subsequent NewtonRaphsonRootFind() call.\n  let segLength = pt2.getDistance(pt1),\n    eps = epsilon * segLength,\n    handle1,\n    handle2;\n  if (alpha1 < eps || alpha2 < eps) {\n    // fall back on standard (probably inaccurate) formula,\n    // and subdivide further if needed.\n    alpha1 = alpha2 = segLength / 3;\n  } else {\n    // Check if the found control points are in the right order when\n    // projected onto the line through pt1 and pt2.\n    let line = pt2.subtract(pt1);\n    // Control points 1 and 2 are positioned an alpha distance out\n    // on the tangent vectors, left and right, respectively\n    handle1 = tan1.normalize(alpha1);\n    handle2 = tan2.normalize(alpha2);\n    if (handle1.dot(line) - handle2.dot(line) > segLength * segLength) {\n      // Fall back to the Wu/Barsky heuristic above.\n      alpha1 = alpha2 = segLength / 3;\n      handle1 = handle2 = null; // Force recalculation\n    }\n  }\n\n  // First and last control points of the Bezier curve are\n  // positioned exactly at the first and last data points\n  return [pt1, pt1.add(handle1 || tan1.normalize(alpha1)), pt2.add(handle2 || tan2.normalize(alpha2)), pt2];\n}\n\n// Given set of points and their parameterization, try to find\n// a better parameterization.\nfunction reparameterize(points, first, last, u, curve) {\n  for (let i = first; i <= last; i++) {\n    u[i - first] = findRoot(curve, points[i], u[i - first]);\n  }\n  // Detect if the new parameterization has reordered the points.\n  // In that case, we would fit the points of the path in the wrong order.\n  for (let i = 1, l = u.length; i < l; i++) {\n    if (u[i] <= u[i - 1]) return false;\n  }\n  return true;\n}\n\nfunction isZero(val) {\n  return val >= -EPSILON && val <= EPSILON;\n}\n\n// Use Newton-Raphson iteration to find better root.\nfunction findRoot(curve, point, u) {\n  let curve1 = [],\n    curve2 = [];\n  // Generate control vertices for Q'\n  for (let i = 0; i <= 2; i++) {\n    curve1[i] = curve[i + 1].subtract(curve[i]).multiply(3);\n  }\n  // Generate control vertices for Q''\n  for (let i = 0; i <= 1; i++) {\n    curve2[i] = curve1[i + 1].subtract(curve1[i]).multiply(2);\n  }\n  // Compute Q(u), Q'(u) and Q''(u)\n  let pt = evaluate(3, curve, u),\n    pt1 = evaluate(2, curve1, u),\n    pt2 = evaluate(1, curve2, u),\n    diff = pt.subtract(point),\n    df = pt1.dot(pt1) + diff.dot(pt2);\n  // u = u - f(u) / f'(u)\n  return isZero(df) ? u : u - diff.dot(pt1) / df;\n}\n\n// Evaluate a bezier curve at a particular parameter value\nfunction evaluate(degree, curve, t) {\n  // Copy array\n  let tmp = curve.slice();\n  // Triangle computation\n  for (let i = 1; i <= degree; i++) {\n    for (let j = 0; j <= degree - i; j++) {\n      tmp[j] = tmp[j].multiply(1 - t).add(tmp[j + 1].multiply(t));\n    }\n  }\n  return tmp[0];\n}\n\n/**\n * Assign parameter values to digitized points using relative distances between points.\n *\n * @param {Array<Point>} points - Array of digitized points\n * @returns {Array<Number>} Parameter values\n */\nfunction chordLengthParameterize(points, first, last) {\n  let u = [0];\n  for (let i = first + 1; i <= last; i++) {\n    u[i - first] = u[i - first - 1] + points[i].getDistance(points[i - 1]);\n  }\n  for (let i = 1, m = last - first; i <= m; i++) {\n    u[i] /= u[m];\n  }\n  return u;\n}\n\n// Find the maximum squared distance of digitized points to fitted curve.\nfunction findMaxError(points, first, last, curve, u) {\n  let index = Math.floor((last - first + 1) / 2),\n    maxDist = 0;\n  for (let i = first + 1; i < last; i++) {\n    let P = evaluate(3, curve, u[i - first]);\n    let v = P.subtract(points[i]);\n    let dist = v.x * v.x + v.y * v.y; // squared\n    if (dist >= maxDist) {\n      maxDist = dist;\n      index = i;\n    }\n  }\n  return {\n    error: maxDist,\n    index: index,\n  };\n}\n\nexport default fitCurve;\n","import { BezierSegment } from '../types/Segment';\nimport Point from '../types/Point';\n\n/**\n * Adapt from https://github.com/paperjs/paper.js\n *\n * 输入: 多个点的数组\n * 输出: 曲线列表\n *\n * @param {Array} points\n * @param {Boolean} closed\n */\nexport default function smoothCurve(points, closed) {\n  let opts = options || {},\n    asymmetric = opts.asymmetric, // asymmetric or continuous;\n    length = points.length,\n    segments = [];\n\n  // Helper method to pick the right from / to indices.\n  // Supports numbers and segment objects.\n  // For numbers, the `to` index is exclusive, while for segments and\n  // curves, it is inclusive, handled by the `offset` parameter.\n  function getIndex(value, _default) {\n    // Support both Segment and Curve through #index getter.\n    let index = value && value.index;\n    if (index != null) {\n      // Make sure the segment / curve is not from a wrong path.\n      let path = value.path;\n      if (path && path !== self)\n        throw new Error(value._class + ' ' + index + ' of ' + path + ' is not part of ' + self);\n      // Add offset of 1 to curves to reach their end segment.\n      if (_default && value instanceof Segment) index++;\n    } else {\n      index = typeof value === 'number' ? value : _default;\n    }\n    // Handle negative values based on whether a path is open or not:\n    // Ranges on closed paths are allowed to wrapped around the\n    // beginning/end (e.g. start near the end, end near the beginning),\n    // while ranges on open paths stay within the path's open range.\n    return Math.min(index < 0 && closed ? index % length : index < 0 ? index + length : index, length - 1);\n  }\n\n  let loop = closed && opts.from === undefined && opts.to === undefined,\n    from = getIndex(opts.from, 0),\n    to = getIndex(opts.to, length - 1);\n\n  if (from > to) {\n    if (closed) {\n      from -= length;\n    } else {\n      let tmp = from;\n      from = to;\n      to = tmp;\n    }\n  }\n  // https://www.particleincell.com/2012/bezier-splines/\n  let min = Math.min,\n    amount = to - from + 1,\n    n = amount - 1,\n    // Overlap by up to 4 points on closed paths since a current\n    // segment is affected by its 4 neighbors on both sides (?).\n    padding = loop ? min(amount, 4) : 1,\n    paddingLeft = padding,\n    paddingRight = padding,\n    knots = [];\n  if (!closed) {\n    // If the path is open and a range is defined, try using a\n    // padding of 1 on either side.\n    paddingLeft = min(1, from);\n    paddingRight = min(1, length - to - 1);\n  }\n  // Set up the knots array now, taking the paddings into account.\n  n += paddingLeft + paddingRight;\n  if (n <= 1) return segments; // change by fan  for Path.ts smooth method\n  for (let i = 0, j = from - paddingLeft; i <= n; i++, j++) {\n    knots[i] = segments[(j < 0 ? j + length : j) % length]._point;\n  }\n\n  // In the algorithm we treat these 3 cases:\n  // - left most segment (L)\n  // - internal segments (I)\n  // - right most segment (R)\n  //\n  // In both the continuous and asymmetric method, c takes these\n  // values and can hence be removed from the loop starting in n - 2:\n  // c = 1 (L), 1 (I), 0 (R)\n  //\n  // continuous:\n  // a = 0 (L), 1 (I), 2 (R)\n  // b = 2 (L), 4 (I), 7 (R)\n  // u = 1 (L), 4 (I), 8 (R)\n  // v = 2 (L), 2 (I), 1 (R)\n  //\n  // asymmetric:\n  // a = 0 (L), 1 (I), 1 (R)\n  // b = 2 (L), 4 (I), 2 (R)\n  // u = 1 (L), 4 (I), 3 (R)\n  // v = 2 (L), 2 (I), 0 (R)\n\n  // (L): u = 1, v = 2\n  let x = knots[0]._x + 2 * knots[1]._x,\n    y = knots[0]._y + 2 * knots[1]._y,\n    f = 2,\n    n_1 = n - 1,\n    rx = [x],\n    ry = [y],\n    rf = [f],\n    px = [],\n    py = [];\n  // Solve with the Thomas algorithm\n  for (let i = 1; i < n; i++) {\n    let internal = i < n_1,\n      //  internal--(I)  asymmetric--(R) (R)--continuous\n      a = internal ? 1 : asymmetric ? 1 : 2,\n      b = internal ? 4 : asymmetric ? 2 : 7,\n      u = internal ? 4 : asymmetric ? 3 : 8,\n      v = internal ? 2 : asymmetric ? 0 : 1,\n      m = a / f;\n    f = rf[i] = b - m;\n    x = rx[i] = u * knots[i]._x + v * knots[i + 1]._x - m * x;\n    y = ry[i] = u * knots[i]._y + v * knots[i + 1]._y - m * y;\n  }\n\n  px[n_1] = rx[n_1] / rf[n_1];\n  py[n_1] = ry[n_1] / rf[n_1];\n  for (let i = n - 2; i >= 0; i--) {\n    px[i] = (rx[i] - px[i + 1]) / rf[i];\n    py[i] = (ry[i] - py[i + 1]) / rf[i];\n  }\n  px[n] = (3 * knots[n]._x - px[n_1]) / 2;\n  py[n] = (3 * knots[n]._y - py[n_1]) / 2;\n\n  // Now update the segments\n  for (let i = paddingLeft, max = n - paddingRight, j = from; i <= max; i++, j++) {\n    let segment = new BezierSegment(),\n      point = point[j < 0 ? j + length : j],\n      hx = px[i] - pt._x,\n      hy = py[i] - pt._y;\n\n    segment.point = point;\n    if (loop || i < max) segment.control2 = new Point(hx, hy);\n    if (loop || i > paddingLeft) segment.control1 = new Point(-hx, -hy);\n  }\n  return segments;\n}\n","const cachedPropsKey = '__cachedProps';\n\n/**\n * mark getter as memoized prop, the value is cached till the instance mark as dirty,\n * @param {String} cacheKey, Specify the cacheKey of prop (default value: PropName)\n */\nexport function memoized(cacheKey?: string): MethodDecorator {\n  return function(_, name, descriptor) {\n    if (typeof descriptor.get !== 'function') throw new Error(`Can't decorate ${String(name)}, Only used for getter~`);\n\n    let propKey = cacheKey || `${String(name)}`;\n    const { get } = descriptor;\n\n    descriptor.get = function() {\n      let cacheProps = this[cachedPropsKey];\n      if (typeof cacheProps[propKey] !== 'undefined') return cacheProps[propKey];\n      cacheProps[propKey] = get.apply(this);\n      return cacheProps[propKey];\n    };\n\n    return descriptor;\n  };\n}\n\n/**\n * mark setter. if the value changed, it will trigger canvas refresh OR mark layer as dirty.\n */\nexport function changed(): MethodDecorator {\n  return function(_, name, descriptor) {\n    if (typeof descriptor.set !== 'function') throw new Error(`Can't decorate ${String(name)}, Only used for setter~`);\n\n    const { set } = descriptor;\n    descriptor.set = function() {\n      //@ts-ignore\n      this.changed();\n      return set.apply(this, arguments);\n    };\n\n    return descriptor;\n  };\n}\n\n/**\n * Mark class as memoizable, It will inject prop:'cachedProps' and method:'changed' in prototype:\n *\n * cachedProps: will cache the complex compute prop. And it will be cleared the changed invoked.\n * changed: Notify the layer to refresh.\n *\n */\nexport function memoizable(): ClassDecorator {\n  return function(target) {\n    if (typeof target.prototype.changed === 'function') throw new Error(`can't decorate memoizable twice!`);\n\n    // _cachedProps list.\n    target.prototype[cachedPropsKey] = {};\n\n    /**\n     * mark the item instance as 'dirty', it will trigger canvas refresh and re-calc the memozied props.\n     */\n    target.prototype.changed = function() {\n      if (this.layer && this.layer.markAsDirty) {\n        this.layer.markAsDirty();\n      }\n      this[cachedPropsKey] = {};\n    };\n\n    return target;\n  };\n}\n\nconst validateFunc = function validateFunc(type: any, key: string) {\n  switch (type) {\n    case Boolean:\n      return function(val: any) {\n        if (typeof val !== 'boolean') throw new TypeError(`setter '${key}' accept boolean value!`);\n      };\n    case String:\n      return function (val: any) {\n        if (typeof val !== 'string') throw new TypeError(`setter '${key}' accept string value!`);\n      };\n    case Number:\n      return function (val: any) {\n        if (typeof val !== 'number') throw new TypeError(`setter '${key}' accept number value!`);\n      };\n    default:\n      return function (val: any) {\n        if (!(val instanceof type)) throw new TypeError(`setter '${key}' accept ${type.name} value!`);\n      };\n  }\n};\n\n/**\n * Inject observe props for class.\n *\n * @param {Object} desc\n *\n * Code Example:\n *  {\n *    selected: { // Name of prop, (In example 'selected')\n *      type: Boolean, // Type of prop\n *      default: true, // Default value of prop\n *      fn: function(newVal) { //callback when prop changed.\n *        console.log(this)\n *      }\n *    }\n *  }\n */\nexport function observeProps(desc: object): ClassDecorator {\n  if (!Object.keys(desc).length) throw new TypeError('must pass props!');\n\n  return function(target) {\n    for (let key in desc) {\n      if (typeof target.prototype[key] !== 'undefined') {\n        throw new Error(`Prop ${key} already exist!`);\n      }\n\n      let propDesc = desc[key];\n      let privateKey = `__${key}`;\n\n      target.prototype[privateKey] = propDesc.default;\n\n      let checkParam = validateFunc(propDesc.type, key);\n      let fn = propDesc.fn;\n\n      Object.defineProperty(target.prototype, key, {\n        get() {\n          return this[privateKey];\n        },\n        set(val) {\n          checkParam(val);\n          // if not changed, do nothing.\n          if (val === this[privateKey]) return;\n\n          this[privateKey] = val;\n          fn && fn.call(this, val);\n          this.changed();\n        },\n        enumerable: true,\n        configurable: true,\n      });\n    }\n  };\n}\n","const letters = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ'.split('');\nconst lettersLen = letters.length;\nconst dateTS = 1000 * 3600 * 3; // 3 hours\n\n/**\n * Generate ID as format [0-9a-zA-Z]+\n * @param num\n */\nfunction genMixId(num: number): any {\n  if (num < lettersLen) return letters[num];\n  let rem = num % lettersLen;\n  return genMixId(parseInt((num / lettersLen).toString())) + letters[rem];\n}\n\n/**\n * Generate unique id via timestamp per 3 hours, and format as [0-9a-zA-Z]+\n */\nexport const tsid = () => genMixId((+new Date() % dateTS) * 1000 + parseInt(((Math.random() * 100) % 100).toString(), 10));\n\n/**\n * Generate unique id of client side\n */\nexport const uid = (() => {\n  let uid = 0;\n  return () => {\n    uid++;\n    return uid;\n  };\n})();\n","/**\n *\n * Make Class support event-emitter:  'on', 'off', 'once' ,'emit'.\n *\n * Code example:\n *\n * declare:\n * @emittable()\n * Class DecoratedClass { change(){ this.emit('changed') } }\n *\n * use:\n * let ins = new DecoratedClass();\n * ins.on('changed', (event)=>{ //dosomething });\n *\n */\n\nexport default function emittable(): ClassDecorator {\n  return function(target) {\n    target.prototype.__callbacks = {};\n\n    /**\n     * attach handler for specified event.\n     *\n     * @param {String} name Name of Event.\n     * @param {Function} fn Handler of Event.\n     */\n    target.prototype.on = function(name: string, fn: () => void) {\n      if (typeof name !== 'string' || typeof fn !== 'function') throw new Error('Arguments illegal!');\n\n      this.__callbacks[name] = this.__callbacks[name] || [];\n      let handlers = this.__callbacks[name];\n\n      if (handlers.indexOf(fn) === -1) {\n        handlers.push(fn);\n      }\n\n      return this;\n    };\n\n    /**\n     * detach handler from specified event. If handler not specified, detach all of handlers.\n     *\n     * @param {String} name Name of Event.\n     * @param {Function} fn Handler of Event.\n     */\n    target.prototype.off = function(name: string, fn: () => void) {\n      if (!this.__callbacks[name]) return this;\n      if (typeof fn === 'undefined') {\n        delete this.__callbacks[name];\n      }\n      if (typeof fn !== 'function') throw new Error('second param must be function!');\n\n      let handlers = this.__callbacks[name];\n      let index = handlers.indexOf(fn);\n\n      if (index !== -1) {\n        handlers.splice(index, 1);\n      }\n\n      return this;\n    };\n\n    /**\n     * Trigger handler once.\n     *\n     * @param {String} name Name of Event.\n     * @param {Function} fn Handler of Event.\n     */\n    target.prototype.once = function(name: string, fn: () => void) {\n      return this.on(name, (...arg: any[]) => {\n        fn.apply(this, arg);\n        this.off(name, fn);\n      });\n    };\n\n    /**\n     * Trigger handlers of specified event.\n     *\n     * @param {String} name Name of Event.\n     */\n    target.prototype.emit = function(name: string, ...args: any[]) {\n      let handlers = this.__callbacks[name];\n      if (!handlers) return;\n\n      for (let i = 0, len = handlers.length; i < len; i++) {\n        let fn = handlers[i];\n\n        if (fn.apply(this, args) === false) {\n          if (event && event.stopPropagation) event.stopPropagation();\n          break;\n        }\n      }\n    };\n\n    return target;\n  };\n}\n\n/**\n * Use Event Emitter as instance.\n */\n@emittable()\nclass Emitter {}\n\nexport { Emitter };\n","import { tsid } from '../util/id';\nimport Style from './types/Style';\nimport Point from './types/Point';\nimport Rect from './types/Rect';\nimport Matrix from './types/Matrix';\nimport { memoizable, observeProps } from '../decorators/memoized';\nimport emittable from '../decorators/emitter';\nimport Layer from '../Whiteboard/Layer';\nimport { Segment } from './types/Segment';\n\nexport interface ItemOptions {\n  type: IToolType,\n  typeId: number,\n  id: number,\n  style: object,\n  [key: string]: any\n}\n\n// 白板所有元素的父类\n@emittable()\n@memoizable()\n@observeProps({\n  selected: { type: Boolean, default: false },\n  style: { type: Style, default: null },\n  showShadow: { type: Boolean, default: true } //\n})\nabstract class Item {\n  /**\n   * Composite rule used for canvas globalCompositeOperation\n   * possible value:\n   * [ 'source-over','source-in','source-out','source-atop',\n   *   'destination-over','destination-in','destination-out','destination-atop',\n   *   'lighter', 'copy','xor', 'multiply', 'screen', 'overlay', 'darken',\n   *   'lighten', 'color-dodge', 'color-burn', 'hard-light', 'soft-light',\n   *   'difference', 'exclusion', 'hue', 'saturation', 'color', 'luminosity'\n   * ]\n   *\n   * @type String\n   * @default\n   */\n  globalCompositeOperation = 'source-over'; //'xor'\n  filter = 'blur(5px)'; //experiment feature.\n  scaleMode = 'free'; //no-scale, free, proportion\n\n  layer!: Layer; //inject when it is added on layer.\n  type?: IToolType;\n  typeId?: number;\n  id!: number;\n\n  style = new Style();\n  matrix: Matrix;\n  selected!: boolean;\n  showShadow!: boolean;\n  children!: Item[];\n  input?: HTMLDivElement; // for  Text Item\n  changed!: () => void\n\n  constructor(options?: Partial<ItemOptions>) { //TODO: refactor\n    if (options) {\n      const { type, typeId, id, style, ...rest } = options;\n      type && (this.type = type);\n      this.typeId = typeId || -Infinity;\n      this.id = id || tsid();\n      this.style = new Style(style);\n      if(this.showShadow) {\n        this.style.shadowColor = this.style.strokeStyle;\n        this.style.shadowBlur = 20;\n      }\n      this.handleRest(rest);\n    }\n\n    this.matrix = new Matrix();\n  }\n\n  handleRest(preset: object) {\n    if (!preset) return;\n\n    Object.keys(preset).forEach(key => {\n      let item = preset[key];\n      this[key] = item;\n    });\n  }\n\n  /**\n   * Unite bounds of children , and return a new Rect.\n   * @param children\n   */\n  uniteBoundsOfChildren(children: Segment[] | Item[]) {\n    let x1 = Infinity,\n      x2 = -x1,\n      y1 = x1,\n      y2 = x2;\n\n    for (let i = 0, l = children.length; i < l; i++) {\n      //@ts-ignore\n      let bound = children[i].bounds;\n\n      let xn = bound.x,\n        yn = bound.y,\n        xx = bound.x + bound.width,\n        yx = bound.y + bound.height;\n\n      if (xn < x1) x1 = xn;\n      if (xx > x2) x2 = xx;\n      if (yn < y1) y1 = yn;\n      if (yx > y2) y2 = yx;\n    }\n\n    return new Rect(x1, y1, x2 - x1, y2 - y1, this);\n  }\n\n  /**\n   * Get bounds of current item.\n   */\n  abstract get bounds(): Rect\n\n  /**\n   * Get bounds with stroke of current item.\n   */\n  get strokeBounds() { // TODO: to strokeBounds.\n    return this.bounds;\n  }\n\n  /**\n   * Get position based-on center point of current item.\n   */\n  get position() {\n    return this.bounds.center;\n  }\n\n  /**\n   * Set position of current item.\n   */\n  set position(value: Point) {\n    this.setPosition(value.x, value.y);\n  }\n\n  setPosition(x: number, y: number) {\n    return this.translate(Point.instantiate(x, y).subtract(this.position));\n  }\n\n  /**\n   * Translate to point.\n   * @param point Translate delta.\n   */\n  translate(point: Point) {\n    if (this.children) {\n      this.children.filter(item => item.type === 'text').map(item => {\n        this.dispatchTextMouseDrag(item, point);\n        return item;\n      });\n    }\n    if (this.type === 'text') {\n      this.dispatchTextMouseDrag(this, point);\n    }\n    let mx = new Matrix();\n    return this.transform(mx.translate(point));\n  }\n\n  /**\n   * text move is different from others, so ..\n   * @param item  instanceof Text\n   * @param point delta\n   */\n  protected dispatchTextMouseDrag(item: Item, point: Point) {\n    if (item.onMouseDrag && typeof item.onMouseDrag === 'function') {\n      item.onMouseDrag(point);\n    }\n  }\n\n  /**\n * Scale current item, base on center of item.\n * @param scale horizontal & vertical scale ratio\n */\n  public scale(scale: number): Item\n\n  /**\n * Scale current item.\n * @param scale horizontal & vertical scale ratio\n * @param point Base point.\n */\n  public scale(scale: number, point: Point): Item\n  /**\n * Scale current item, base on center of item.\n * @param sx horizontal\n * @param sy, if it not set, use sx by default.\n */\n  public scale(sx: number, sy: number): Item\n  /**\n * Scale current item.\n * @param sx horizontal\n * @param sy vertical scale ratio\n * @param point Base point.\n */\n  public scale(sx: number, sy: number, point: Point): Item\n  public scale(sx: number, sy?: number | Point, point?: Point): Item {\n    if (typeof sx !== 'number') throw new TypeError(\"param 'sx' of scale must be number!\");\n\n    if (typeof sy !== 'number') sy = sx;\n    if (this.scaleMode === 'proportion') {\n      let scaleRadio = Math.min(sx, sy);\n      sx = sy = scaleRadio;\n    }\n\n    let mx = new Matrix();\n    point = point || this.bounds.center;\n    return this.transform(mx.scale(sx, sy, point));\n  }\n\n  /**\n   * Rotate current item.\n   * @param deg degree of Rotation.\n   * @param point Base point.\n   */\n  rotate(deg: number, point?: Point) {\n    if (typeof deg !== 'number') throw new TypeError(\"param 'deg' of rotate must be number!\");\n    let mx = new Matrix();\n    point = point || this.bounds.center;\n    return this.transform(mx.rotate(deg, point));\n  }\n\n  transform(matrix: Matrix) {\n    if (matrix) {\n      //注意矩阵multify 顺序\n      this.matrix = this.matrix.prepend(matrix);\n    }\n    this.transformContent(matrix);\n    this.changed();\n    return this;\n  }\n\n  /**\n   * Transform group & compoundPath & Segment of path;\n   * @param {*} matrix\n   */\n  transformContent(matrix: Matrix) {\n    if (this.children) {\n      this.children.forEach(item => item.transform(matrix));\n      this.matrix.reset();\n    }\n  }\n\n  /**\n   * If point in the bounds of item.\n   * @param point\n   */\n  containsPoint(point: Point) {\n    return this.bounds.containsPoint(point);\n  }\n\n  protected abstract _draw(ctx: CanvasRenderingContext2D): Item;\n\n  /**\n   * Draw item on specified canvas context.\n   *\n   * @param ctx context of current canvas.\n   *\n   */\n  draw(ctx: CanvasRenderingContext2D) {\n    ctx.save();\n    this.style.apply(ctx);\n    ctx.globalCompositeOperation = this.globalCompositeOperation;\n    this.matrix.applyToContext(ctx);\n    this._draw(ctx);\n\n    ctx.restore();\n\n    if (this.selected) this.drawBoundRect(ctx);\n    return this;\n  }\n\n  /**\n   *  Get JSON format data, in [typeId, id, JSONData, style]\n   *  e.g. [6, 9909959950, [[345, 234], [603, 436]], {\"c\":\"#da64e2\",\"w\":5,\"f\":20}];\n   */\n  toJSON() {\n    return [this.typeId, this.id, this._toJSON(), this.style.toShortJSON()];\n  }\n\n  protected abstract _toJSON(): any[];\n\n  /**\n   * remove from collection of layers;\n   */\n  remove() {\n    this.layer && this.layer.items.remove(this);\n  }\n\n  /**\n   * 绘制边界矩形\n   * @param ctx\n   */\n  drawBoundRect(ctx: CanvasRenderingContext2D) {\n    ctx.save();\n    ctx.strokeStyle = '#009dec';\n    ctx.lineWidth = 1;\n    ctx.strokeRect.apply(ctx, this.strokeBounds.toJSON());\n    ctx.restore();\n  }\n\n  public onDeleted() {}\n\n  // for text Item\n  set editable(_value: boolean) { }\n  drawTextImg() { }\n  onMouseDrag(_point: Point) {}\n}\n\nexport default Item;\n","import { Segment, LineSegment, BezierSegment, MoveSegment, QuadraticSegment, ArcSegment } from './types/Segment';\nimport Point from './types/Point';\nimport fitCurve from './algorithm/fitCurve';\nimport smoothCurve from './algorithm/smoothCurve';\nimport { memoized, observeProps } from '../decorators/memoized';\nimport Item from './Item';\nimport Style from './types/Style';\nimport Matrix from './types/Matrix';\n\n\n/**\n * A full path and base class of all single path shapes.\n * 所有绘制图形的父类\n */\n@observeProps({\n  fill: { type: Boolean, default: false },\n  showAuxiliary: { type: Boolean, default: false },\n  stroke: { type: Boolean, default: true },\n})\nclass Path extends Item {\n  //props\n  segments: Segment[] = [];\n  // private points = [];\n  contextPoint!: Point;\n  isClose = false;\n  fill!: boolean ;\n  showAuxiliary!: boolean;\n  stroke!: boolean;\n  style!: Style;\n  changed!: () => void;\n\n  /**\n   * Add Segement in path.\n   * @param segment\n   */\n  add(segment: Segment) {\n    segment.owner = this;\n    segment.contextPoint = this.contextPoint;\n    this.segments.push(segment);\n    this.contextPoint = segment.point;\n    this.changed();\n  }\n\n  /*\n  * Implements iterator.\n  **/\n  *[Symbol.iterator]() {\n    for (let i = 0, len = this.segments.length; i < len; i++) {\n      yield this.segments[i];\n    }\n  }\n\n  public clear() {\n    this.segments = [];\n  }\n\n  public arc(x: number, y: number, r: number, sa: number, ea: number) {\n    const segment = new ArcSegment();\n    segment.arc = [x, y, r, sa, ea];\n    this.add(segment);\n    return this;\n  }\n\n  /**\n   * Append  Arc Segment\n   * @param cp1\n   * @param cp2\n   * @param radius\n   */\n  public arcTo(cp1: Point, cp2: Point, radius = 0) {\n    const segment = new ArcSegment(cp1, cp2, radius);\n    this.add(segment);\n    return this;\n  }\n\n  /**\n   * Append Move segment for current path.\n   *\n   * @param x\n   * @param y\n   */\n  public moveTo(x: number , y: number): Path\n  /**\n   * Append Move segment for current path.\n   */\n  public moveTo(x:Point): Path\n  public moveTo(x: number | Point, y?: number) {\n    const point = Point.instantiate(x, y);\n    const segment = new MoveSegment(point);\n    this.add(segment);\n    return this;\n  }\n\n  /**\n   * Append LineTo segment for current path.\n   *\n   * @param x\n   * @param y\n   */\n  public lineTo(x: Point): Path;\n  public lineTo(x: number, y: number): Path;\n  public lineTo(x: number | Point, y?: number): Path {\n    const point = Point.instantiate(x, y);\n    const segment = new LineSegment(point);\n    this.add(segment);\n    return this;\n  }\n\n  /**\n   * Support chaining-call\n   * @param cp1\n   * @param cp2\n   * @param point\n   */\n  public bezierCurveTo(cp1: Point, cp2: Point, point: Point) {\n    const segment = new BezierSegment(cp1, cp2, point);\n    this.add(segment);\n    return this;\n  }\n\n  /**\n   * Add quadratic Curve Segment.\n   * @param cp\n   * @param point\n   */\n  public quadraticCurveTo(cp: Point, point: Point) {\n    //二阶转三阶\n\n    let current = this.contextPoint;\n    if (!current) return this;\n\n    // This is exact:\n    // If we have the three quad points: A E D,\n    // and the cubic is A B C D,\n    // B = E + 1/3 (A - E)\n    // C = E + 1/3 (D - E)\n    this.bezierCurveTo(cp.add(current.subtract(cp).multiply(1 / 3)), cp.add(point.subtract(cp).multiply(1 / 3)), point);\n    return this;\n  }\n\n  public quadraticCurveTo2(cp: Point, point: Point) {\n    const segment = new QuadraticSegment(cp, point);\n    this.add(segment);\n    return this;\n  }\n\n  public closePath() {\n    this.isClose = true;\n  }\n\n  /**\n   * get bounds of path. It's a memoized getter for performance.\n   */\n  @memoized()\n  get bounds() {\n    return this.uniteBoundsOfChildren(this.segments);\n  }\n\n  /**\n   * Get bounds with stroke.\n   */\n  get strokeBounds() {\n    return this.bounds.expand(this.style.lineWidth / 2);\n  }\n\n  /**\n   * get length of path\n   */\n  @memoized()\n  get length() {\n    return this.segments.reduce((arr, item) => (arr += item.length), 0);\n  }\n\n  /**\n   * Simplify current path, and rebuild segments\n   */\n  public simplify() {\n    //不优化小于3个点的曲线\n    if (this.segments.length < 3) return this;\n\n    const segments = fitCurve(this.segments.map(item => item.point), 1);\n    this.segments = [this.segments[0]].concat(segments);\n    this.changed();\n    return this;\n  }\n\n  /**\n   * Smooth current path, and rebuild segments\n   */\n  public smooth() {\n    const segments = smoothCurve(this.segments, this.isClose);\n    this.segments = segments;\n    this.changed();\n    return this;\n  }\n\n  /**\n   * If point in path.\n   * @param point\n   */\n  public containsPoint(point: Point) {\n    // If point not in bounds of path, return false.\n    if (!super.containsPoint(point)) return false;\n    if (this.fill) return true;\n\n    const seg = this.segments.find(item => item.containsPoint(point, this.style.lineWidth));\n    return !!seg;\n  }\n\n  /**\n   *\n   * transform matrix\n   * @param matrix\n   */\n  public transformContent(matrix: Matrix) {\n    this.segments.forEach(item => {\n      item.transformCoordinates(matrix);\n    });\n    this.matrix.reset();\n  }\n\n  protected _draw(ctx: CanvasRenderingContext2D) {\n    ctx.beginPath();\n\n    for (let i = 0, segment, len = this.segments.length; i < len; ++i) {\n      segment = this.segments[i];\n\n      switch (\n      segment.command // first letter\n      ) {\n        case 'm':\n        case 'M': // moveTo, absolute\n          ctx.moveTo(segment.point.x, segment.point.y);\n          break;\n        case 'a':\n        case 'A':\n          ctx.arcTo.apply(ctx, segment.args);\n          break;\n        case 'l':\n        case 'L': // lineto, absolute\n          ctx.lineTo.apply(ctx, segment.args);\n          break;\n        case 'q':\n        case 'Q':\n          ctx.quadraticCurveTo.apply(ctx, segment.args);\n          break;\n        case 'c':\n        case 'C':\n          ctx.bezierCurveTo.apply(ctx, segment.args);\n          break;\n      }\n    }\n\n    if (this.isClose) ctx.closePath();\n\n    //和svg不同，svg 的fillColor 会自动fill, canvas 则通过API控制\n    if (this.fill && this.style.hasFill)\n      // 如果fill 模式为true, 则 执行fill\n      ctx.fill(this.style.fillRule);\n\n    if (this.stroke && this.style.hasStroke)\n      // 如果stroke 模式为true, 则 执行stroke\n      ctx.stroke();\n\n    if (this.showAuxiliary) this.segments.forEach(segment => segment.draw(ctx));\n    return this;\n  }\n\n  protected _toJSON(): any {\n    return this.segments.map(item => item.toJSON());\n  }\n\n  public toString() {\n    const segmentSVG = this.segments.map(item => item.toString()).join(' ');\n    return `<path d=\"${segmentSVG} ${this.isClose ? 'z' : ''}\"></path>`;\n  }\n}\n\nexport default Path;\n","//Dom helpers\n\n/**\n *\n * @param {*} element\n * @param {*} styles\n */\nexport function setStyle(element: HTMLElement, styles: object) {\n  const elementStyle = element.style;\n  if (!elementStyle) {\n    return element;\n  }\n\n  for (let property in styles) {\n    let normalizedProperty =\n      property === 'float' || property === 'cssFloat'\n      //@ts-ignore\n        ? typeof elementStyle.styleFloat === 'undefined'\n          ? 'cssFloat'\n          : 'styleFloat'\n        : property;\n    elementStyle[normalizedProperty] = styles[property];\n  }\n  return element;\n}\n\n/**\n * Remove listeners to element.\n * @param {DomElement} element\n * @param {String} eventType, e.g. \"mousemove\", \"mousemove mousedown\"\n * @param {Function} handler\n */\nexport function addListener(element: EventTarget, eventType: string, handler: (event: any) => any) {\n  if (!element) return;\n\n  let events = eventType.split(' ');\n  if (events.length > 1) {\n    for (let i = 0; i < events.length; i++) {\n      addListener(element, events[i], handler);\n    }\n    return;\n  }\n\n  if (element.addEventListener) {\n    element.addEventListener(eventType, handler, false);\n    //@ts-ignore\n  } else if (element.attachEvent) {\n    //@ts-ignore\n    element.attachEvent('on' + eventType, handler);\n  } else {\n    element['on' + eventType] = handler;\n  }\n}\n\n/**\n * Remove listeners from element.\n * @param {DomElement} element\n * @param {String} eventType, e.g. \"mousemove\", \"mousemove mousedown\"\n * @param {Function} handler\n */\nexport function removeListener(element: EventTarget, eventType: string, handler: (event: any) => any) {\n  if (!element) return;\n\n  let events = eventType.split(' ');\n  if (events.length > 1) {\n    for (let i = 0; i < events.length; i++) {\n      removeListener(element, events[i], handler);\n    }\n    return;\n  }\n\n  if (element.removeEventListener) {\n    element.removeEventListener(eventType, handler, false);\n    //@ts-ignore\n  } else if (element.detachEvent) {\n    //@ts-ignore\n    element.detachEvent('on' + eventType, handler);\n  } else {\n    element['on' + eventType] = null;\n  }\n}\n","/**\n * ItemCollection Embedded-Array 版本\n */\n\nimport { mixin } from '../decorators/mixin';\nimport Item from '../graphic/Item';\nimport Layer from './Layer';\n\ntype MethodKey = 'splice'|'push'|'unshift'|'sort'|'map'|'forEach'|'find'|'reduce'|'reduceRight'|'filter'|'includes';\n\ntype ArrayProto<T> = {\n  [key in MethodKey]: Array<T>[key]\n}\n\ninterface ItemCollection extends ArrayProto<Item> { }\n\nconst arrMethods = {\n};\nconst arr = Array.prototype;\n\n//Inject Array methods into ItemCollection.\n['splice', 'push', 'unshift', 'sort', 'map', 'forEach', 'find', 'reduce', 'reduceRight', 'filter', 'includes'].forEach(\n  method =>\n    (arrMethods[method] = function () {\n      return arr[method].apply(this['items'], arguments);\n    })\n);\n\n\n/**\n * path collection of canvas.\n * Behavior like an array.\n */\n@mixin(arrMethods)\nclass ItemCollection {\n  private layer?: Layer;\n  private items: Item[] = [];\n  private buffered: Item[] = [];\n\n  // private includes: () => Array<Item>;\n\n  /**\n   * Compare 2 ItemCollection by id\n   *\n   * @param left\n   * @param right\n   */\n  static diff(left: ItemCollection, right: ItemCollection) {\n    if (left.length !== right.length) return true;\n\n    for (let i = 0, len = left.length; i < len; i++) {\n      if (left[i].id !== right[i].id) return true;\n    }\n    return false;\n  }\n\n  /**\n   *\n   * @param {Array} items\n   * @param {Layer} layer\n   */\n  constructor(layer?: Layer, items?: Item[]) {\n    if (items) this.items = items;\n    this.layer = layer;\n  }\n\n  /**\n   * Get length of items.\n   */\n  get length() {\n    return this.items.length;\n  }\n\n  /**\n   * Internal getter, visit item-array directly\n   */\n  get array() {\n    return this.items;\n  }\n\n  /**\n   * All items-collection change ,will trigger whiteboard re-draw.\n   */\n  changed() {\n    this.layer && this.layer.markAsDirty();\n  }\n\n  /**\n   * filter duplicated items\n   */\n  distinct() {\n    this.items = [...(new Set(this.items))];\n  }\n\n  /*\n  * Implements iterator.\n  **/\n  *[Symbol.iterator]() {\n    for (let i = 0, len = this.items.length; i < len; i++) {\n      yield this.items[i];\n    }\n  }\n\n  /**\n   * Compare with other ItemCollection.\n   * @param other\n   */\n  diff(other: ItemCollection) {\n    return ItemCollection.diff(this, other);\n  }\n\n  /**\n   * Get item via index, equal to this[index]\n   * @param index\n   */\n  get(index: number) {\n    return this.items[index];\n  }\n\n  /**\n   * Set item at specified position,\n   * @param index, specified position\n   * @param item, whiteboard item to be add.\n   */\n  set(item: Item, index: number) {\n    if (this.items[index] === item) return false;\n\n    if (typeof index === 'undefined') {\n      //add same item only once.\n      if (this.includes(item)) return false;\n      return this.add(item);\n    }\n    if (this.layer) item.layer = this.layer;\n    this.items[index] = item;\n    //@ts-ignore\n    if (!IS_PRODUCTION) {\n      this[index] = item;\n    }\n\n    this.changed();\n    return true;\n  }\n\n  /**\n   * Add whiteboard item.\n   * @param item\n   */\n  add(item: Item) {\n    // if (!(item instanceof Item)) throw new TypeError('Only Item can add to Collection!');\n\n    if (this.layer) item.layer = this.layer;\n    this.items.push(item);\n    //@ts-ignore\n    if (!IS_PRODUCTION) {\n      let index = this.items.length - 1;\n      this[index] = item;\n    }\n\n    this.changed();\n    return this;\n  }\n\n  buffer(item: Item) {\n    if (!(item instanceof Item)) throw new TypeError('Only Item can add to Collection!');\n\n    if (this.layer) item.layer = this.layer;\n    this.buffered.push(item);\n    this.changed();\n    return this;\n  }\n\n  flush() {\n    this.items.push(...this.buffered);\n    this.buffered = [];\n  }\n\n  /**\n   * Clear items.\n   */\n  clear() {\n    this.notifyDeleted(this.items);\n    this.items = [];\n    this.buffered = [];\n    this.changed();\n    return this;\n  }\n\n  /**\n   * notify deleted Item\n   * @param items deleted Items\n   */\n  notifyDeleted(items: Item[]) {\n    items.map(item => item.onDeleted())\n  }\n\n  /**\n   * Select All items, support keyboard event Ctrl+A.\n   */\n  selectAll() {\n    this.forEach(item => (item.selected = true));\n  }\n\n  /**\n   * anti-select current collection.\n   */\n  antiSelect() {\n    this.forEach(item => (item.selected = !item.selected));\n  }\n\n  /**\n   * unselect all items.\n   */\n  unselect() {\n    this.forEach(item => (item.selected = false));\n  }\n\n  /**\n   * Remove specified item from list.\n   * @param item1\n   */\n  remove(targetItem: Item) {\n    return this.delete(item => item === targetItem);\n  }\n\n  /**\n   * Remove item at specified index.\n   * @param index\n   */\n  removeAt(index: number) {\n    let item = this.items[index];\n    this.remove(item);\n    return item;\n  }\n\n  /**\n   * Delete items of current collection.\n   * It will trigger layer-refresh;\n   * @param fn, filter determine which item should be removed.\n   */\n  delete(fn: (item: Item) => boolean) {\n    let deleted = new ItemCollection();\n\n    this.items = this.items.filter(item => {\n      if (!fn(item)) return true;\n      deleted.add(item);\n      return false;\n    });\n\n    this.changed();\n    this.notifyDeleted(deleted.items);\n    return deleted;\n  }\n\n  /**\n   *\n   * Delete selected items of current collection.\n   */\n  deleteSelected() {\n    const deleted = this.delete(item => item.selected);\n    if (this.layer && deleted.length > 0) this.layer.globalCtx.emit('items:delete', deleted.map(item => item.id));\n    return deleted;\n  }\n\n  /**\n   * Delete items by ids.\n   * @param {Array} ids\n   */\n  deleteById(ids: number[] = []) {\n    return this.delete(item => ids.lastIndexOf(item.id) > -1);\n  }\n\n  /**\n   * Return the JSON-format information of current collection.\n   */\n  toJSON() {\n    return this.map(item => item.toJSON());\n  }\n}\n\nexport default ItemCollection;\n","import { setStyle } from '../util/dom';\nimport ItemCollection from './ItemCollection';\nimport Matrix from '../graphic/types/Matrix';\nimport Rect from '../graphic/types/Rect';\nimport Item from '../graphic/Item';\n\nexport type layerDep = {\n  context: IContext,\n  wrapper?: HTMLElement\n};\n\n/**\n * Create canvas layer, and Manage all canvases in whiteboard.\n */\nexport default class Layer {\n  width: number;\n  height: number;\n  globalCtx: IContext;\n  matrix = new Matrix();\n  ctx: CanvasRenderingContext2D;\n  el: HTMLCanvasElement;\n\n  protected role: string;\n  protected wrapper?: HTMLElement;\n  protected offscreen = false;\n  private _bounds!: Rect;\n  private _items: ItemCollection;\n  private _isDirty = true;\n\n  /**\n   * Move items from one to other\n   * @param source layer\n   * @param target layer\n   * @param fn callback.\n   */\n  static elevator(source: Layer, target: Layer, fn?: () => void) {\n    let sourceItems = source.items;\n\n    for (let i = 0, len = sourceItems.length; i < len; i++) {\n      let element = sourceItems.get(0);\n      source.items.remove(element);\n      target.items.add(element);\n    }\n    fn && fn();\n  }\n  /**\n   * Create whiteboard layer with specified width & height.\n   *\n   * @param width\n   * @param height\n   * @param role\n   */\n  constructor(width: number, height: number, role: string = '', props: layerDep) {\n    this._items = new ItemCollection(this);\n    const el = document.createElement('canvas');\n    el.setAttribute('data-role', role);\n    el.setAttribute('canvas-id', role);\n    el.setAttribute('width', width.toString());\n    el.setAttribute('height', height.toString());\n    this.role = role;\n    this.el = el;\n    if (!this.offscreen && props.wrapper) {\n      this.wrapper = props.wrapper;\n      this.wrapper.appendChild(this.el);\n    }\n    this.globalCtx = props.context;\n    // if (typeof wx !== 'undefined' && wx.createCanvasContext) {\n    //   // adapt to wechat-mini-app\n    //   this.ctx = wx.createCanvasContext(role);\n    // } else {\n    //   this.ctx = el.getContext('2d') as CanvasRenderingContext2D;\n    // }\n    this.ctx = el.getContext('2d') as CanvasRenderingContext2D;\n\n    this.width = width;\n    this.height = height;\n    this._bounds = new Rect(0, 0, this.width, this.height);\n\n    setStyle(el, {\n      position: 'absolute',\n      width: `${this.width}px`,\n      height: `${this.height}px`,\n      left: 0,\n      top: 0,\n      'touch-action': 'none',\n    });\n\n    if (this.deviceRatio > 1) {\n      this.applyRatio();\n    }\n  }\n\n  /**\n   * Get bounds of layer.\n   */\n  get bounds() {\n    return this._bounds;\n  }\n\n  /**\n   * Alias of items.append .\n   * @param item\n   */\n  append(item: Item) {\n    this.items.add(item);\n  }\n\n  /**\n   * Alias of items.remove .\n   * @param item\n   */\n  remove(item: Item) {\n    this.items.remove(item);\n  }\n\n\n  // appendTo(whiteboard: Whiteboard) {\n  //   //appendTo wrapper.\n  //   if (this.offscreen) return;\n\n  //   this.wrapper = whiteboard.wrapper;\n  //   this.wrapper.appendChild(this.el);\n\n  //   //ref whiteboard context.\n  //   this.globalCtx = whiteboard.context;\n  // }\n\n  _draw() {\n    this.globalCtx.refreshCount++;\n    this._items.forEach(item => item && item.draw(this.ctx));\n  }\n\n  /**\n   * refresh current layer.\n   */\n  refresh() {\n    this._clearCanvas();\n    this.globalCtx.emit('layer:refresh', { layer: this });\n    this._draw();\n    this._isDirty = false;\n  }\n\n  get items() {\n    return this._items;\n  }\n\n  get deviceRatio() {\n    return window.devicePixelRatio || 1;\n  }\n\n  get pixelRadio() {\n    let ctx = this.ctx;\n    let canvas = document.createElement('canvas');\n    if (!/^off|false$/.test(canvas.getAttribute('hidpi') || '')) {\n      let backingStoreRatio =\n        ctx.webkitBackingStorePixelRatio ||\n        ctx.mozBackingStorePixelRatio ||\n        ctx.msBackingStorePixelRatio ||\n        ctx.oBackingStorePixelRatio ||\n        ctx.backingStorePixelRatio ||\n        1;\n\n      return this.deviceRatio / backingStoreRatio;\n    }\n    return this.deviceRatio;\n  }\n\n  /**\n   * prop 'isDirty' is readonly\n   */\n  get isDirty() {\n    return this._isDirty;\n  }\n\n  /**\n   * Mark layer as 'dirty', it will be refreshed on next tick.\n   */\n  markAsDirty() {\n    this._isDirty = true;\n  }\n\n  /**\n   * Apply deviceRatio to Canvas, for retina.\n   */\n  applyRatio() {\n    this.el.width = this.width * this.deviceRatio;\n    this.el.height = this.height * this.deviceRatio;\n    this.ctx.scale(this.deviceRatio, this.deviceRatio);\n  }\n\n  /**\n   * reset transform for initial state.\n   */\n  resetTransform() {\n    this.ctx.setTransform(this.deviceRatio, 0, 0, this.deviceRatio, 0, 0);\n  }\n\n  _clearCanvas() {\n    this.ctx.clearRect(0, 0, this.width, this.height);\n  }\n\n  /**\n   * clear current layer.\n   */\n  clear() {\n    this.items.clear();\n  }\n\n  /**\n   * 等比缩放画布\n   * @param radio\n   */\n  zoom(radio: number) {\n    // this.ctx.scale(radio, radio);\n    setStyle(this.el, {\n      width: this.width * radio + \"px\",\n      height: this.height * radio + \"px\",\n    });\n    this.el.width = this.el.width * radio;\n    this.el.height = this.el.height * radio;\n    this.ctx.restore();\n    this.ctx.save();\n    if (this.deviceRatio > 1) this.ctx.scale(this.deviceRatio, this.deviceRatio);\n    this.ctx.scale(radio, radio);\n    this.markAsDirty();\n  }\n\n\n  /**\n   * Move own items to target\n   * @param target\n   */\n  elevateTo(target: Layer) {\n    Layer.elevator(this, target);\n  }\n\n  /**\n   * 释放该Layer\n   */\n  dispose() {\n    this.wrapper && this.wrapper.removeChild(this.el);\n  }\n}\n","let requestAnimationFrame =\n  (typeof window !== 'undefined' &&\n    ((window.requestAnimationFrame && window.requestAnimationFrame.bind(window)) ||\n      (window.msRequestAnimationFrame && window.msRequestAnimationFrame.bind(window)) ||\n      window.mozRequestAnimationFrame ||\n      window.webkitRequestAnimationFrame)) ||\n  function(fn) {\n    return setTimeout(fn, 16);\n  };\nlet noop = () => {};\nlet cancelAnimationFrame = window.cancelAnimationFrame || window.clearTimeout;\n\n/**\n * Changes value from one to another within certain period of time, invoking callbacks as value is being changed.\n * @memberOf nebula\n * @param {Object} [options] Animation options\n * @param {Function} [options.onChange] Callback; invoked on every value change\n * @param {Function} [options.onComplete] Callback; invoked when value change is completed\n * @param {Number} [options.startValue=0] Starting value\n * @param {Number} [options.endValue=100] Ending value\n * @param {Number} [options.byValue=100] Value to modify the property by\n * @param {Function} [options.easing] Easing function\n * @param {Number} [options.duration=500] Duration of change (in ms)\n */\nfunction animate(options) {\n  requestAnimationFrame(function(timestamp) {\n    options = options || {};\n\n    let start = timestamp || +new Date(),\n      duration = options.duration || 500,\n      finish = start + duration,\n      time,\n      onChange = options.onChange || noop,\n      abort = options.abort || noop,\n      onComplete = options.onComplete || noop,\n      easing = options.easing || (k => k),\n      startValue = 'startValue' in options ? options.startValue : 0,\n      endValue = 'endValue' in options ? options.endValue : 100,\n      byValue = options.byValue || endValue - startValue;\n\n    options.onStart && options.onStart();\n\n    (function tick(ticktime) {\n      if (abort()) {\n        onComplete(endValue, 1, 1);\n        return;\n      }\n      time = ticktime || +new Date();\n      let currentTime = time > finish ? duration : time - start,\n        timePerc = currentTime / duration,\n        current = easing(currentTime / duration) * byValue + startValue,\n        valuePerc = Math.abs((current - startValue) / byValue);\n\n      onChange(current, valuePerc, timePerc);\n      if (time > finish) {\n        options.onComplete && options.onComplete();\n        return;\n      }\n\n      requestAnimationFrame(tick);\n    })(start);\n  });\n}\n\nexport default animate;\nexport { cancelAnimationFrame };\n","exports.f = Object.getOwnPropertySymbols;\n","exports.f = {}.propertyIsEnumerable;\n","'use strict';\n// 19.1.2.1 Object.assign(target, source, ...)\nvar getKeys = require('./_object-keys');\nvar gOPS = require('./_object-gops');\nvar pIE = require('./_object-pie');\nvar toObject = require('./_to-object');\nvar IObject = require('./_iobject');\nvar $assign = Object.assign;\n\n// should work with symbols and should have deterministic property order (V8 bug)\nmodule.exports = !$assign || require('./_fails')(function () {\n  var A = {};\n  var B = {};\n  // eslint-disable-next-line no-undef\n  var S = Symbol();\n  var K = 'abcdefghijklmnopqrst';\n  A[S] = 7;\n  K.split('').forEach(function (k) { B[k] = k; });\n  return $assign({}, A)[S] != 7 || Object.keys($assign({}, B)).join('') != K;\n}) ? function assign(target, source) { // eslint-disable-line no-unused-vars\n  var T = toObject(target);\n  var aLen = arguments.length;\n  var index = 1;\n  var getSymbols = gOPS.f;\n  var isEnum = pIE.f;\n  while (aLen > index) {\n    var S = IObject(arguments[index++]);\n    var keys = getSymbols ? getKeys(S).concat(getSymbols(S)) : getKeys(S);\n    var length = keys.length;\n    var j = 0;\n    var key;\n    while (length > j) if (isEnum.call(S, key = keys[j++])) T[key] = S[key];\n  } return T;\n} : $assign;\n","// 19.1.3.1 Object.assign(target, source)\nvar $export = require('./_export');\n\n$export($export.S + $export.F, 'Object', { assign: require('./_object-assign') });\n","require('../../modules/es6.object.assign');\nmodule.exports = require('../../modules/_core').Object.assign;\n","module.exports = require(\"core-js/library/fn/object/assign\");","var $parseFloat = require('./_global').parseFloat;\nvar $trim = require('./_string-trim').trim;\n\nmodule.exports = 1 / $parseFloat(require('./_string-ws') + '-0') !== -Infinity ? function parseFloat(str) {\n  var string = $trim(String(str), 3);\n  var result = $parseFloat(string);\n  return result === 0 && string.charAt(0) == '-' ? -0 : result;\n} : $parseFloat;\n","var $export = require('./_export');\nvar $parseFloat = require('./_parse-float');\n// 18.2.4 parseFloat(string)\n$export($export.G + $export.F * (parseFloat != $parseFloat), { parseFloat: $parseFloat });\n","require('../modules/es6.parse-float');\nmodule.exports = require('../modules/_core').parseFloat;\n","module.exports = require(\"core-js/library/fn/parse-float\");","// Calculate an in-between color. Returns a \"rgba()\" string.\n// Credit: Edwin Martin <edwin@bitstorm.org>\n//         http://www.bitstorm.org/jquery/color-animation/jquery.animate-colors.js\nfunction calculateColor(begin, end, pos) {\n  var color =\n    'rgba(' +\n    parseInt(begin[0] + pos * (end[0] - begin[0]), 10) +\n    ',' +\n    parseInt(begin[1] + pos * (end[1] - begin[1]), 10) +\n    ',' +\n    parseInt(begin[2] + pos * (end[2] - begin[2]), 10);\n\n  color += ',' + (begin && end ? parseFloat(begin[3] + pos * (end[3] - begin[3])) : 1);\n  color += ')';\n  return color;\n}\n\n/**\n * Changes the color from one to another within certain period of time, invoking callbacks as value is being changed.\n * @memberOf nebula\n * @param {String} fromColor The starting color in hex or rgb(a) format.\n * @param {String} toColor The starting color in hex or rgb(a) format.\n * @param {Number} [duration] Duration of change (in ms).\n * @param {Object} [options] Animation options\n * @param {Function} [options.onChange] Callback; invoked on every value change\n * @param {Function} [options.onComplete] Callback; invoked when value change is completed\n * @param {Function} [options.colorEasing] Easing function.\n * Note that this function only take two arguments (currentTime, duration).\n * Thus the regular animation easing functions cannot be used.\n */\nfunction animateColor(fromColor, toColor, duration, options) {\n  let startColor = new Color(fromColor).toJSON(),\n    endColor = new Color(toColor).toJSON();\n\n  options = options || {};\n\n  animate(\n    Object.assign(options, {\n      duration: duration || 500,\n      startValue: startColor,\n      endValue: endColor,\n      byValue: endColor,\n      easing: function(currentTime, startValue, byValue, duration) {\n        let posValue = options.colorEasing\n          ? options.colorEasing(currentTime, duration)\n          : 1 - Math.cos((currentTime / duration) * (Math.PI / 2));\n        return calculateColor(startValue, byValue, posValue);\n      },\n    })\n  );\n}\n\nexport default animateColor;\n","import Layer, { layerDep } from './Layer';\nimport Img from '../graphic/shape/Image';\n\n\n/**\n * Support Cursor & Event .. operate layer behavior\n * 最前面的一层, 相较于其他层有特定的行为。\n */\nexport default class OperateLayer extends Layer {\n  private _cursorImage?: Img;\n\n  constructor(width: number, height: number, role: string, props: layerDep) {\n    super(width, height, role, props);\n    this.el.tabIndex = 1; //make OperateLayer focusable.\n  }\n  /**\n   * set cursor of layer. Use for operateLayer.\n   * @param value Img instance\n   */\n  setCursor(value: Img): void;\n  /**\n   * set cursor of layer. Use for operateLayer.\n   * @param value Img url\n   */\n  setCursor(value: string): void;\n  /**\n   * set cursor of layer. Use for operateLayer.\n   * @param value css cursor string\n   */\n  setCursor(value: string | Img): void {\n    if (typeof value === 'string') {\n      this.el.style.cursor = value;\n      this._cursorImage = undefined;\n    } else {\n      this._cursorImage = value;\n      this._cursorImage.layer = this;\n    }\n    this.markAsDirty();\n  }\n\n  /**\n   * clear current layer.\n   */\n  clear() {\n    super.clear();\n    this.setCursor('default');\n  }\n\n  /**\n   * draw items and cursor, but draw cursor first!\n   */\n  _draw() {\n    if (this._cursorImage) this._cursorImage.draw(this.ctx);\n    super._draw();\n  }\n\n  /**\n   * 释放该Layer\n   */\n  dispose() {\n    this.wrapper && this.wrapper.removeChild(this.el);\n  }\n}\n","/**\n * Custom Mouse Event Class\n */\n\nimport Point from '../graphic/types/Point';\nimport { MouseOrTouchEvent } from './EventHandler';\n\n\n/**\n * Mouse Event Class\n */\nexport class CustomizeMouseEvent {\n\n  private _point!: Point;\n  public originEvent: MouseOrTouchEvent;\n  public type: string;\n  public target: EventTarget | null;\n  public offsetX!: number;\n  public offsetY!: number;\n  private zoom: number;\n\n  constructor(originEvent: MouseOrTouchEvent, zoom: number) {\n    this.originEvent = originEvent;\n    this.type = originEvent.type;\n    this.target = originEvent.target;\n    this.zoom = zoom;\n    if (originEvent instanceof TouchEvent && originEvent.targetTouches.length > 0 && !!this.target) {\n      const rect = this.target.getBoundingClientRect();\n      this.offsetX = originEvent.targetTouches[0].clientX - rect.left;\n      this.offsetY = originEvent.targetTouches[0].clientY - rect.top;\n    }\n    if (originEvent instanceof MouseEvent) this.offsetX = originEvent.offsetX;\n    if (originEvent instanceof MouseEvent) this.offsetY = originEvent.offsetY;\n  }\n\n  get point() {\n    if (!this._point) {\n      this._point = new Point(this.offsetX * (1/this.zoom), this.offsetY * (1/this.zoom));\n    }\n    return this._point;\n  }\n\n  get delta() {\n    if (this.originEvent instanceof MouseEvent) {\n      return new Point(this.originEvent.movementX, this.originEvent.movementY);\n    }\n    return new Point(0, 0);\n  }\n\n  toString() {\n    return (\n      \"{ type: '\" +\n      this.type +\n      \"', point: \" +\n      this.point +\n      ', target: ' +\n      this.target +\n      (this.delta ? ', delta: ' + this.delta : '') +\n      ' }'\n    );\n  }\n}\n\n/**\n * Keyboard Event Class\n */\nexport class KeyEvent {\n\n  public originEvent: KeyboardEvent;\n  public type: string;\n  public target: EventTarget | null;\n  public key: string;\n  public keyCode: number;\n\n  constructor(originEvent: KeyboardEvent) {\n    this.originEvent = originEvent;\n    this.type = originEvent.type;\n    this.target = originEvent.target;\n    this.key = originEvent.key;\n    this.keyCode = originEvent.keyCode;\n  }\n\n  toString() {\n    return \"{ type: '\" + this.type + \"', key: \" + this.key + ', target: ' + this.target + ' }';\n  }\n}\n\nexport const keyCode = {\n  INSERT: 45,\n  DELETE: 46,\n  BACKSPACE: 8,\n  TAB: 9,\n  ENTER: 13,\n  ESC: 27,\n  LEFT: 37,\n  UP: 38,\n  RIGHT: 39,\n  DOWN: 40,\n  END: 35,\n  HOME: 36,\n  SPACEBAR: 32,\n  PAGEUP: 33,\n  PAGEDOWN: 34,\n  F2: 113,\n  F10: 121,\n  F12: 123,\n  NUMPAD_PLUS: 107,\n  NUMPAD_MINUS: 109,\n  NUMPAD_DOT: 110,\n};\n","// 20.3.3.1 / 15.9.4.4 Date.now()\nvar $export = require('./_export');\n\n$export($export.S, 'Date', { now: function () { return new Date().getTime(); } });\n","require('../../modules/es6.date.now');\nmodule.exports = require('../../modules/_core').Date.now;\n","module.exports = require(\"core-js/library/fn/date/now\");","/**\n * debounce & throttle.\n * Adapt from Lodash.js\n */\n\nconst isObject = item => typeof item === 'object' && typeof item === 'function';\n\nfunction debounce(func, wait, options) {\n  let lastArgs, lastThis, maxWait, result, timerId, lastCallTime;\n\n  let lastInvokeTime = 0;\n  let leading = false;\n  let maxing = false;\n  let trailing = true;\n\n  // Bypass `requestAnimationFrame` by explicitly setting `wait=0`.\n  const useRAF = !wait && wait !== 0 && typeof root.requestAnimationFrame === 'function';\n\n  if (typeof func != 'function') {\n    throw new TypeError('Expected a function');\n  }\n  wait = +wait || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? Math.max(+options.maxWait || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    const args = lastArgs;\n    const thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function startTimer(pendingFunc, wait) {\n    if (useRAF) {\n      return root.requestAnimationFrame(pendingFunc);\n    }\n    return setTimeout(pendingFunc, wait);\n  }\n\n  function cancelTimer(id) {\n    if (useRAF) {\n      return root.cancelAnimationFrame(id);\n    }\n    clearTimeout(id);\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = startTimer(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    const timeSinceLastCall = time - lastCallTime;\n    const timeSinceLastInvoke = time - lastInvokeTime;\n    const timeWaiting = wait - timeSinceLastCall;\n\n    return maxing ? Math.min(timeWaiting, maxWait - timeSinceLastInvoke) : timeWaiting;\n  }\n\n  function shouldInvoke(time) {\n    const timeSinceLastCall = time - lastCallTime;\n    const timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (\n      lastCallTime === undefined ||\n      timeSinceLastCall >= wait ||\n      timeSinceLastCall < 0 ||\n      (maxing && timeSinceLastInvoke >= maxWait)\n    );\n  }\n\n  function timerExpired() {\n    const time = Date.now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = startTimer(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      cancelTimer(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(Date.now());\n  }\n\n  function pending() {\n    return timerId !== undefined;\n  }\n\n  function debounced(...args) {\n    const time = Date.now();\n    const isInvoking = shouldInvoke(time);\n\n    lastArgs = args;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        timerId = startTimer(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = startTimer(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  debounced.pending = pending;\n  return debounced;\n}\n\nfunction throttle(func, wait, options) {\n  let leading = true;\n  let trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError('Expected a function');\n  }\n  if (isObject(options)) {\n    leading = 'leading' in options ? !!options.leading : leading;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n  return debounce(func, wait, {\n    leading: leading,\n    maxWait: wait,\n    trailing: trailing,\n  });\n}\n\nexport default throttle;\n","import { CustomizeMouseEvent, keyCode } from './EventType';\nimport throttle from '../util/throttle';\nimport { addListener, removeListener } from '../util/dom';\n// import Layer from './Layer';\nimport OperationLayer from './OperateLayer';\n\nimport Point from '../graphic/types/Point';\nimport Tool from '../tools/Tool';\nimport ItemCollection from './ItemCollection';\n\n// bind both mouse & touch event.\n// const mousedown = 'mousedown touchstart';\n// const mousemove = 'mousemove touchmove';\n// const mouseup = 'mouseup touchend';\n\nexport type MouseOrTouchEvent = MouseEvent | TouchEvent;\n\nconst mousedown = 'mousedown';\nconst mousemove = 'mousemove';\nconst mouseup = 'mouseup';\n\n/**\n * Determine if the distance between the two points is less than a value\n * @param prev\n * @param next\n * @param distance, default value is 5\n */\nfunction throttleDistance(prev: Point, next: Point, distance = 5): boolean {\n  if (!prev) return true;\n  return !next.nearby(prev, distance);\n}\n\nexport default class EventHandler {\n  // private isDragging = false;\n  private isMouseDown = false;\n  private lastPoint!: Point; //绑定流程和一般拖拽类似\n  private _currentTool!: Tool;\n\n  keyModifiers: {[key: string]: boolean} = {};\n  layer!: OperationLayer;\n  canvas!: HTMLCanvasElement;\n  context!: IContext;\n  items: ItemCollection;\n  draggingTriggered!: number;\n\n  constructor(items: ItemCollection) {\n    this.items = items;\n  }\n\n  set tool(tool) {\n    const isChanged = (!!this._currentTool && this._currentTool.type) !== tool.type;\n    isChanged && this.invokeToolSlotHandler('toolChanged', { type: tool.type }); // notice pre tool\n    this._currentTool = tool;\n    if (this._currentTool) {\n      this._currentTool.layer = this.layer;\n      this._currentTool.globalCtx = this.context;\n      this.layer.clear();\n    }\n    this._currentTool.items = this.items;\n    isChanged && this.invokeToolSlotHandler('toolChanged', { type: tool.type }); // notice next tool\n  }\n\n  get tool() {\n    return this._currentTool;\n  }\n\n  get inverseMatrix() {\n    return this.layer.matrix.inverse();\n  }\n\n  /**\n   * Bind mouseEvent and keyboardEvent to layer\n   * @param layer the instance of Layer\n   */\n  bind(layer: OperationLayer) {\n    this.layer = layer;\n    this.canvas = layer.el;\n    this.onMouseMove = throttle(this.onMouseMove, 0).bind(this); //\n\n    const canvas = this.canvas;\n    //TODO: 改为箭头函数，private， readonly\n    addListener(canvas, mousedown, this.onMouseDown);\n    addListener(canvas, mousemove, this.onMouseMove);\n    addListener(canvas, 'touchstart', this.onMouseDown);\n    addListener(canvas, 'touchmove', this.onMouseMove);\n    addListener(canvas, 'touchend', this.onMouseUp);\n    addListener(canvas, 'mouseenter', this.onMouseEnter.bind(this));\n    addListener(canvas, 'mouseleave', this.onMouseLeave.bind(this));\n    addListener(canvas, 'keydown', this.onKeyDown.bind(this));\n    addListener(canvas, 'keypress', this.onKeyPress.bind(this));\n    addListener(canvas, 'keyup', this.onKeyUp.bind(this));\n  }\n\n  unbind() {\n    removeListener(document, mouseup, this.onMouseUp);\n    removeListener(document, mousemove, this.onMouseMove);\n  }\n\n  onKeyDown(event: KeyboardEvent) {\n    let keyModifiers = this.keyModifiers;\n\n    keyModifiers[event.key] = true;\n    const eventKey = ['z', 'y', 'a'];\n    // windows keyboard or mac keyboard\n    if (keyModifiers.control || keyModifiers.meta) {\n      // if (!toolAvailable && eventKey.includes(event.key)) return;\n      if (eventKey.includes(event.key)) return;\n      const isRedo = keyModifiers.meta ? keyModifiers.shift && event.key === 'z' : event.key === 'y';\n      if (isRedo) {\n        window.commands.redo();\n      } else if (event.key === 'z') {\n        window.commands.undo();\n      } else if (event.key === 'a') {\n        this.items.selectAll();\n        event.preventDefault();\n      }\n    }\n\n    if (event.keyCode === keyCode.DELETE) {\n      this.items.deleteSelected();\n    }\n  }\n\n  onKeyPress(event: KeyboardEvent) {\n    console.log(event);\n  }\n\n  onKeyUp(event: KeyboardEvent) {\n    if (\n      (event.keyCode === keyCode.DELETE || event.keyCode === keyCode.BACKSPACE)\n      // this._currentTool.type === toolTypes.SELECTOR\n    ) {\n      // if (!toolAvailable) return;\n      window.commands.delete();\n    }\n    this.keyModifiers[event.key] = false;\n  }\n\n  private getMouseEvent(event: MouseOrTouchEvent) {\n    const _event = new CustomizeMouseEvent(event, this.context.zoom);\n    const point = _event.point;\n    this.inverseMatrix.applyToPoint(point);\n    return _event;\n  }\n\n  onMouseDown = (event: MouseOrTouchEvent) => {\n    event.preventDefault();\n\n    const _event = this.getMouseEvent(event);\n\n    if (this.invokeToolSlotHandler('onBeforeMouseDown', _event) === false) return;\n\n    this.isMouseDown = true;\n    this.draggingTriggered = 0;\n\n    this.invokeToolSlotHandler('onMouseDown', _event);\n\n    addListener(document, mouseup, this.onMouseUp);\n    addListener(document, mousemove, this.onMouseMove);\n    removeListener(this.canvas, mousemove, this.onMouseMove);\n  }\n\n  onMouseUp = (event: MouseOrTouchEvent) => {\n    event.preventDefault();\n\n    this.isMouseDown = false;\n    // this.isDragging = false;\n\n    this.invokeToolSlotHandler('onMouseUp', this.getMouseEvent(event));\n\n    removeListener(document, mouseup, this.onMouseUp);\n    removeListener(document, mousemove, this.onMouseMove);\n    addListener(this.canvas, mousemove, this.onMouseMove);\n  }\n\n  onMouseMove = (event: MouseOrTouchEvent) => {\n    event.preventDefault();\n\n    let _event = this.getMouseEvent(event),\n      point = _event.point;\n\n    const distance = this.context.settings.distance;\n\n    if (distance && !throttleDistance(point, this.lastPoint, distance)) return;\n    if (_event.target !== this.canvas) return;\n\n    let contain = this.layer.bounds.containsPoint(point);\n    if (!contain) return;\n    //@ts-ignore\n    if (typeof event.touches !== 'undefined' && event.touches.length > 1) {\n      return;\n    }\n\n    // mouseenter, mouseleave.\n\n    if (this.isMouseDown) {\n      // this.isDragging = true;\n      if (this.draggingTriggered === 0 && this.invokeToolSlotHandler('onBeforeMouseDrag', _event) === false) return;\n\n      this.draggingTriggered++;\n      this.invokeToolSlotHandler('onMouseDrag', _event);\n    } else {\n      this.invokeToolSlotHandler('onMouseMove', _event);\n    }\n    this.lastPoint = point;\n  }\n\n  onMouseEnter(event: MouseOrTouchEvent) {\n    this.invokeToolSlotHandler('onMouseEnter', event);\n  }\n\n  onMouseLeave(event: MouseOrTouchEvent) {\n    this.invokeToolSlotHandler('onMouseLeave', event);\n  }\n\n  /**\n   * Call handler of current tool.\n   * @param {String} name Name of handler\n   * @param  {...any} args arguments\n   */\n  invokeToolSlotHandler(name: string, data: any) {\n    if (!this.tool || typeof this.tool[name] !== 'function') return null; //ensure return undefined when handler is null.\n    // if(!IS_PRODUCTION)\n    //   console.log(this.tool.type, name, 'triggered!');\n    return this.tool[name](data);\n  }\n}\n","import OperateLayer from '../Whiteboard/OperateLayer';\nimport ItemCollection from '../Whiteboard/ItemCollection';\n\n/**\n * Base class of tools, for:\n * 1) create item.\n * 2) handle mouse & keyboard event.\n * 3) emit event for websocket.\n * 4) manage items of operateLayer.\n */\nconst toolStatus = { // TODO: refactor to enum\n  move: 'move',\n  select: 'select',\n  drawing: 'drawing',\n  scale: 'scale',\n  translate: 'translate',\n};\nexport default class Tool {\n  private _layer!: OperateLayer;\n  private _cursor!: string;\n  private _init!: () => void;\n\n  public globalCtx!: IContext; // 白板上下文，在实例化后注入；\n  public mode = toolStatus.select;\n  public type: IToolType;\n  public items!: ItemCollection\n\n  constructor(type: IToolType) {\n    this.type = type;\n\n    if (typeof this._init === 'function') {\n      this._init();\n    }\n  }\n\n  setLayerCursor(cursor: string) {\n    if (!this._cursor) this.layer.setCursor(cursor);\n  }\n\n  /**\n   * Items of activeLayer.\n  //  */\n  // get items() {\n  //   return window.items;\n  // }\n\n  /**\n   * Get layer of tool\n   */\n  set layer(value) {\n    this._layer = value;\n  }\n\n  get layer() {\n    return this._layer;\n  }\n\n}\n","import Tool from './Tool.js';\nimport Point from '../graphic/types/Point.js';\nimport { CustomizeMouseEvent } from '../Whiteboard/EventType.js';\n\nexport default class ArcDrawing extends Tool {\n\n  public center!: Point | null;\n  public radius!: number;\n\n  constructor(type: IToolType) {\n    super(type);\n    this.center = null;\n  }\n\n  onMouseDown(event: CustomizeMouseEvent) {\n    if (this.center) {\n      this.radius = event.point.subtract(this.center).length;\n    } else this.center = event.point;\n  }\n\n  onMouseMove(_event: CustomizeMouseEvent) {}\n  onMouseDrag(_event: CustomizeMouseEvent) {}\n  onMouseUp(_event: CustomizeMouseEvent) {}\n}\n","import Item, { ItemOptions } from '../Item';\nimport Rect from '../types/Rect';\nimport { observeProps } from '../../decorators/memoized';\n\nconst viewWidth = 1000;\nconst viewHeight = 800;\n/**\n * The Raster item represents an image.\n * Image transform 靠 ? , 而非指定的初始x, y;\n */\n@observeProps({\n  /**\n   * Set alpha of image, between 0 and 1.\n   */\n  alpha: { type: Number, default: 1 },\n  /**\n   * align of image in whiteboard\n   * possible values:\n   *  1)center\n   *  2)start\n   */\n  align: { type: String, default: 'start' },\n  /**\n   * If has box-shadow, like css box-shadow.\n   */\n  shadow: { type: Boolean, default: true },\n})\nclass Img extends Item {\n  static instantiate(options: Partial<ItemOptions>, src: string) {\n    return new Img(options, src);\n  }\n\n  private initBounds!: Rect;\n  private _src: string;\n  public loaded = false;\n  readonly strokeDashArray: number[] = [0, 1];\n  private image!: HTMLImageElement;\n  private naturalWidth = 0;\n  private naturalHeight = 0;\n\n  public align!: 'center' | 'start';\n  public shadow!: boolean;\n  public alpha!: number;\n  public ctx!: CanvasRenderingContext2D;\n\n  constructor(options: Partial<ItemOptions>, src: string) {\n    super(options);\n    this._src = src;\n    this.loadImage();\n  }\n\n  set src(_src) {\n    this.loaded = false;\n    this._src = _src;\n  }\n\n  get src() {\n    return this._src;\n  }\n\n  get bounds() {\n    let bound = this.initBounds.clone();\n    this.matrix.applyToRect(bound);\n    bound.owner = this;\n    return bound;\n  }\n\n  /**\n   * Load image & trigger callback;\n   * @param fn callback\n   */\n  public loadImage(fn?: () => void) {\n    if (!this.src && this.image && this.loaded) return;\n\n    const img = document.createElement('img');\n    img.setAttribute('crossOrigin', 'anonymous');\n    img.src = this.src;\n\n    img.onload = () => {\n      this.loaded = !!(img && img.src && img.complete);\n      this.naturalWidth = img ? img.naturalWidth || img.width : 0;\n      this.naturalHeight = img ? img.naturalHeight || img.height : 0;\n\n      //TODO:Emit load event\n      this.initBounds = this.calcInitBounds();\n\n      fn && fn.call(this, img);\n      img.onload = img.onerror = () => {};\n    };\n\n    img.onerror = () => {\n      console.warn(`can't load image '${this.src}'`);\n      //TODO:Emit error event\n      img.onload = img.onerror = () => {};\n    };\n\n    this.image = img;\n  }\n\n  /**\n   * 通过图像原始大小，算出宽高及起始位置，并返回bounds.(保持图片原始宽高比)\n   */\n  calcInitBounds() {\n    const viewRadio =  viewWidth / viewHeight;\n    const imgRadio = this.naturalWidth / this.naturalHeight;\n\n    let x, y, width, height;\n\n    if (this.naturalHeight < viewHeight && this.naturalWidth <  viewWidth) {\n      width = this.naturalWidth;\n      height = this.naturalHeight;\n      x = this.align === 'center' ? ( viewWidth - width) / 2 : 0;\n      y = this.align === 'center' ? (viewHeight - height) / 2 : 0;\n    } else if (imgRadio > viewRadio) {\n      width =  viewWidth;\n      height =  viewWidth / imgRadio;\n      x = 0;\n      y = this.align === 'center' ? (viewHeight - height) / 2 : 0;\n    } else {\n      height = viewHeight;\n      width = height * imgRadio;\n      y = 0;\n      x = this.align === 'center' ? ( viewWidth - width) / 2 : 0;\n    }\n\n    return new Rect(x, y, width, height, this);\n  }\n\n  /**\n   * Get Image Data of specified area from canvas.\n   * @return {TypedArray} data\n   */\n  get imageData(): ImageData {\n    let { x, y, width, height } = this.bounds;\n    if (this.ctx) {\n      return this.ctx.getImageData(x, y, width, height);\n    } else {\n      return new ImageData(0, 0);\n    }\n  }\n\n  /**\n   * Set TypedArray Data to canvas.\n   * @param {TypedArray} data\n   */\n  set imageData(data: ImageData) {\n    let { x, y } = this.bounds;\n    this.ctx && this.ctx.putImageData(data, x, y);\n  }\n\n  /**\n   * 参考\n   * https://developer.mozilla.org/zh-CN/docs/Web/API/CanvasRenderingContext2D/drawImage\n   *\n   * void ctx.drawImage(image, dx, dy); // 画布起始位置\n   * void ctx.drawImage(image, dx, dy, dWidth, dHeight);// 画布起始位置，和绘制大小（用于缩放）\n   * void ctx.drawImage(image, sx, sy, sWidth, sHeight, dx, dy, dWidth, dHeight); // 原始图片其实位置及大小\n   *\n   * @param ctx\n   */\n  public drawImageAndStroke(ctx: CanvasRenderingContext2D) {\n    const { x, y, width, height } = this.initBounds;\n\n    if (this.shadow) {\n      ctx.shadowOffsetX = 8;\n      ctx.shadowOffsetY = 8;\n      ctx.shadowBlur = 10;\n      ctx.shadowColor = 'rgba(0, 0, 0, 0.3)';\n    }\n\n    ctx.globalAlpha = this.alpha;\n    ctx.drawImage(this.image, x, y, width, height);\n  }\n\n  protected _draw(ctx: CanvasRenderingContext2D) {\n    this.ctx = ctx;\n\n    if (this.loaded) {\n      this.drawImageAndStroke(ctx);\n    } else {\n      this.loadImage(() => this.drawImageAndStroke(ctx));\n    }\n    return this;\n  }\n\n  protected _toJSON() {\n    return [this._src];\n  }\n}\n\nexport default Img;\n","import Img from '../../graphic/shape/Image';\nimport Point from '../../graphic/types/Point';\nimport { CustomizeMouseEvent } from '../../Whiteboard/EventType';\n\n/**\n * Custom tool cursor as specified image.\n * @param {String} url\n * @param {Object} offset, both offset.x & offset.y are numbers\n * code example:\n * @cursor('https://example/x.png', {x : 10, y: 10});\n */\nexport default function cursor(url: ((type: string) => string) | string, offset: {x: number, y: number}): { [key: string]: any } {\n  const offsetX = offset ? offset.x : 0;\n  const offsetY = offset ? offset.y : 0;\n\n  return {\n    /**\n     * All _init method should be invoked in constructor of base;\n     */\n    _init() {\n      if (typeof url === 'function') {\n        url = url(this.type);\n      }\n      this._cursor = new Img({}, url);\n    },\n\n    /**\n     * Get cursor image of tool, readonly.\n     */\n    get cursor() {\n      return this._cursor;\n    },\n\n    /**\n     * Set layer cursor as tool's cursor\n     */\n    onMouseEnter() {\n      this.layer.setCursor(this.cursor);\n    },\n\n    /**\n     * Update position of image on mousemove & mouseDrag.\n     * @param {Point} point\n     */\n     _move(point: Point) {\n      if (this.cursor.loaded) {\n        this.cursor.position = point.add(offsetX, offsetY);\n      }\n    },\n\n    onMouseMove(event: CustomizeMouseEvent) {\n      const { point } = event;\n      this._move(point);\n    },\n\n    onMouseDrag(event: CustomizeMouseEvent) {\n      const { point } = event;\n      this._move(point);\n    },\n  };\n}\n","import Path from './Path';\nimport Point from './types/Point';\nimport Rect from './types/Rect';\nimport Matrix from './types/Matrix';\nimport { observeProps } from '../decorators/memoized';\nimport { ItemOptions } from './Item';\n\n/**\n * The base class of 'two points shapes' that build with start-point & end-point.\n * 通常情况下，图形都是由拖动行为绘制的\n */\n@observeProps({\n  startPoint: { type: Point, default: new Point() },\n  endPoint: { type: Point, default: new Point() },\n})\nclass Shape extends Path {\n\n  startPoint!: Point;\n  endPoint!: Point;\n\n  /**\n   * 用与从JSON构造出Shape实例\n   *\n   * @param options 配置项\n   * @param points, startPoint , endPoint\n   */\n  static instantiate(options: object, [sp, ep]: [Point, Point]) {\n    const startPoint = new Point(sp[0], sp[1]);\n    const endPoint = new Point(ep[0], ep[1]);\n    const Ctor = this;\n\n    return new Ctor(options, startPoint, endPoint);\n  }\n\n  constructor(options?: Partial<ItemOptions>, sp?: Point, ep?: Point) {\n    super(options);\n    if (sp) this.startPoint = sp;\n    if (ep) this.endPoint = ep;\n  }\n\n  protected _buildPath() {\n    throw new Error('must overwrite!');\n  }\n\n  buildPath() {\n    this.clear();\n    this._buildPath();\n  }\n\n  protected _draw(ctx: CanvasRenderingContext2D) {\n    this.buildPath();\n    super._draw(ctx);\n    return this;\n  }\n\n  // override bounds for dragging-shapes\n  get bounds(): Rect {\n    let frm = this.startPoint,\n      x = frm.x,\n      y = frm.y,\n      width,\n      height;\n\n    let to = this.endPoint;\n    width = to.x - x;\n    height = to.y - y;\n    // Check if horizontal or vertical order needs to be reversed.\n    if (width < 0) {\n      x = to.x;\n      width = -width;\n    }\n    if (height < 0) {\n      y = to.y;\n      height = -height;\n    }\n\n    return new Rect(x, y, width, height, this);\n  }\n\n  /**\n   * Transform segments and startPoint * endPoint.\n   * @param matrix\n   */\n  transformContent(matrix: Matrix) {\n    // FIXME: rotate issue.\n    // also apply to start & end point.\n    matrix.applyToPoint(this.startPoint);\n    matrix.applyToPoint(this.endPoint);\n    super.transformContent(matrix);\n  }\n\n  protected _toJSON() {\n    return [[this.startPoint.x, this.startPoint.y], [this.endPoint.x, this.endPoint.y]];\n  }\n}\n\nexport default Shape;\n","/**\n * Rectangle support radius.\n */\nimport Shape from '../Shape';\nimport Point from '../types/Point';\nimport { observeProps } from '../../decorators/memoized';\n\n@observeProps({\n  /**\n   * 是否有圆角\n   */\n  radius: { type: Number, default: 0 },\n})\nclass Rectangle extends Shape {\n\n  public radius = 0;\n\n  protected _buildPath() {\n    let { x: sx, y: sy } = this.startPoint;\n    let { x: ex, y: ey } = this.endPoint;\n    let width = Math.abs(sx - ex);\n    let height = Math.abs(sy - ey);\n    let radius = this.radius || 0;\n    let shortLine = Math.min(width, height);\n    if (radius > shortLine / 2) radius = shortLine / 2;\n    let isRounded = radius !== 0;\n\n    this.moveTo(new Point(sx + radius, sy)).lineTo(new Point(ex - radius, sy));\n    isRounded && this.arcTo(new Point(ex, sy), new Point(ex, sy + radius), radius);\n\n    this.lineTo(new Point(ex, ey - radius));\n    isRounded && this.arcTo(new Point(ex, ey), new Point(ex - radius, ey), radius);\n\n    this.lineTo(new Point(sx + radius, ey));\n    isRounded && this.arcTo(new Point(sx, ey), new Point(sx, ey - radius), radius);\n\n    this.lineTo(new Point(sx, sy + radius));\n    isRounded && this.arcTo(new Point(sx, sy), new Point(sx + radius, sy), radius);\n\n    this.closePath();\n  }\n}\n\nexport default Rectangle;\n","import Shape from '../Shape';\nimport Point from '../types/Point';\nimport { ItemOptions } from '../Item';\n\nexport default class Line extends Shape {\n  public dash!: number[];\n\n  constructor(options?: Partial<ItemOptions>, sp?: Point, ep?: Point) {\n    super(options, sp, ep);\n    this.style.dashArray = this.dash || [];\n  }\n\n  protected _buildPath() {\n    const { x, y } = this.startPoint;\n    const { x: ex, y: ey } = this.endPoint;\n\n    this.moveTo(x, y).lineTo(ex, ey);\n\n    //NOTE: DO NOT 'closePath' on dash-line\n    //  this.closePath()\n  }\n}\n","/**\n * Arrow shape\n */\nimport Shape from '../Shape';\nimport Point from '../types/Point';\n\nfunction calcArrow(sx: number, sy: number, ex: number, ey: number) {\n  let l = Math.sqrt(Math.pow(ex - sx, 2) + Math.pow(ey - sy, 2)),\n    e0 = ex - (((ex - sx) * Math.cos(0.5) - (ey - sy) * Math.sin(0.5)) * 10) / l,\n    e1 = ey - (((ey - sy) * Math.cos(0.5) + (ex - sx) * Math.sin(0.5)) * 10) / l,\n    e2 = ex - (((ex - sx) * Math.cos(0.5) + (ey - sy) * Math.sin(0.5)) * 10) / l,\n    e3 = ey - (((ey - sy) * Math.cos(0.5) - (ex - sx) * Math.sin(0.5)) * 10) / l;\n\n  return [new Point(e0, e1), new Point(ex, ey), new Point(e2, e3)];\n}\nexport default class Arrow extends Shape {\n  protected _buildPath() {\n    let { x: sx, y: sy } = this.startPoint;\n    let { x: ex, y: ey } = this.endPoint;\n\n    let points = calcArrow(sx, sy, ex, ey);\n\n    this.moveTo(sx, sy)\n      .lineTo(ex, ey)\n      .moveTo(points[0])\n      .lineTo(points[1])\n      .lineTo(points[2]);\n  }\n}\n","import Shape from '../Shape';\nimport { observeProps } from '../../decorators/memoized';\n\n/**\n * 支持等腰，直角三角形\n */\n@observeProps({\n  /**\n   * 当直角三角形时，确定直角的方向\n   */\n  anti: { type: Boolean, default: true },\n  /**\n   * 是否是直角三角形\n   */\n  right: { type: Boolean, default: false },\n})\nclass Triangle extends Shape {\n  private right!: boolean;\n  private anti!: boolean;\n\n  protected _buildPath() {\n    let t1x, t1y, t2x, t2y;\n    let { x: sx, y: sy } = this.startPoint;\n    let { x: ex, y: ey } = this.endPoint;\n\n    if (this.right) {\n      if (this.anti) {\n        t1x = ex;\n        t1y = sy;\n        t2x = sx;\n        t2y = ey;\n      } else {\n        t1x = t2x = sx;\n        t1y = sy;\n        t2y = ey;\n      }\n    } else {\n      t1x = sx;\n      t1y = ey;\n      t2x = (sx + ex) / 2;\n      t2y = sy;\n    }\n\n    this.moveTo(t1x, t1y)\n      .lineTo(t2x, t2y)\n      .lineTo(ex, ey)\n      .lineTo(t1x, t1y)\n      .closePath();\n  }\n}\n\nexport default Triangle;\n","import Shape from '../Shape';\nimport Point from '../types/Point';\n\nexport default class Ellipse extends Shape {\n  protected _buildPath() {\n    /* \"magic number\" for bezier approximations of arcs (http://itc.ktu.lt/itc354/Riskus354.pdf) */\n    let kappa = 0.5522848;\n    let x = this.bounds.center.x;\n    let y = this.bounds.center.y;\n    let a = this.bounds.width / 2;\n    let b = this.bounds.height / 2;\n    let ox = a * kappa; // 水平控制点偏移量\n    let oy = b * kappa; // 垂直控制点偏移量\n\n    this.moveTo(new Point(x - a, y))\n      .bezierCurveTo(new Point(x - a, y - oy), new Point(x - ox, y - b), new Point(x, y - b))\n      .bezierCurveTo(new Point(x + ox, y - b), new Point(x + a, y - oy), new Point(x + a, y))\n      .bezierCurveTo(new Point(x + a, y + oy), new Point(x + ox, y + b), new Point(x, y + b))\n      .bezierCurveTo(new Point(x - ox, y + b), new Point(x - a, y + oy), new Point(x - a, y))\n      .closePath();\n  }\n}\n","/**\n * Shape star\n */\nimport Shape from '../Shape';\nimport Point from '../types/Point';\n\n/** 五角星，用黄金分割 */\nconst radio = 0.382;\nexport default class Star extends Shape {\n  // Set fill-mode as default.\n  __fill = true;\n  __stroke = false;\n  scaleMode = 'proportion';\n\n protected _buildPath() {\n    let center = this.startPoint.midPointFrom(this.endPoint),\n      points = 10,\n      radius1 = this.startPoint.getDistance(this.endPoint) / 2,\n      radius2 = radius1 * radio,\n      step = 360 / points,\n      vector = new Point(0, -1),\n      firstPoint;\n\n    for (let i = 0; i < points; i++) {\n      let point = center.add(vector.rotate(step * i).multiply(i % 2 ? radius2 : radius1));\n\n      if (i === 0) {\n        this.moveTo(point);\n        firstPoint = point;\n        continue;\n      }\n      this.lineTo(point);\n    }\n    firstPoint && this.lineTo(firstPoint.clone()); // clone first point. avoid reference error.\n    this.closePath();\n  }\n}\n","import { BezierSegment, MoveSegment, Segment } from '../types/Segment';\nimport Point from '../types/Point';\nimport Path from '../Path';\nimport { ItemOptions } from '../Item';\n\n/**\n * Marker & highlighter.\n */\nexport default class Writing extends Path {\n  public alpha?: number;\n  // set alpha of path style.\n  //alpha = 1;\n\n  /**\n   * 用与从JSON构造出Writing实例\n   * @param {*} segments\n   */\n  static instantiate(options: object, segments: Segment[]) {\n    let instance = new Writing(options);\n\n    segments.forEach(seg => {\n      let segment;\n      if (seg.length === 1) {\n        segment = new MoveSegment(new Point(seg[0][0], seg[0][1]));\n      } else if (seg.length === 4) {\n        segment = new BezierSegment(\n          new Point(seg[1][0], seg[1][1]),\n          new Point(seg[2][0], seg[2][1]),\n          new Point(seg[3][0], seg[3][1])\n        );\n      }\n      segment && instance.add(segment);\n    });\n\n    return instance;\n  }\n\n  constructor(options?: Partial<ItemOptions>) {\n    super(options);\n    this.style.strokeStyle.alpha = this.alpha || 1;\n  }\n}\n","import Item, { ItemOptions } from '../Item';\nimport Rect from '../types/Rect';\nimport Point from '../types/Point';\nimport { observeProps } from '../../decorators/memoized';\nimport { setStyle } from '../../util/dom';\n\nconst replaceAll = (target: string, search: string, replacement: string): string => target.replace(new RegExp(search, 'g'), replacement);\n\nconst getStylePropertyValue = (target: HTMLDivElement, property: string) => {\n  const style = window.getComputedStyle(target, null);\n  return parseInt(style.getPropertyValue(property), 10);\n};\n\nexport const drawTextImg = (element: HTMLDivElement, ctx: CanvasRenderingContext2D) => {\n  const preStyle = element.getAttribute('style');\n  if (!preStyle) return;\n  const width = getStylePropertyValue(element, 'width');\n  const height = getStylePropertyValue(element, 'height');\n  const left = getStylePropertyValue(element, 'left');\n  const top = getStylePropertyValue(element, 'top');\n  const style = preStyle.replace(/(.+)(position.+?;)(.+)/, (_1, $2, _2, $4) => $2 + $4); // svg 中加入position 会导致 转 img 失败\n  let content = element.innerHTML;\n  content = replaceAll(content, '&nbsp;', ' ');\n  content = replaceAll(content, '<br>', '<br></br>');\n  const data = `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"${width + 5}\" height=\"${height}\"><foreignObject width=\"100%\" height=\"100%\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"${style}\">${content}</div></foreignObject></svg>`;\n\n  const DOM_URL = window.URL || window.webkitURL || window;\n  const img = new Image();\n  const svg = new Blob([data], { type: 'image/svg+xml;charset=utf-8' });\n  const url = DOM_URL.createObjectURL(svg);\n\n  img.onload = () => {\n    ctx.drawImage(img, left, top);\n    DOM_URL.revokeObjectURL(url);\n  };\n  // document.body.appendChild(img);\n  img.src = url;\n};\n\n/**\n * Text Item;\n */\n\n@observeProps({\n  _editable: { type: Boolean, default: false },\n})\nexport default class Text extends Item {\n\n  /**\n   * static method to create instance from params\n   */\n  static instantiate(options?: Partial<ItemOptions>, ...rest: any[]) {\n    const text = new Text(options);\n    text.startPoint = new Point(rest[0][0], rest[0][1]);\n    return text;\n  }\n\n  // private _mode = 'textarea'; // textarea\n  // private _autoBreak = true; // if _autoBreak is true, Text line will break if out of canvas bounds.\n  // private _crossBorder = false; // can cross a boundary\n  private _cxt!: CanvasRenderingContext2D;\n  private isDeleted = false;\n\n  public _editable!: boolean;\n\n  public textWrapper!: HTMLDivElement;\n  public zoom: number = 1;\n\n  public startPoint!: Point;\n  public endPoint!: Point;\n  public value!: string;\n  public input!: HTMLDivElement;\n  public onTyping!: (value: any[]) => void;\n\n\n  /**\n   * 每点击一次创建一个可编辑框\n   */\n  protected _draw(cxt: CanvasRenderingContext2D) {\n    this._cxt = cxt;\n    const { x, y } = this.startPoint;\n    if (!this.input && !this.isDeleted) {\n      this.input = document.createElement('div');\n      this.input.setAttribute('style', '');\n      this.input.setAttribute('autocapitalize', 'off');\n      this.input.setAttribute('autocorrect', 'off');\n      this.input.setAttribute('autocomplete', 'off');\n      console.log('strokeColor', this.style.strokeColor);\n      Object.assign(this.input.style, {\n        fontFamily: this.style.font || 'sans-serif',\n        'min-width': '100px',\n        'font-weight': 400,\n        color: this.style.strokeStyle, // can't color or strokeColor\n        // 'font-style': this.style.italic ? 'italic' : 'normal',\n        'font-size': `${this.style.fontSize * this.zoom}px`,\n        position: 'absolute',\n        left: `${x * this.zoom}px`,\n        top: `${(y - 10) * this.zoom }px`,\n      });\n      this.toggleInput();\n      if (!this.textWrapper) throw (\"can not find div about draw-panel\");\n\n      this.textWrapper.appendChild(this.input);\n      this.bindInputEvent();\n    }\n    this._editable && this.input.focus();\n    // this.drawTextImg(this._editable);\n    return this;\n  }\n\n  set editable(val: boolean) {\n    this._editable = val;\n    this.toggleInput();\n  }\n\n  /**\n   * freeze input by editable\n   */\n  toggleInput() {\n    if (!this.input) return;\n    setStyle(this.input, {\n      'pointer-events': this._editable ? 'initial' : 'none',\n      'user-select': this._editable ? 'initial' : 'none'\n    });\n    this.input.setAttribute('contenteditable', this._editable.toString());\n  }\n\n  /**\n   * bind event for input\n   * invoke typingCallback when truly input occurred\n   */\n  bindInputEvent() {\n    const invokeTyping = (value: string) => {\n      this.onTyping([this.id, value]);\n    }\n    let locked = false;\n    if (!this.input) return;\n    this.input.addEventListener('compositionstart', () => {\n      locked = true;\n    });\n    this.input.addEventListener('compositionend', () => {\n      locked = false;\n      invokeTyping(this.input.innerHTML);\n    });\n    this.input.addEventListener('input', event => {\n      if (!event.target || locked) return;\n      invokeTyping(event.target.innerHTML);\n    });\n\n  }\n\n  /**\n   * it is a hook, invoked when user drag Text instance\n   * @param point\n   */\n  onMouseDrag(point: Point) {\n    this.updatePosition(point)\n  }\n\n  /**\n   * update input position\n   * @param offset object {x, y}\n   */\n  updatePosition({ x = 0, y = 0 }) {\n    const { left, top } = this.input.style;\n    if (!left || !top) return;\n    Object.assign(this.input.style, {\n      left: `${parseInt(left) + x * this.zoom}px`,\n      top: `${parseInt(top) + y * this.zoom}px`,\n    });\n  }\n\n  /**\n   * draw canvas Img by text element\n   * @param showOriginInput\n   */\n  drawTextImg(showOriginInput = false) {\n    this.input.style.visibility = 'visible';\n    drawTextImg(this.input, this._cxt);\n    !showOriginInput && (this.input.style.visibility = 'hidden');\n  }\n\n  protected _toJSON() {\n    return [this.startPoint.x, this.startPoint.y]\n  }\n\n  /**\n   * get text element bound\n   */\n  public get bounds(): Rect {\n    const { left, top } = this.input.style;\n    if (!this.input) return new Rect(0, 0, 0, 0);\n    return new Rect(parseInt(left || '0') * 1 / this.zoom, parseInt(top || '0') * 1 / this.zoom, getStylePropertyValue(this.input, 'width') * 1 / this.zoom, getStylePropertyValue(this.input, 'height') * 1 / this.zoom, this)\n  }\n\n  /**\n   * invoked when ItemCollection Delete this\n   */\n  onDeleted() {\n    this.isDeleted = true;\n    this.input && this.input.remove();\n  }\n}\n","import Point from '../types/Point';\nimport Shape from '../Shape';\n\nexport default class ChatBox extends Shape {\n  protected _buildPath() {\n    let { x: sx, y: sy } = this.startPoint;\n    let { x: ex, y: ey } = this.endPoint;\n    let s1x = (sx + ex) / 2;\n    let s2y = sy + ((ey - sy) * 3) / 4;\n    let s3x = sx + (ex - sx) / 4;\n    let s3y = sy + ((ey - sy) * 3) / 8;\n    let s4x = sx + ((ex - sx) * 3) / 8;\n\n    this.moveTo(s1x, sy)\n      .quadraticCurveTo(new Point(sx, sy), new Point(sx, s3y))\n      .quadraticCurveTo(new Point(sx, s2y), new Point(s3x, s2y))\n      .quadraticCurveTo(new Point(s3x, ey), new Point(sx, ey))\n      .quadraticCurveTo(new Point(s4x, ey), new Point(s4x, s2y))\n      .quadraticCurveTo(new Point(ex, s2y), new Point(ex, s3y))\n      .quadraticCurveTo(new Point(ex, sy), new Point(s1x, sy))\n      .closePath();\n  }\n}\n","import Item, { ItemOptions } from './Item';\nimport Path from './Path';\nimport { memoized } from '../decorators/memoized';\nimport { createItemViaJSON } from './ItemFactory';\nimport { Segment } from './types/Segment';\n\n/**\n * @class A compound path is a complex path that is made up of one or more\n * simple sub-paths. It can have the `nonzero` fill rule, or the `evenodd` rule\n * applied. Both rules use mathematical equations to determine if any region is\n * outside or inside the final shape. The `evenodd` rule is more predictable:\n * Every other region within a such a compound path is a hole, regardless of\n * path direction.\n */\nclass CompoundPath extends Item {\n  private _children: Path[] = [];\n\n  static instantiate(options: Partial<ItemOptions>, paths: Path[]) {\n    let instance = new CompoundPath(options);\n    paths.forEach(path => instance.add(createItemViaJSON(path)));\n    return instance;\n  }\n\n  constructor(options: Partial<ItemOptions>, paths: Path[]  = []) {\n    super(options);\n    this._children = paths;\n  }\n\n  add(path: Path) {\n    this._children.push(path);\n  }\n\n  /**\n   * Get children.\n   */\n  get children() {\n    return this._children;\n  }\n\n  /**\n   * Get segments\n   */\n  get segments() {\n    let children = this._children,\n      segments: Segment[] = [];\n    for (let i = 0, l = children.length; i < l; i++) {\n      segments.push.apply(segments, children[i].segments);\n    }\n    return segments;\n  }\n\n  /**\n   * get bounds of path. It's a memoized getter for performance.\n   */\n  @memoized()\n  get bounds() {\n    return this.uniteBoundsOfChildren(this.children);\n  }\n\n  _draw(ctx: CanvasRenderingContext2D) {\n    this._children.forEach(path => path.draw(ctx));\n    return this;\n  }\n\n  _toJSON() {\n    return this._children.map(item => item.toJSON());\n  }\n}\n\nexport default CompoundPath;\n","import Rectangle from './shape/Rectangle';\nimport Line from './shape/Line';\nimport Arrow from './shape/Arrow';\nimport Triangle from './shape/Triangle';\nimport Ellipse from './shape/Ellipse';\nimport Star from './shape/Star';\nimport Writing from './shape/Writing';\nimport Text from './shape/Text';\nimport ChatBox from './shape/ChatBox';\nimport Img from './shape/Image';\nimport Color from './types/Color';\nimport CompoundPath from './CompoundPath';\n\n/**\n * magic numbers map to shapes, copy from milkyway.\n  pointer: 0,\n  marker: 1,\n  highlighter: 2,\n  ellipse: 3,\n  line: 4,\n  triangle: 5,\n  rectangle: 6,\n  arrow: 7,\n  text: 8,\n  image: 9,\n  selector: 10,\n  eraser: 11,\n  dashed: 12,\n  rightTriangle: 13,\n  circle: 14,\n */\n\nexport const shapeTypes = {\n  pointer: { id: 0, ctor: Img },\n  marker: { id: 1, ctor: Writing },\n  highlighter: { id: 2, ctor: Writing, preset: { alpha: 0.5 } },\n  ellipse: { id: 3, ctor: Ellipse },\n  line: { id: 4, ctor: Line },\n  triangle: { id: 5, ctor: Triangle },\n  rectangle: { id: 6, ctor: Rectangle },\n  arrow: { id: 7, ctor: Arrow },\n  text: { id: 8, ctor: Text },\n  image: { id: 9, ctor: Img },\n  selector: { id: 10, ctor: Img },\n  eraser: { id: 11, ctor: Img },\n  dashed: {\n    id: 12,\n    ctor: Line,\n    preset: { dash: [10, 12] },\n  },\n  rightTriangle: { id: 13, ctor: Triangle, preset: { right: true } },\n  circle: { id: 14 },\n  star: { id: 15, ctor: Star },\n  chatBox: { id: 16, ctor: ChatBox },\n  compoundPath: { id: 100, ctor: CompoundPath },\n  material: { id: 9.1, ctor: Img },\n};\n\nconst idMap = {};\nfor (let key in shapeTypes) {\n  idMap[shapeTypes[key].id] = key;\n}\n\nfunction normalizeStyle(style: any) {\n  let ret: any = {};\n\n  if (!style) return ret;\n\n  let strokeColor = style.sc || style.strokeColor;\n  let fillColor = style.fc || style.fillColor;\n  let color = style.c || style.color;\n\n  let lineWidth = typeof style.w === 'number' ? style.w : style.width;\n  let fontSize = typeof style.f === 'number' ? style.f : style.fontSize;\n\n  if (strokeColor || color) {\n    ret.strokeStyle = new Color(strokeColor || color); //\n  }\n\n  if (fillColor || color) {\n    ret.fillStyle = new Color(fillColor || color);\n  }\n\n  if (typeof lineWidth === 'number') {\n    ret.lineWidth = lineWidth;\n  }\n\n  if (typeof fontSize === 'number') {\n    ret.fontSize = fontSize;\n  }\n\n  return ret;\n}\n\n/**\n * format [type, id, dataArr, style]\n * e.g. [3,112481770,[[413,200],[588,378]],{\"c\":\"#8ecf54\",\"w\":2,\"f\":20}]\n *\n * @param json\n */\nexport function createItemViaJSON(json: any[] | any) {\n  let [typeId, id, data, style] = json,\n    type = idMap[typeId],\n    shape = shapeTypes[type],\n    preset = shape.preset || {},\n    ctor = shape && shape.ctor;\n\n  if (!ctor) throw new TypeError(`Invalid json!`);\n\n  style = normalizeStyle(style);\n\n  let options = {\n    typeId,\n    type,\n    id,\n    style,\n    ...preset,\n  };\n\n  let ins = ctor.instantiate(options, data);\n\n  //workaround: if fillStyle is true, set fill-mode in shape;\n  // if (style.fillStyle) {\n  //   ins.fill = true;\n  // }\n\n  return ins;\n}\n\n/**\n *\n * @param type\n * @param style, Style of item.\n */\nexport function createItem(type: string, style = {}) {\n  // attach to nebula!\n  let shape = shapeTypes[type],\n    ctor = shape.ctor,\n    typeId = shape.id,\n    preset = shape.preset || {};\n\n  if (!ctor) throw new Error(`Can't find specified graphic '${type}'!`);\n\n  style = normalizeStyle(style);\n  let options = {\n    typeId,\n    type,\n    style,\n    ...preset,\n  };\n\n  return new ctor(options);\n}\n\n/**\n * registry shapes\n * @param {*} type\n * @param {*} ctor\n * @param {*} id\n */\nexport function registerShape(type: string, ctor: { new(...args: any[]): any }, id: number) {\n  if (shapeTypes[type]) throw new Error(`Shape '${type}' already exist!`);\n\n  shapeTypes[type] = { ctor, id };\n}\n","import { createItem } from '../../graphic/ItemFactory';\n\n/**\n * Enable tool add item on mouse event triggered!\n * @param {Object} style\n */\nexport default function itemCreator(style = {}): { [key: string]: any } {\n  return {\n    _style: style,\n\n    /**\n     * Set style of tool. It will apply to the created item.\n     */\n    set style(value) {\n      this._style = value;\n    },\n\n    /**\n     * Set style of tool\n     */\n    get style() {\n      return this._style;\n    },\n\n    /**\n     * Create item and add to item-collection before mouse down.\n     */\n    onBeforeMouseDown() {\n      this.currentShape = createItem(this.type, this.style);\n      this.items.add(this.currentShape);\n    },\n  };\n}\n","import Tool from './Tool';\nimport cursor from './mixins/cursor';\nimport { deepMixin } from '../decorators/mixin';\nimport itemCreator from './mixins/itemCreator';\n\nimport Point from '../graphic/types/Point';\nimport Shape from '../graphic/Shape';\nimport { CustomizeMouseEvent } from '../Whiteboard/EventType';\n\n\nconst markerCursor = 'https://www-stage.tutormeetplus.com/v2/static/media/pen.3ec0e0e7.png';\nconst highlighterCursor = 'https://www-stage.tutormeetplus.com/v2/static/media/mark_pen.901db183.png';\n\n/**\n * Base class og marker tool & highlighter tool.\n */\nclass FreeDrawing extends Tool {\n  // _style = {};\n\n  private lastPoint!: Point;\n  public currentShape!: Shape | null\n  /**\n   * Invoked on mouse down\n   * @param event\n   */\n  onMouseDown(event: CustomizeMouseEvent) {\n    if (!this.currentShape) return;\n    this.currentShape.moveTo(event.point);\n    this.lastPoint = event.point;\n  }\n\n  /**\n   * Invoked on mouse move\n   * @param event\n   */\n  onMouseDrag(event: CustomizeMouseEvent) {\n    if (!this.currentShape) return;\n    const point = event.point;\n    const midPoint = point.midPointFrom(this.lastPoint);\n    this.currentShape.quadraticCurveTo(this.lastPoint, midPoint);\n    this.lastPoint = point;\n  }\n\n  /**\n   * Invoked on mouse up\n   */\n  onMouseUp(_event: CustomizeMouseEvent) {\n    if (!this.currentShape) return;\n    this.currentShape.simplify();\n    this.globalCtx.emit('item:add', this.currentShape.toJSON());\n    this.currentShape = null;\n  }\n}\n\n/**\n * 白板笔工具\n *\n * Inject following behaviors for tool 'Marker'\n * 1) 当mousedown时新建Item\n * 2) 在鼠标移动时生成一个“白板笔”光标\n */\n@deepMixin(itemCreator())\n@deepMixin(cursor(markerCursor, { x: 13, y: -15 }))\nclass Marker extends FreeDrawing {}\n\n/**\n * 荧光笔工具\n *\n * Inject following behaviors for tool 'Marker'\n * 1) 当mousedown时新建Item\n * 2) 在鼠标移动时生成一个“荧光笔”光标\n */\n@deepMixin(itemCreator())\n@deepMixin(cursor(highlighterCursor, { x: 12, y: -12 }))\nclass Highlighter extends FreeDrawing {}\n\nexport { Marker, Highlighter };\n","import Rectangle from '../../graphic/shape/Rectangle';\nimport { CustomizeMouseEvent } from '../../Whiteboard/EventType';\n\nconst defaultStyle = {\n  strokeStyle: '#aaa',\n  lineWidth: 1,\n  dashArray: [5, 2],\n};\n\n\n/**\n *\n * enable tool has drag behavior.\n * 使工具在拖拽时，生成一个虚线辅助框, 该辅助框在开始拖拽时生成，\n *\n * @param {Object} style\n * @param {Boolean} removeOnNextDrag, If true drag-rect will be removed on next mouse-down, else on mouse-up\n */\nexport default function dragBounds(style = {}, removeOnNextDrag = false): { [key: string]: any } {\n  style = Object.assign({}, defaultStyle, style);\n\n  return {\n\n    _dragRect: new Rectangle({ style }),\n\n    get dragRect() {\n      return this._dragRect;\n    },\n\n    /**\n     * Add drag rectangle when mousemove.\n     * @param {*} param0\n     */\n    onMouseDown(event: CustomizeMouseEvent) {\n      const { point } = event;\n      if (this.mode !== 'select') return;\n\n      if (removeOnNextDrag) this.dragRect.remove();\n      this.dragRect.startPoint = this.dragRect.endPoint = point;\n      this.layer.items.add(this.dragRect);\n    },\n\n    /**\n     * Set size of drag rectangle.\n     * @param {*} param0\n     */\n    onMouseDrag(event: CustomizeMouseEvent) {\n      const { point } = event;\n      if (this.mode !== 'select') return;\n      this.dragRect.endPoint = point;\n    },\n\n    /**\n     * Remove drag rect when mouse-up.\n     * @param {*} param0\n     */\n    onMouseUp() {\n      //reset mode to 'select' on mouse up.\n      this.mode = 'select';\n      if (!removeOnNextDrag) this.dragRect.remove();\n    },\n  };\n}\n","import Tool from './Tool';\nimport Shape from '../graphic/Shape'\nimport dragBounds from './mixins/dragBounds';\nimport { deepMixin } from '../decorators/mixin';\nimport itemCreator from './mixins/itemCreator';\n\nimport { CustomizeMouseEvent } from '../Whiteboard/EventType';\n\n/**\n * 绘制两点图形工具\n */\n@deepMixin(\n  dragBounds({\n    strokeStyle: 'rgb(255,163,0)',\n    lineWidth: 1,\n  })\n)\n@deepMixin(itemCreator())\nclass ShapeDrawing extends Tool {\n\n  public currentShape!: Shape | null;\n\n  onMouseDown(event: CustomizeMouseEvent) {\n    if (!this.currentShape) return;\n    this.currentShape.startPoint = this.currentShape.endPoint = event.point;\n  }\n\n  onMouseDrag(event: CustomizeMouseEvent) {\n    if (!this.currentShape) return;\n    this.currentShape.endPoint = event.point;\n  }\n\n  onMouseUp(_event: CustomizeMouseEvent) {\n    if (!this.currentShape) return;\n    this.globalCtx.emit('item:add', this.currentShape.toJSON());\n    this.currentShape = null;  // think about that; beforeMouseDown will refresh this.currentShape\n  }\n}\n\nexport default ShapeDrawing;\n","import { CustomizeMouseEvent } from '../../Whiteboard/EventType';\nimport Point from '../../graphic/types/Point';\nimport Item from '../../graphic/Item';\n/**\n * enable tool has select behavior.\n */\nexport default function selectable(_multiSelect = true): { [key: string]: any } {\n  return {\n    _downPoint: null,\n    _lastSelected: [],\n    _selected: [],\n\n    onMouseDown(event: CustomizeMouseEvent) {\n      this._downPoint = event.point;\n\n      if (this._pointOnElement(this._downPoint)) {\n        this.mode = 'move';\n        if (this.target.selected) return false;\n        this.items.unselect();\n        this.target.selected = true;\n        this._selected = [this.target];\n        return true;\n      }\n      this.mode = 'select';\n      return true;\n    },\n\n    onMouseDrag(event: CustomizeMouseEvent) {\n      if (this.mode !== 'select') return;\n\n      let point = event.point;\n      this.dragRect.endPoint = point;\n      this._selected = this.items.filter((item: Item) => (item.selected = this.dragRect.bounds.containsRect(item.bounds)));\n    },\n\n    onMouseMove(event: CustomizeMouseEvent) {\n      const { point } = event;\n      let isPointOnElement = this._pointOnElement(point);\n      if (isPointOnElement) {\n        let { target } = this;\n        target.emit('hover', { target });\n      }\n      return !isPointOnElement;\n    },\n\n    _pointOnElement(point: Point) {\n      for (let len = this.items.length, i = len, item; i > 0; i--) {\n        // find from right\n        item = this.items.get(i - 1);\n        if (item.containsPoint(point)) {\n          this.target = item;\n          this.setLayerCursor('all-scroll');\n          return true;\n        }\n      }\n      return false;\n    },\n  };\n}\n","//@ts-ignore\nimport { boundsPoi } from '../algorithm/corner';\nimport Point from '../types/Point';\nimport Item from '../Item';\nimport { observeProps } from '../../decorators/memoized';\nimport Rect from '../types/Rect';\n\nconst POINT_WIDTH = 4;\nconst OFFSET = POINT_WIDTH / 2;\nconst fillStyle = '#009dec';\nconst strokeStyle = '#96cef6';\n/**\n * 拖动缩放的辅助框\n * simple axes\n */\n@observeProps({\n  /**\n   * 是否有Sub grid\n   */\n  showRotate: { type: Boolean, default: true },\n})\nexport default class ControlRect extends Item {\n  public rotateControlPoint!: Point;  // check is usable\n  public showRotate!: Boolean;\n\n  protected _draw(ctx:CanvasRenderingContext2D) {\n    const bounds = this.bounds;\n    ctx.save();\n    ctx.fillStyle = fillStyle;\n    ctx.lineWidth = 1;\n    ctx.strokeStyle = strokeStyle;\n    ctx.beginPath();\n    // 设置上一个点为最后一个点\n    //@ts-ignore\n    let lastPoint = bounds[boundsPoi[boundsPoi.length - 1]];\n    let point;\n    ctx.moveTo(lastPoint.x, lastPoint.y);\n    //@ts-ignore\n    boundsPoi.forEach(key => {\n      point = bounds[key];\n      ctx.lineTo(point.x, point.y);\n      ctx.fillRect(point.x - OFFSET, point.y - OFFSET, POINT_WIDTH, POINT_WIDTH);\n      lastPoint = point;\n    });\n\n    if (this.showRotate) {\n      //TODO: bounds no topCenter\n      //@ts-ignore\n      const tc = bounds.topCenter;\n      ctx.moveTo(tc.x, tc.y);\n      point = tc.add(new Point(0, -50));\n      this.rotateControlPoint = point;\n      ctx.lineTo(point.x, point.y);\n      ctx.fillRect(point.x - OFFSET, point.y - OFFSET, POINT_WIDTH, POINT_WIDTH);\n    }\n\n    ctx.stroke();\n    ctx.restore();\n    return this;\n  }\n\n  /**\n   * just for ts lint, no sense\n   */\n  protected _toJSON() {\n    return [];\n  }\n\n  /**\n   * just for ts lint, no sense\n   */\n  get bounds(): Rect { return new Rect(0, 0, 0, 0) }\n}\n","import Item, { ItemOptions } from './Item';\nimport ControlRect from './component/ControlRect';\nimport { observeProps } from '../decorators/memoized';\n/**\n * 图形成组，包括Path, Image, Text, CompoundPath\n * 用于成组的transform, delete\n */\n\n@observeProps({\n  children: { type: Array, default: [] },\n})\nclass Group extends Item {\n  private control: ControlRect;\n\n  constructor(options?: Partial<ItemOptions>, items: Item[] = []) {\n    super(options);\n    this.children = items;\n    this.control = new ControlRect({ linked: this });\n  }\n\n  append(item: Item) {\n    this.children.push(item);\n  }\n\n  prepend(item: Item) {\n    this.children.unshift(item);\n  }\n\n  /**\n   * get bounds of path. It's a memoized getter for performance.\n   * unite all children bounds.\n   */\n  get bounds() {\n    return this.uniteBoundsOfChildren(this.children);\n  }\n\n  protected _draw(ctx:CanvasRenderingContext2D) {\n    this.control.draw(ctx);\n    return this;\n  }\n\n  /**\n   * Data for serialization.\n   */\n  protected _toJSON() {\n    return this.children.map(item => item.toJSON());\n  }\n}\n\nexport default Group;\n","import { atan2, pow, acos, pi } from './math';\n\n/**\n *\n * @param {Number} x\n * @param {Number} y\n */\nfunction getAngleXAxis(x, y) {\n  let radian = atan2(y, x);\n  if (radian < 0) return radian + 2 * pi;\n  return radian;\n}\n\n/**\n * 通过中心点、起始点和结束点获取角度（绝对值）\n *\n * @param {Point} cp, center point\n * @param {Point} sp, start point\n * @param {Point} ep, end point\n */\nexport function getAngle(cp, sp, ep) {\n  let disCS = cp.getDistance(sp);\n  let disCE = cp.getDistance(ep);\n  let disSE = sp.getDistance(ep);\n\n  let resultRadian = acos((pow(disCS, 2) + pow(disCE, 2) - pow(disSE, 2)) / (2 * disCS * disCE));\n  return (resultRadian * 180) / pi;\n}\n\n/**\n * 通过中心点、起始点和结束点获取角度（相对值）\n *\n * @param {Point} cp, center point\n * @param {Point} sp, start point\n * @param {Point} ep, end point\n */\nexport function getAngle2(cp, sp, ep) {\n  let radian = getAngleXAxis((ep.x - cp.x) / (ep.y - cp.y)) - getAngleXAxis(atan2(sp.x - cp.x, sp.y - cp.y));\n  return (radian * 180) / pi;\n}\n","import Group from '../../graphic/Group';\n//@ts-ignore\nimport { boundsPoi, antiDir, cursorMap } from '../../graphic/algorithm/corner';\nimport { getAngle } from '../../graphic/algorithm/trigonometry';\n\nimport { CustomizeMouseEvent } from '../../Whiteboard/EventType';\nimport Point from '../../graphic/types/Point';\nimport Item from '../../graphic/Item';\nimport { Rect } from '../..';\n/**\n * enable tool has transform behavior.\n * 依赖于selectable, 必须选中才可以tranform\n * 使工具可以变形（移动、旋转、缩放）白板Item\n */\nexport default function transformable(enableRotate = false): { [key: string]: any } {\n  return {\n    realTimeSize: null,\n    enableRotate,\n    actionData: null,\n\n    _init() {\n      this.transformGroup = new Group({}, []);\n    },\n\n    onMouseDown(event: CustomizeMouseEvent) {\n      this._downPoint = event.point;\n\n      this.layer.items.set(this.transformGroup);\n      this.transformGroup.children = this._selected;\n\n      let action = this._pointOnResize(this._downPoint);\n\n      if (action !== '') {\n        this.mode = action;\n      } else if (this.mode === 'select') {\n        this.items.unselect();\n        this.transformGroup.children = [];\n        return true;\n      }\n      return false;\n    },\n\n    onMouseDrag(event: CustomizeMouseEvent) {\n      const { delta, point } = event;\n      if (this.mode === 'select') {\n        this.transformGroup.children = this._selected;\n      } else if (this.mode === 'resize') {\n        this.corner = this.corner.add(delta);\n        let size = this.corner.subtract(this.basePoint);\n        if (!this.actionData) {\n          this.originSize = size; // record origin size\n        }\n\n        let sx = 1.0,\n          sy = 1.0,\n          originSx = 1.0,\n          originSy = 1.0;\n        if (\n          Math.abs(this.realTimeSize.x) > 0.0000001 &&\n          this.resizeDir !== 'topCenter' &&\n          this.resizeDir !== 'bottomCenter'\n        )\n          {\n            sx = size.x / this.realTimeSize.x;\n          originSx = size.x / this.originSize.x;\n          }\n        if (\n          Math.abs(this.realTimeSize.y) > 0.0000001 &&\n          this.resizeDir !== 'leftCenter' &&\n          this.resizeDir !== 'rightCenter'\n        ) {\n          sy = size.y / this.realTimeSize.y;\n          originSy = size.y / this.originSize.y;\n        }\n\n        this.target.scale(sx, sy, this.basePoint);\n        this.realTimeSize = size;\n        this.actionData = [originSx, originSy, this.basePoint.x, this.basePoint.y];\n      } else if (this.mode === 'move') {\n        this.transformGroup.translate(delta);\n        this.actionData = this.actionData ? this.actionData.add(delta) : delta;\n      } else if (this.mode === 'rotate') {\n        let lastPoint = point.subtract(delta);\n        let angle = getAngle(this.transformGroup.bounds.center, lastPoint, point);\n        this.transformGroup.rotate(angle);\n        this.actionData += angle;\n      }\n    },\n\n    onMouseUp() {\n      if (!this.actionData) return false;\n      const ids = this.transformGroup.children.map((item: Item) => item.id);\n      if (this.mode === 'move') {\n        this.globalCtx.emit('items:move', [ids, [this.actionData.x, this.actionData.y]]);\n      } else if (this.mode === 'resize') {\n        this.globalCtx.emit('items:resize', [ids, this.actionData]);\n      } else if (this.mode === 'rotate') {\n        this.globalCtx.emit('items:rotate', [ids, this.actionData]);\n      }\n      this.actionData = null;\n    },\n\n    onMouseMove(event: CustomizeMouseEvent) {\n      const { point } = event;\n      return !this._pointOnResize(point);\n    },\n\n    _pointOnResize(point: Point) {\n      let corner, bounds: Rect;\n\n      let rotatePoint = this.transformGroup.control.rotateControlPoint;\n      if (this.enableRotate && rotatePoint && point.nearby(rotatePoint)) {\n        this.setLayerCursor('pointer');\n        return 'rotate';\n      }\n\n      bounds = this.transformGroup.bounds;\n      //@ts-ignore\n      corner = boundsPoi.find(key => point.nearby(bounds[key]));\n\n      if (!corner) {\n        this.setLayerCursor('default');\n        return '';\n      }\n\n      this.setLayerCursor(cursorMap[corner]);\n      this.basePoint = bounds[antiDir[corner]];\n      this.target = bounds.owner;\n      this.corner = bounds[corner];\n      this.resizeDir = corner;\n      this.realTimeSize = this.corner.subtract(this.basePoint);\n      return 'resize';\n    },\n  };\n}\n","import Tool from './Tool';\nimport dragBounds from './mixins/dragBounds';\nimport selectable from './mixins/selectable';\nimport transformable from './mixins/transformable';\nimport { deepMixin } from '../decorators/mixin';\n\n/**\n * Select Tool of whiteboard.\n *\n * Inject following behaviors for tool 'Selection'\n * 1) 当拖拽时生成“拖拽框”\n * 2) 当拖拽时选中白板Items\n * 3）当拖拽控制点时可以变形Items\n */\n@deepMixin(dragBounds())\n@deepMixin(transformable())\n@deepMixin(selectable())\nclass Selection extends Tool {} // TODO : try to fix via doc of ts\n\nexport default Selection;\n","import Tool from './Tool';\nimport dragBounds from './mixins/dragBounds';\nimport cursor from './mixins/cursor';\nimport { deepMixin } from '../decorators/mixin';\nimport Rectangle from '../graphic/shape/Rectangle';\nimport { CustomizeMouseEvent } from '../Whiteboard/EventType';\nimport Point from '../graphic/types/Point';\n\ninterface Pointer {\n  dragRect: Rectangle\n}\n\n/**\n * Pointer of whiteboard.\n *\n * Inject following behaviors for tool 'Pointer'\n * 1) 当拖拽时生成“拖拽框”，默认时红色\n * 2) 在鼠标移动时生成一个“指挥棒”，并实时发送“指挥棒”位置数据\n * 3）需要能够在接收端看到“拖拽框”\n */\n@deepMixin(\n  dragBounds(\n    {\n      strokeStyle: '#f00',\n      lineWidth: 2,\n    },\n    true\n  )\n)\n@deepMixin(\n  cursor('https://www-stage.tutormeetplus.com/v2/static/media/mouse_pointer.64a36561.png', {\n    x: 11,\n    y: -12,\n  })\n)\nclass Pointer extends Tool {\n\n  private _move!: (point: Point) => void;\n  private onMouseEnter!: () => void;\n\n  onMouseDrag(event: CustomizeMouseEvent) {\n    const { point } = event;\n    this.globalCtx.emit('pointer:move', ['m', [point.x, point.y]]); // TODO: delete\n  }\n  onMouseMove(event: CustomizeMouseEvent) {\n    const { point } = event;\n    this.globalCtx.emit('pointer:move', ['m', [point.x, point.y]]);\n  }\n  onMouseUp() {\n    this.globalCtx.emit('pointer:draw', ['d', this.dragRect.toJSON()]);\n  }\n\n  /**\n  * draw rect by json\n  */\n  moveByJSON(json: any) {\n    if (json[0] === 'm') {\n      this.onMouseEnter();\n      this._move(new Point(json[1][0], json[1][1]))\n    } else if (json[0] === 'd') {\n      const [sp, ep] = json[1][2];\n      this.dragRect.remove();\n      this.dragRect.startPoint = new Point(sp[0], sp[1]);\n      this.dragRect.endPoint = new Point(ep[0], ep[1]);\n      this.layer.items.add(this.dragRect);\n    }\n  }\n}\n\nexport default Pointer;\n","import Tool from './Tool';\nimport dragBounds from './mixins/dragBounds';\nimport cursor from './mixins/cursor';\nimport selectable from './mixins/selectable';\nimport { deepMixin } from '../decorators/mixin';\n/**\n * Eraser， 橡皮擦工具\n *\n * Inject following behaviors for tool 'Eraser'\n *\n * 1) 当鼠标点击时，删除选中元素\n * 2) 当拖拽时生成“拖拽框”，并在鼠标释放时删除所有选中元素\n * 3）当在移动时显示光标为“橡皮擦”\n */\n@deepMixin(selectable()) //decorator 作用与class越近越早生效\n@deepMixin(dragBounds())\n@deepMixin(\n  cursor('https://www-stage.tutormeetplus.com/v2/static/media/eraser.352bd893.png', {\n    x: 8,\n    y: -8, //magic number for appropriate offset of eraser image.\n  })\n)\nexport default class Eraser extends Tool {\n  onMouseUp() {\n    this.items.deleteSelected();\n  }\n}\n","import Tool from './Tool';\nimport ShapeText from '../graphic/shape/Text';\nimport { deepMixin } from '../decorators/mixin';\nimport itemCreator from './mixins/itemCreator';\nimport { CustomizeMouseEvent } from '../Whiteboard/EventType';\n\n/**\n * Tool to input text on whiteboard\n */\n@deepMixin(itemCreator())\nexport default class Text extends Tool {\n\n  public currentShape!: ShapeText;\n  constructor(type: IToolType) {\n    super(type);\n    window.drawText = this.drawText.bind(this); // for test\n  }\n\n  onMouseDown(event: CustomizeMouseEvent) {\n    this.currentShape.editable = true;\n    this.currentShape.startPoint = this.currentShape.endPoint = event.point;\n    this.currentShape.textWrapper = this.globalCtx.textWrapper;\n    this.currentShape.zoom = this.globalCtx.zoom;\n    this.items.add(this.currentShape);\n    this.globalCtx.emit('item:add', this.currentShape.toJSON());\n    this.currentShape.onTyping = value => this.globalCtx.emit('item:typing', value);\n  }\n\n  drawText() {\n    this.items.filter(item => item.type === this.type).map(item => item.drawTextImg())\n  }\n\n  /**\n   * set all Text disabled\n   * toolChanged\n   */\n  public toolChanged({ type }: { type: IToolType }) {\n    this.items.filter(item => item.type === this.type).map(item => {\n      item.editable = type === this.type;\n    });\n  }\n}\n","import Point from '../../graphic/types/Point';\nimport { CustomizeMouseEvent } from '../../Whiteboard/EventType';\nimport { Segment } from '../../graphic/types/Segment';\n/**\n * enable tool has mutate behavior.\n */\nexport default function mutable(): { [key: string]: any } {\n  return {\n    onMouseDown(event: CustomizeMouseEvent) {\n      const { point } = event;\n      if (this._pointOnPoint(point)) {\n        return;\n      }\n    },\n\n    onMouseDrag(event: CustomizeMouseEvent) {\n      const { point } = event;\n      if (this.mode === 'mutate') {\n        this.targetPoint.assign(point);\n        this.target.changed();\n      }\n    },\n\n    onMouseMove(event: CustomizeMouseEvent) {\n      const { point } = event;\n      return !this._pointOnPoint(point);\n    },\n\n    _pointOnPoint(point: Point) {\n      let nearbyPoint, seg, segments: Segment[];\n      for (let item of this.items) {\n        segments = item.segments;\n\n        if (!segments) continue;\n\n        for (let j = 0; j < segments.length; j++) {\n          seg = segments[j];\n          if (seg.command !== 'C') continue;\n          nearbyPoint = seg.points.find(p => point.nearby(p));\n          if (nearbyPoint) break;\n        }\n        if (nearbyPoint) break;\n      }\n      if (nearbyPoint) {\n        this.mode = 'mutate';\n        this.setLayerCursor('pointer');\n        seg && (this.target = seg.owner);\n        this.targetPoint = nearbyPoint;\n        return true;\n      }\n\n      this.setLayerCursor('default');\n      return false;\n    },\n  };\n}\n","import Tool from './Tool';\nimport mutable from './mixins/mutable';\nimport { deepMixin } from '../decorators/mixin';\n\n/**\n * Mutate Path of shape.\n *\n * 通过拖拽Segment控制点，变形Path\n */\n@deepMixin(mutable())\nclass PathMutator extends Tool {}\n\nexport default PathMutator;\n","/**\n * Register tools\n */\nimport ArcDrawing from './ArcDrawing';\nimport { Marker, Highlighter } from './FreeDrawing';\nimport ShapeDrawing from './ShapeDrawing';\nimport Selection from './Selection';\nimport Pointer from './Pointer';\nimport Eraser from './Eraser';\nimport TextInput from './TextInput';\nimport PathMutator from './PathMutator';\n\n//tools map.\nconst tools = {};\nconst shapeDrawingTools = [\n  'rectangle',\n  'triangle',\n  'rightTriangle',\n  'ellipse',\n  'arrow',\n  'line',\n  'dashed',\n  'star',\n  'chatBox',\n];\n\nconst toolTypes: string[] = [];\n\nfunction create() {\n  registerTool('marker', Marker);\n  registerTool('highlighter', Highlighter);\n  shapeDrawingTools.forEach(toolName => registerTool(toolName, ShapeDrawing));\n  registerTool('arc', ArcDrawing);\n  registerTool('selection', Selection);\n  registerTool('pointer', Pointer);\n  registerTool('text', TextInput);\n  registerTool('eraser', Eraser);\n  registerTool('pathMutator', PathMutator);\n}\n\nfunction registerTool(name: string, ctor: { new(...args: any[]): any }) {\n  if (tools[name]) throw new Error(`Tool ${name} already exist!`);\n  tools[name] = new ctor(name);\n  toolTypes.push(name);\n  return tools[name];\n}\n\nfunction getTool(name: string) {\n  if (typeof name !== 'string') throw new TypeError('setter value must be string!');\n  if (!tools[name]) throw new Error(`can't specify tool ${name}!`);\n  return tools[name];\n}\n\ncreate();\n\nexport { registerTool, getTool, toolTypes };\n","import Item from '../Item';\nimport { observeProps } from '../../decorators/memoized';\nimport Rect from '../types/Rect';\n\n/**\n * 简单网格\n * Component Grid.\n */\n@observeProps({\n  /**\n   * 是否有Sub grid\n   */\n  minor: { type: Boolean, default: true },\n})\nexport default class Grid extends Item {\n\n  public minor!: Boolean;\n  protected _draw(ctx: CanvasRenderingContext2D) {\n    let { width, height } = this.layer;\n    ctx.save();\n    //preset context2d styles\n    ctx.lineWidth = 1;\n    // ctx.fontSize = 10;\n    ctx.font = '9px serif';\n\n    //draw vertical lines\n    if (this.minor) this.drawMinorGrid(ctx, width, height);\n    this.drawMajorGrid(ctx, width, height);\n    ctx.restore();\n    return this;\n  }\n\n  private drawMajorGrid(ctx: CanvasRenderingContext2D, width: number, height: number) {\n    ctx.strokeStyle = '#c0c0c0';\n    let x = 0;\n    while (x < width) {\n      x += 50;\n      this.drawLine(ctx, x, 0, x, height);\n      this.drawPixelText(ctx, x.toString(), x, 9);\n    }\n    //draw horizontal lines\n    let y = 0;\n    while (y < height) {\n      y += 50;\n      this.drawLine(ctx, 0, y, width, y);\n      this.drawPixelText(ctx, y.toString(), 0, y);\n    }\n  }\n\n  private drawMinorGrid(ctx: CanvasRenderingContext2D, width: number, height: number) {\n    ctx.strokeStyle = '#f0f0f0';\n    let x = 0;\n    while (x < width) {\n      x += 10;\n      this.drawLine(ctx, x, 0, x, height);\n    }\n    //draw horizontal lines\n    let y = 0;\n    while (y < height) {\n      y += 10;\n      this.drawLine(ctx, 0, y, width, y);\n    }\n  }\n\n  private drawLine(ctx: CanvasRenderingContext2D, x1: number, y1: number, x2: number, y2: number) {\n    ctx.beginPath();\n    ctx.moveTo(x1, y1);\n    ctx.lineTo(x2, y2);\n    ctx.stroke();\n  }\n\n  private drawPixelText(ctx: CanvasRenderingContext2D, text: string, x: number, y: number) {\n    ctx.fillText(text, x, y);\n  }\n\n  /**\n   * just for ts lint, no sense\n   */\n  public _toJSON() {\n    return [];\n  }\n\n  /**\n   * just for ts lint, no sense\n   */\n  public get bounds(): Rect { return new Rect(0, 0, 0, 0) }\n}\n","import Item from '../Item';\nimport { observeProps } from '../../decorators/memoized';\nimport Rect from '../types/Rect';\n\n// const defaultOptions = {\n//   showX: true,\n//   showY: true,\n//   mode: 'numeric',\n//   position: 'center',\n// };\n\nconst gap = 50; //in pixels\n\n/**\n * 简单坐标轴\n * simple axes\n */\n@observeProps({\n  /**\n   * 是否有Sub grid\n   */\n  showX: { type: Boolean, default: true },\n  showY: { type: Boolean, default: true },\n})\nexport default class Axes extends Item {\n  private minX = 0;\n  private minY = 0;\n\n  protected showX!: boolean;\n  protected showY!: boolean;\n\n  constructor(options = {}) {\n    super(options);\n  }\n\n  /**\n   * draw X axis\n   * @param ctx\n   * @param width\n   * @param height\n   */\n  drawXAxis(ctx: CanvasRenderingContext2D, width: number, height: number) {\n    this.drawLine(ctx, 0, height / 2, width, height / 2);\n\n    let mark = this.minX;\n    let x = 10;\n\n    while (x < width) {\n      x += gap;\n      mark++;\n      this.drawMark(ctx, x, height / 2, mark);\n    }\n\n    ctx.stroke();\n  }\n\n  drawYAxis(ctx: CanvasRenderingContext2D, width: number, height: number) {\n    this.drawLine(ctx, width / 2, height, width / 2, 0);\n    let mark = this.minY;\n    let y = height;\n\n    while (y > 0) {\n      y -= gap;\n      mark++;\n      this.drawMarkY(ctx, width / 2, y, mark);\n    }\n\n    ctx.stroke();\n  }\n\n  drawMarkY(ctx: CanvasRenderingContext2D, x: number, y: number, mark: number) {\n    ctx.moveTo(x, y);\n    ctx.lineTo(x - 4, y);\n    ctx.fillText(mark.toString(), x - 12, y - 6);\n  }\n\n  drawMark(ctx: CanvasRenderingContext2D, x: number, y: number, mark: number) {\n    ctx.moveTo(x, y);\n    ctx.lineTo(x, y + 4);\n    ctx.fillText(mark.toString(), x - 3, y + 15);\n  }\n\n  drawLine(ctx: CanvasRenderingContext2D, x1: number, y1: number, x2: number, y2: number) {\n    ctx.beginPath();\n    ctx.moveTo(x1, y1);\n    ctx.lineTo(x2, y2);\n  }\n\n  protected _draw(ctx: CanvasRenderingContext2D): Item {\n    let { width, height } = this.layer;\n    ctx.lineWidth = 1;\n    // ctx.fontSize = 10;\n    ctx.font = '9px serif';\n    ctx.strokeStyle = '#000';\n\n    this.minX = -Math.floor(width / gap / 2);\n    this.minY = -Math.floor(height / gap / 2);\n\n    if (this.showX) {\n      this.drawXAxis(ctx, width, height);\n    }\n\n    if (this.showY) {\n      this.drawYAxis(ctx, width, height);\n    }\n    return this;\n  }\n\n  /**\n   * just for ts lint, no sense\n   */\n  protected _toJSON() {\n    return [];\n  }\n\n  /**\n   * just for ts lint, no sense\n   */\n  get bounds(): Rect { return new Rect(0, 0, 0, 0) }\n}\n","import Img from '../graphic/shape/Image';\n\ninterface ICached {\n  [url: string]: Img\n}\n/**\n * Manage & cache materials of whiteboard.\n */\nexport default class MaterialProvider {\n  private cached: ICached = {};\n  private preload = 1;\n  private length = 0;\n\n  /**\n   * Init MaterialProvider with image src list. order-sensitive\n   * @param images image src list\n   */\n  constructor(images?: string[]) {\n    if (!images) return;\n\n    for (let url of images) {\n      let material = new Img({}, url);\n      if (this.length < this.preload) material.loadImage();\n      this.length++;\n      this.cached[url] = material;\n    }\n  }\n\n  /**\n   * Get material image by url.\n   * @param url\n   */\n  get(url: string) {\n    let cached = this.cached;\n    if (cached[url]) return cached[url];\n    let material = new Img({}, url);\n    this.length++;\n    cached[url] = material;\n    return cached[url];\n  }\n\n  /**\n   * Remove material image by url.\n   * @param url\n   */\n  remove(url: string) {\n    let img = this.cached[url];\n    delete this.cached[url];\n    this.length--;\n    return img;\n  }\n\n  clear() {\n    this.cached = {};\n  }\n\n}\n","/**\n * enum of action type\n */\n// const ActionType = {\n//   translate: 'translate',\n//   add: 'add',\n//   remove: 'remove',\n//   scale: 'scale',\n//   typing: 'typing',\n// };\n\n/**\n * Action of redo-undo history\n */\nexport default class Action {\n  public type: \"translate\" | \"add\" | \"scale\" | \"typing\";\n\n  recordTimeStamp = +new Date();\n  private _redo!: object;\n  private _undo!: object;\n  // private _hot = 0; // 操作热度计数\n\n  constructor(delta: any) {\n    this.type = delta.type;\n    this._redo = {};\n  }\n\n  /**\n   * Get undo-action for current action\n   * @param {Object} delta\n   * @param {Object} oldDelta used fro anti-action\n   */\n  _calcUndo(delta: any) { // delete oldDelta\n    let hash = delta.data;\n    switch (delta.action) {\n      case 'ADD':\n        return Object.assign({}, delta, {\n          action: 'DELETE',\n        });\n      case 'DELETE':\n        return Object.assign({}, delta, {\n          action: 'ADD',\n        });\n      case 'MOVE':\n        let { x, y } = hash.offset;\n        return {\n          action: 'MOVE',\n          data: {\n            ids: hash.ids,\n            offset: { x: -x, y: -y },\n          },\n        };\n      case 'SCALE':\n        let { sx, sy, basePoint } = hash.scale;\n        return {\n          action: 'SCALE',\n          data: {\n            ids: hash.ids,\n            scale: {\n              sx: 1 / sx,\n              sy: 1 / sy,\n              basePoint,\n            },\n          },\n        };\n      case 'TYPING':\n        return {\n          action: 'TYPING',\n          data: {\n            id: hash.id,\n            value: hash.lastTypedText,\n          },\n        };\n    }\n    return null;\n  }\n\n  get redo() {\n    return this._redo;\n  }\n  get undo() {\n    return this._undo;\n  }\n}\n","import Action from './Action';\nimport emittable from '../decorators/emitter';\nimport { Point } from '..';\n// History Stack for undo/redo\n/**\n * options.maxStack : max length limit in history stack\n * options.enableKeyboard : If enable keyboard to redo-undo actions. (e.g. ctrl + z)\n *\n * methods:\n *  redo: replay last action.\n *  undo: cancel last action.\n *  record: record action in history stack.\n *  clear: clear current history stack.\n */\n//TODO: 返回undo stack 和 redo stack 为空的callback，方便UI展示按钮的disable状态\n\n\nconst defaultOptions = {\n  maxStack: 300,\n  enableKeyboard: true,\n};\n\ninterface History {\n  emit: (name: string, data: any) => void\n}\n\n@emittable()\nclass History {\n  private stack: any;\n  private options: typeof defaultOptions;\n  public lastRecorded = 0;\n  // private emit: (eventName: string, args: Object) => void;\n\n  constructor(options = {}) {\n    this.clear();\n    this.options = Object.assign({}, defaultOptions, options);\n  }\n\n  /**\n   * Clear Current Stack\n   */\n  clear() {\n    this.stack = { undo: [], redo: [] };\n    this.emit('change', { stackLength: [0, 0] });\n  }\n\n  /**\n   * Record changed and store to stack\n   * @param delta\n   */\n  record(delta: Point) {\n    if (!delta) throw TypeError('Invalid record point.');\n    // clear redo list on an new record point.\n    this.stack.redo = [];\n\n    const action = new Action(delta);\n    this.stack.undo.push(action);\n\n    if (this.stack.undo.length > this.options.maxStack) {\n      this.stack.undo.shift();\n    }\n  }\n\n  /**\n   * handle undo/redo actions\n   * @param source, \"undo\" or \"redo\"\n   * @param dest, \"redo\" or \"undo\"\n   */\n  change(source: \"redo\" | \"undo\", dest: \"redo\" | \"undo\") {\n    if (!this.options.enableKeyboard) return;\n    if (this.stack[source].length === 0) return;\n\n    let delta = this.stack[source].pop();\n    if (!delta[source]) return;\n\n    this.emit('change', {\n      action: source.toUpperCase(),\n      delta: delta[source],\n      stackLength: [this.stack.redo.length, this.stack.undo.length],\n    });\n\n    this.lastRecorded = 0;\n    this.stack[dest].push(delta);\n  }\n\n  /**\n   * Redo last undo action.\n   */\n  redo() {\n    this.change('redo', 'undo');\n  }\n\n  /**\n   * undo last record action.\n   */\n  undo() {\n    this.change('undo', 'redo');\n  }\n}\n\nexport default History;\n","/**\n * Entry of whiteboard.\n */\nimport emittable from '../decorators/emitter';\nimport Layer from './Layer';\nimport OperateLayer from './OperateLayer';\nimport { setStyle } from '../util/dom';\nimport EventHandler from './EventHandler';\nimport Rect from '../graphic/types/Rect';\nimport { getTool } from '../tools';\nimport { createItemViaJSON, createItem } from '../graphic/ItemFactory';\nimport Grid from '../graphic/component/Grid';\nimport Axes from '../graphic/component/Axes';\nimport MaterialProvider from './MaterialProvider';\nimport History from '../commands/History';\nimport Item from '../graphic/Item';\nimport Point from '../graphic/types/Point';\n\n// const _createContext = Symbol('_createContext');\nexport const defaultOptions = {\n  selectionMode: 'bounds',\n  refreshMode: 'loop',\n  width: 1000,\n  height: 800,\n  showGrid: false,\n  showAxes: false,\n  alignToGrid: false,\n  throttle: 0,\n  minDistance: 0,\n  verbose: false,\n  precision: 1,\n  zoom: 1,\n  dragThreshold: 2\n};\n\nexport type WhiteboardOptions =  {\n  container: HTMLDivElement\n}\n\n/**\n * 白板的初始化选项。\n * Initialize options of whiteboard.\n * Options:\n *\n *  - selectionMode: 'bounds', 'path'\n *  - alignToGrid: boolean 对齐到网格\n *  - loop / notify\n *  - command-mode: verbose // 当绘制时发送更多的指令\n *  - precision (精度)\n */\n@emittable()\nexport default class Whiteboard  {\n  static instances: Whiteboard[] = [];\n  private options: typeof defaultOptions & WhiteboardOptions;\n  private isLoop = false;\n  private _zoom = 1;\n  wrapper: HTMLDivElement;\n  width: number;\n  height: number;\n  backgroundLayer!: Layer;\n  activeLayer!: Layer;\n  operateLayer!: OperateLayer;\n  handler: EventHandler;\n  context: IContext;\n\n  material = new MaterialProvider();\n  emit!: () => void;\n\n  constructor(options: Partial<typeof defaultOptions> & WhiteboardOptions) {\n    this.options = Object.assign({}, defaultOptions, options);\n\n    let { container, width, height } = this.options;\n\n    /** 一个container不能加载两个白板*/\n    Whiteboard.instances.find(instance => {\n      if (instance.wrapper === container) throw new Error(\"Can't instance at same container twice!\");\n      return false;\n    });\n\n    setStyle(container, {\n      width: `${width}px`,\n      height: `${height}px`,\n      position: 'relative',\n    });\n\n    this.wrapper = container;\n    this.width = width;\n    this.height = height;\n    this.context = this._createContext();\n\n    const layerDep = {\n      wrapper: this.wrapper,\n      context: this.context\n    };\n    this.backgroundLayer = new Layer(this.width, this.height, 'background', layerDep);\n    this.activeLayer = new Layer(this.width, this.height, 'active', layerDep);\n    this.operateLayer = new OperateLayer(this.width, this.height, 'operate', layerDep);\n    //operateLayer must be last one\n    this.operateLayer.el.tabIndex = 1; //make container focusable.\n\n\n    const handler = (this.handler = new EventHandler(this.items));\n    handler.context = this.context;\n    handler.bind(this.operateLayer);\n    // this.tool = 'selection';\n\n    if (this.options.zoom !== 1) this.zoom = this.options.zoom;\n\n    this.context.zoom = this.options.zoom;\n\n    Whiteboard.instances.push(this);\n  }\n\n  /**\n   * 白板实例的context, 每个白板唯一\n   * context 可以被layers, item-collection, tools访问\n   * 注意，要区分白板实例的context，和canvas getContext\n   *\n   */\n  private _createContext() {\n    const proto = {\n      textWrapper: this.wrapper,\n      whiteboard: this,\n      currentMode: null,\n      refreshCount: 0, //刷新计数，白板所有layers刷新总次数\n      settings: Object.freeze(this.options),\n      bounds: new Rect(0, 0, this.width, this.height),\n      emit: this.emit.bind(this),\n    };\n\n    return Object.create(proto);\n  }\n\n  /**\n   * Watch mode. Redraw layer if it mark as dirty in every tick.\n   */\n  watch() {\n    if (this.isLoop === true) throw new Error(\"Can't watch twice!\");\n\n    const drawDirtyLayer = () => {\n      if (this.activeLayer.isDirty) this.activeLayer.refresh();\n      if (this.operateLayer.isDirty) this.operateLayer.refresh();\n      if (this.backgroundLayer.isDirty) this.backgroundLayer.refresh();\n      requestAnimationFrame(drawDirtyLayer);\n    };\n\n    //invoke immediately！\n    drawDirtyLayer();\n    this.isLoop = true;\n  }\n\n  /**\n   * refresh activeLayer in next tick.\n   * Ensure redraw only once in every tick.\n   */\n  refresh() {\n    requestAnimationFrame(() => this.activeLayer.refresh());\n  }\n\n  /**\n   * refresh all layers in next tick.\n   * Ensure redraw only once in every tick.\n   */\n  refreshAll() {\n    requestAnimationFrame(() => this.layers.forEach(layer => layer.refresh()));\n  }\n\n  /**\n   * get data of items in all layers.\n   */\n  get data() {\n    return this.items.toJSON();\n  }\n\n  /**\n   * Get zoom of current whiteboard.\n   */\n  get zoom() {\n    return this._zoom;\n  }\n\n  /**\n   * Set zoom of current whiteboard.\n   */\n  set zoom(radio) {\n    this._zoom = radio;\n    this.context.zoom = radio;\n    this.layers.forEach(layer => layer.zoom(radio));\n\n    setStyle(this.wrapper, {\n      width: `${this.width * radio}px`,\n      height: `${this.height * radio}px`,\n      position: 'relative',\n    });\n  }\n\n  addItem(item: Item) {\n    this.items.add(item);\n  }\n\n  createItem(type: object, style?: object): any {\n    if (!type) throw new TypeError('Argument illegal!');\n    if (typeof type === 'string') return createItem(type, style);\n    if (type instanceof Item) return type;\n    const ins = createItemViaJSON(type);\n    if (ins.type === 'text') { // TODO: need to refactor\n      ins.textWrapper = this.wrapper;\n      ins.zoom = this.zoom;\n    }\n    return ins;\n  }\n\n  typingText(json: [number, string]) {\n    const textInstance = this.items.find(item => item.id === json[0]);\n    textInstance && textInstance.input && (textInstance.input.innerHTML = json[1]);\n  }\n\n  add(json: any) {\n    let instance = this.createItem(json);\n    this.items.add(instance);\n    return instance;\n  }\n\n  remove(json: number[]) {\n    this.items.deleteById(json);\n  }\n\n  resize(json: [number[], number[]]) {\n    const ids = json[0];\n    const [sx, sy, X, Y] = json[1];\n    this.items.filter(item => ids.includes(item.id)).map(item => item.scale(sx, sy, new Point(X, Y)));\n  }\n\n  move(json: [number[], number[]]) {\n    const ids = json[0];\n    const [x, y] = json[1];\n    this.items.filter(item => ids.includes(item.id)).map(item => item.translate(new Point(x, y)));\n  }\n\n  /**\n   * Items of activeLayer is whiteboard 'real' items.\n   * It's read-only.\n   */\n  get items() {\n    return this.activeLayer.items;\n  }\n\n  set tool(val: string) {\n    this.handler.tool = getTool(val);\n  }\n\n  getTool() {\n    return this.handler.tool;\n  }\n\n  getToolByName(name: string) {\n    const tool = getTool(name);\n    tool.layer = this.handler.layer;\n    return tool;\n  }\n\n  /**\n   * Get Layers of Whiteboard.\n   */\n  get layers() {\n    return [this.backgroundLayer, this.activeLayer, this.operateLayer];\n  }\n\n  private history = new History();\n\n  redo() {\n    this.history.redo();\n  }\n  undo() {\n    this.history.undo();\n  }\n\n  command() {}\n\n  drawMaterial(url: string) {\n    const material = this.material.get(url);\n    this.backgroundLayer.items.set(material, 0);\n  }\n\n  drawGrid(minor = false) {\n    const grid = new Grid({ minor });\n    this.backgroundLayer.items.set(grid, 1);\n  }\n\n  drawAxes() {\n    const axes = new Axes();\n    this.backgroundLayer.items.set(axes, 2);\n  }\n\n  saveImage(filename = 'material', type = 'png') {\n    if (!/^jpeg|jpg|png$/.test(type)) throw new Error(`Can't support type ${type}`);\n\n    //创建离屏canvas，绘制layers；\n    const offscreenCanvas = new Layer(this.width, this.height, '', {\n      context: this.context\n    });\n    const ctx = offscreenCanvas.ctx;\n\n    this.layers.forEach(layer => ctx.drawImage(layer.el, 0, 0, this.width, this.height));\n\n    const $link = document.createElement('a');\n    function downloadCanvas() {\n      $link.href = offscreenCanvas.el.toDataURL(`image/${type}`);\n      $link.download = filename;\n      $link.click();\n    }\n\n    downloadCanvas();\n  }\n\n  dispose() {\n    const wrapper = this.wrapper;\n    //TODO: remove all canvas DOM.\n    wrapper.removeChild(this.backgroundLayer.el);\n    wrapper.removeChild(this.activeLayer.el);\n  }\n\n  /**\n   * Clear layers of whiteboard.\n   */\n  clear() {\n    this.layers.forEach(layer => layer.clear());\n    this.context.emit('layers:clear');\n    return this;\n  }\n}\n","/**\n * Adapt from  https://github.com/sole/tween.js/blob/master/src/Tween.js\n * @see http://sole.github.io/tween.js/examples/03_graphs.html\n */\nconst easing = {\n  /**\n   * @param {number} k\n   * @return {number}\n   */\n  linear(k) {\n    return k;\n  },\n\n  /**\n   * @param {number} k\n   * @return {number}\n   */\n  quadraticIn(k) {\n    return k * k;\n  },\n  /**\n   * @param {number} k\n   * @return {number}\n   */\n  quadraticOut(k) {\n    return k * (2 - k);\n  },\n  /**\n   * @param {number} k\n   * @return {number}\n   */\n  quadraticInOut(k) {\n    if ((k *= 2) < 1) {\n      return 0.5 * k * k;\n    }\n    return -0.5 * (--k * (k - 2) - 1);\n  },\n\n  // 三次方的缓动（t^3）\n  /**\n   * @param {number} k\n   * @return {number}\n   */\n  cubicIn(k) {\n    return k * k * k;\n  },\n  /**\n   * @param {number} k\n   * @return {number}\n   */\n  cubicOut(k) {\n    return --k * k * k + 1;\n  },\n  /**\n   * @param {number} k\n   * @return {number}\n   */\n  cubicInOut(k) {\n    if ((k *= 2) < 1) {\n      return 0.5 * k * k * k;\n    }\n    return 0.5 * ((k -= 2) * k * k + 2);\n  },\n\n  // 四次方的缓动（t^4）\n  /**\n   * @param {number} k\n   * @return {number}\n   */\n  quarticIn(k) {\n    return k * k * k * k;\n  },\n  /**\n   * @param {number} k\n   * @return {number}\n   */\n  quarticOut(k) {\n    return 1 - --k * k * k * k;\n  },\n  /**\n   * @param {number} k\n   * @return {number}\n   */\n  quarticInOut(k) {\n    if ((k *= 2) < 1) {\n      return 0.5 * k * k * k * k;\n    }\n    return -0.5 * ((k -= 2) * k * k * k - 2);\n  },\n\n  // 五次方的缓动（t^5）\n  /**\n   * @param {number} k\n   * @return {number}\n   */\n  quinticIn(k) {\n    return k * k * k * k * k;\n  },\n  /**\n   * @param {number} k\n   * @return {number}\n   */\n  quinticOut(k) {\n    return --k * k * k * k * k + 1;\n  },\n  /**\n   * @param {number} k\n   * @return {number}\n   */\n  quinticInOut(k) {\n    if ((k *= 2) < 1) {\n      return 0.5 * k * k * k * k * k;\n    }\n    return 0.5 * ((k -= 2) * k * k * k * k + 2);\n  },\n\n  // 正弦曲线的缓动（sin(t)）\n  /**\n   * @param {number} k\n   * @return {number}\n   */\n  sinusoidalIn(k) {\n    return 1 - Math.cos((k * Math.PI) / 2);\n  },\n  /**\n   * @param {number} k\n   * @return {number}\n   */\n  sinusoidalOut(k) {\n    return Math.sin((k * Math.PI) / 2);\n  },\n  /**\n   * @param {number} k\n   * @return {number}\n   */\n  sinusoidalInOut(k) {\n    return 0.5 * (1 - Math.cos(Math.PI * k));\n  },\n\n  // 指数曲线的缓动（2^t）\n  /**\n   * @param {number} k\n   * @return {number}\n   */\n  exponentialIn(k) {\n    return k === 0 ? 0 : Math.pow(1024, k - 1);\n  },\n  /**\n   * @param {number} k\n   * @return {number}\n   */\n  exponentialOut(k) {\n    return k === 1 ? 1 : 1 - Math.pow(2, -10 * k);\n  },\n  /**\n   * @param {number} k\n   * @return {number}\n   */\n  exponentialInOut(k) {\n    if (k === 0) {\n      return 0;\n    }\n    if (k === 1) {\n      return 1;\n    }\n    if ((k *= 2) < 1) {\n      return 0.5 * Math.pow(1024, k - 1);\n    }\n    return 0.5 * (-Math.pow(2, -10 * (k - 1)) + 2);\n  },\n\n  // 圆形曲线的缓动（sqrt(1-t^2)）\n  /**\n   * @param {number} k\n   * @return {number}\n   */\n  circularIn(k) {\n    return 1 - Math.sqrt(1 - k * k);\n  },\n  /**\n   * @param {number} k\n   * @return {number}\n   */\n  circularOut(k) {\n    return Math.sqrt(1 - --k * k);\n  },\n  /**\n   * @param {number} k\n   * @return {number}\n   */\n  circularInOut(k) {\n    if ((k *= 2) < 1) {\n      return -0.5 * (Math.sqrt(1 - k * k) - 1);\n    }\n    return 0.5 * (Math.sqrt(1 - (k -= 2) * k) + 1);\n  },\n\n  // 创建类似于弹簧在停止前来回振荡的动画\n  /**\n   * @param {number} k\n   * @return {number}\n   */\n  elasticIn(k) {\n    let s;\n    let a = 0.1;\n    let p = 0.4;\n    if (k === 0) {\n      return 0;\n    }\n    if (k === 1) {\n      return 1;\n    }\n    if (!a || a < 1) {\n      a = 1;\n      s = p / 4;\n    } else {\n      s = (p * Math.asin(1 / a)) / (2 * Math.PI);\n    }\n    return -(a * Math.pow(2, 10 * (k -= 1)) * Math.sin(((k - s) * (2 * Math.PI)) / p));\n  },\n  /**\n   * @param {number} k\n   * @return {number}\n   */\n  elasticOut(k) {\n    let s;\n    let a = 0.1;\n    let p = 0.4;\n    if (k === 0) {\n      return 0;\n    }\n    if (k === 1) {\n      return 1;\n    }\n    if (!a || a < 1) {\n      a = 1;\n      s = p / 4;\n    } else {\n      s = (p * Math.asin(1 / a)) / (2 * Math.PI);\n    }\n    return a * Math.pow(2, -10 * k) * Math.sin(((k - s) * (2 * Math.PI)) / p) + 1;\n  },\n  /**\n   * @param {number} k\n   * @return {number}\n   */\n  elasticInOut(k) {\n    let s;\n    let a = 0.1;\n    let p = 0.4;\n    if (k === 0) {\n      return 0;\n    }\n    if (k === 1) {\n      return 1;\n    }\n    if (!a || a < 1) {\n      a = 1;\n      s = p / 4;\n    } else {\n      s = (p * Math.asin(1 / a)) / (2 * Math.PI);\n    }\n    if ((k *= 2) < 1) {\n      return -0.5 * (a * Math.pow(2, 10 * (k -= 1)) * Math.sin(((k - s) * (2 * Math.PI)) / p));\n    }\n    return a * Math.pow(2, -10 * (k -= 1)) * Math.sin(((k - s) * (2 * Math.PI)) / p) * 0.5 + 1;\n  },\n\n  // 在某一动画开始沿指示的路径进行动画处理前稍稍收回该动画的移动\n  /**\n   * @param {number} k\n   * @return {number}\n   */\n  backIn(k) {\n    let s = 1.70158;\n    return k * k * ((s + 1) * k - s);\n  },\n  /**\n   * @param {number} k\n   * @return {number}\n   */\n  backOut(k) {\n    let s = 1.70158;\n    return --k * k * ((s + 1) * k + s) + 1;\n  },\n  /**\n   * @param {number} k\n   * @return {number}\n   */\n  backInOut(k) {\n    let s = 1.70158 * 1.525;\n    if ((k *= 2) < 1) {\n      return 0.5 * (k * k * ((s + 1) * k - s));\n    }\n    return 0.5 * ((k -= 2) * k * ((s + 1) * k + s) + 2);\n  },\n\n  /**\n   * @param {number} k\n   * @return {number}\n   */\n  bounceIn(k) {\n    return 1 - easing.bounceOut(1 - k);\n  },\n  /**\n   * @param {number} k\n   * @return {number}\n   */\n  bounceOut(k) {\n    if (k < 1 / 2.75) {\n      return 7.5625 * k * k;\n    } else if (k < 2 / 2.75) {\n      return 7.5625 * (k -= 1.5 / 2.75) * k + 0.75;\n    } else if (k < 2.5 / 2.75) {\n      return 7.5625 * (k -= 2.25 / 2.75) * k + 0.9375;\n    } else {\n      return 7.5625 * (k -= 2.625 / 2.75) * k + 0.984375;\n    }\n  },\n  /**\n   * @param {number} k\n   * @return {number}\n   */\n  bounceInOut(k) {\n    if (k < 0.5) {\n      return easing.bounceIn(k * 2) * 0.5;\n    }\n    return easing.bounceOut(k * 2 - 1) * 0.5 + 0.5;\n  },\n};\n\nexport default easing;\n","const INTERVAL = 1000;\n\n/**\n * Runtime Context of current playback.\n */\nclass Pointer {\n  _clientStartTime = 0; //客户端时间用于和playback时间戳计算偏移量。\n  currentStamp = 0;\n  index = 0;\n  constructor() {\n    this._clientStartTime = +new Date();\n  }\n  goto() {}\n  next() {}\n}\n\nclass Snapshot {\n  videos = [];\n  whiteboard = [];\n  chat = [];\n  constructor() {}\n}\n\nclass SnapshotProvider {\n  cached = {};\n  get() {}\n}\n\nclass EventPlayer {\n  events = [];\n  members = [];\n  roomInfo = null;\n  _pointer = null;\n\n  _timer = 0;\n  _currentTime = 0;\n  _startTime = 0;\n  _duration = 0;\n\n  constructor(logs) {\n    this._preprocess(logs);\n    this.snapshotProvider = new SnapshotProvider();\n  }\n\n  sanitize() {}\n\n  _preprocess({ head, events }) {\n    this.members = head.minfo.map(item => JSON.parse(item));\n    this.roomInfo = typeof head.rinfo === 'string' ? JSON.parse(head.rinfo) : head.rinfo;\n    console.log(events.length);\n\n    let lastPointTS = 0;\n    for (let i = 0, len = events.length; i < len; i++) {\n      let _event = events[i];\n\n      if (_event.sid === 7 && _event.ssid === 11) continue;\n      if (_event.sid === 4 && _event.ssid === 22) {\n        if (lastPointTS === _event.ts) continue;\n        lastPointTS = _event.ts;\n      }\n      let { body, ...rest } = _event;\n      // this.events.push({ ...rest, body : JSON.parse(body) });\n      this.events.push({ ...rest, body: body });\n    }\n  }\n\n  get pointer() {\n    if (this._pointer) return this._pointer;\n    return (this._pointer = new Pointer());\n  }\n\n  _tickAction() {\n    this.pointer.next();\n  }\n\n  seek(time) {\n    if (time > 10000000000) time /= 100; // mill-seconds -> seconds\n    let snapshot = this.snapshotProvider.get(time);\n    if (!snapshot) {\n      snapshot = this.calcSnapShot();\n    }\n  }\n\n  play() {\n    this._timer = window.setInterval(() => {\n      this._tickAction();\n    }, INTERVAL);\n\n    this._tickAction();\n  }\n\n  pause() {\n    window.clearInterval(this._timer);\n  }\n}\n\nexport default EventPlayer;\n","//A playground of this proj\nimport Whiteboard from './Whiteboard';\n\nimport { boundsPoi, antiDir } from './graphic/algorithm/corner';\n\nimport Path from './graphic/Path';\nimport Point from './graphic/types/Point';\nimport animate from './animate/animate';\nimport easing from './animate/easing';\nimport animateColor from './animate/animateColor';\n\nimport EventPlayer from './eventlog-player';\n\nexport default {\n  init() {\n    window.whiteboard = this.whiteboard = new Whiteboard({\n      container: document.getElementById('draw-panel'),\n      width: 1000,\n      height: 800,\n      zoom: 1,\n      selectionMode: 'contains', // cross\n    });\n\n    window.whiteboard2 = this.whiteboard2 = new Whiteboard({\n      container: document.getElementById('draw-panel2'),\n      width: 1000,\n      height: 800,\n      zoom: 0.5,\n      selectionMode: 'contains', // cross\n    });\n\n    window.items = window.whiteboard.items;\n    this.whiteboard\n      .on('item:add', arg => {\n        // console.log(arg);\n      })\n      .on('layer:refresh', arg => {\n        // console.log(`${arg.layer.role}, refreshed!`);\n      })\n      .on('item:add', arg => {\n        console.log('item:add', arg);\n      });\n    this.whiteboard.watch();\n    this.whiteboard2.watch();\n    this.simulateComm();\n\n    window.player = this.player = new EventPlayer(eventlog);\n\n    return whiteboard;\n  },\n\n  simulateComm() {\n    let wb2 = this.whiteboard2;\n    function addItem(hash) {\n      wb2.add(hash);\n    }\n\n    function removeItem(hash) {\n      wb2.remove(hash);\n    }\n\n    function typingText(hash) {\n      wb2.typingText(hash);\n    }\n\n    function pointerMove(hash) {\n      wb2.remove(hash);\n    }\n\n    function pointerDraw(hash) {\n      wb2.remove(hash);\n    }\n    function moveItem(hash) {\n      wb2.move(hash);\n    }\n    function resizeItems(hash) {\n      wb2.resize(hash);\n    }\n\n    this.whiteboard\n      .on('item:add', arg => {\n        addItem(arg);\n      })\n      .on('items:delete', arg => {\n        removeItem(arg);\n      })\n      .on('item:typing', arg => {\n        typingText(arg);\n      })\n      .on('pointer:move', arg => {\n        pointerMove(arg);\n      })\n      .on('pointer:draw', arg => {\n        pointerDraw(arg);\n      })\n      .on('items:move', arg => {\n        moveItem(arg);\n      })\n      .on('items:resize', arg => {\n        resizeItems(arg);\n      });\n  },\n\n  drawPolyline(type) {\n    type = type || 'linear';\n    let p1 = new Path();\n    p1.moveTo(new Point(0, 500));\n    for (var i = 0; i < 10; i++) {\n      var k = ease[type](i / 10);\n      p1.lineTo(new Point(i * 50, 500 - k * 500));\n    }\n\n    // p1.simplify();\n\n    p1.draw(this.whiteboard.ctx);\n    window.paths.push(p1);\n  },\n\n  animateScale() {\n    let item = items[0];\n    let point = item.position;\n    // let ease = easing.bounceInOut;\n    let ease = easing.cubicIn;\n    console.time('anim');\n    let lastValue = 1;\n\n    animate({\n      startValue: 0,\n      endValue: 720,\n      duration: 400,\n      easing: ease,\n      onChange(value, valueProgress, timeProgress) {\n        // item.scale(value / lastValue, value / lastValue);\n        item.rotate(value);\n        lastValue = value;\n        canvas.refresh();\n      },\n      onComplete(value, valueProgress, timeProgress) {\n        console.log(value, valueProgress, timeProgress);\n        console.timeEnd('anim');\n      },\n    });\n  },\n\n  animate() {\n    let item = items[0];\n    let point = item.position;\n    // let ease = easing.bounceInOut;\n    let ease = easing.cubicIn;\n    console.time('anim');\n\n    animate({\n      startValue: 0,\n      endValue: 100,\n      duration: 400,\n      easing: ease,\n      onChange(value, valueProgress, timeProgress) {\n        item.setPosition(point.x + value, point.y + value);\n        canvas.refresh();\n      },\n      onComplete(value, valueProgress, timeProgress) {\n        console.log(value, valueProgress, timeProgress);\n        console.timeEnd('anim');\n      },\n    });\n  },\n\n  animateRotate() {\n    let item = items[0];\n    let point = item.position;\n    let ease = easing.cubicIn;\n    console.time('anim');\n    let lastValue = 1;\n\n    animate({\n      startValue: 0,\n      endValue: 1350,\n      duration: 1000,\n      easing: ease,\n      onChange(value, valueProgress, timeProgress) {\n        console.log(value - lastValue);\n        item.rotate(value - lastValue);\n        lastValue = value;\n        canvas.refresh();\n      },\n      onComplete(value, valueProgress, timeProgress) {\n        console.log(value, valueProgress, timeProgress);\n        console.timeEnd('anim');\n      },\n    });\n  },\n};\n","import Point from './graphic/types/Point';\nimport Rect from './graphic/types/Rect';\nimport Style from './graphic/types/Style';\nimport Color from './graphic/types/Color';\nimport Matrix from './graphic/types/Matrix';\nimport Path from './graphic/Path';\nimport Layer from './Whiteboard/Layer';\nimport animate from './animate/animate';\nimport animateColor from './animate/animateColor';\nimport Whiteboard from './Whiteboard';\nimport playground from './playground.js'; // for debug,\n// import keyCode from '';\n\nimport { RGB2HSL, HSL2RGB, RGB2Gray, Gray2RGB, Gray2HSB } from './graphic/algorithm/color';\n\n//top-level APIs\n/**\n * on('type', handler);\n *  possible-values:\n *  - changed 当白板上元素发生变化时，（返回变更的数据和Hash）\n *  - add 当元素新增时\n *  - remove 当元素删除时\n *  -\n *\n * options:\n *  - selectionMode: 'bounds', 'path'\n *  - alignToGrid: boolean 对齐到网格\n *  - loop / notify\n *  -\n *\n */\n\n//mount graphic on namespace (top-level).\n//@ts-ignore\nlet nebula = typeof nebula !== 'undefined' ? nebula : { Point, Rect, Style, Path, Color, Matrix, Layer };\n// let nebula;\n// if (typeof nebula === 'undefined') {\n//   nebula = { Point, Rect, Style, Path, Color, Matrix, Layer };\n// }\n\n//mount util on namespace.\nnebula.util = { RGB2HSL, HSL2RGB, RGB2Gray, Gray2RGB, Gray2HSB, animateColor, animate };\n\n//mount Whiteboard constructor on namespace.\nnebula.Whiteboard = Whiteboard;\n\n//mount enum on namespace.\n// nebula.enum = { keyCode };\n\n//tmp for debug\nif (!IS_PRODUCTION) {\n  playground.init();\n}\nwindow.nebula = nebula;\n//@ts-ignore\n\n\nexport default nebula;\nexport { Whiteboard, Point, Rect, Style, Path };\n"],"names":["cof","IObject","defined","aFunction","isObject","require$$0","document","require$$1","require$$2","anObject","toPrimitive","IE8_DOM_DEFINE","dP","createDesc","core","global","has","ctx","hide","toInteger","min","toIObject","toLength","toAbsoluteIndex","uid","$keys","enumBugKeys","getKeys","IE_PROTO","PROTOTYPE","dPs","create","descriptor","setToStringTag","toObject","$iterCreate","getPrototypeOf","LIBRARY","Iterators","redefine","$export","step","TAG","ITERATOR","classof","get","epsilon2","pi","Math","PI","pow","max","acos","x","isZero","val","sin","cos","horizontal","vertical","capitalize","str","replace","match","toUpperCase","getDirection","indexY","indexX","cross","a1","a2","itor","forEach","i1","i1Idx","i2","i2Idx","apply","boundsPoi","antiDir","props","_tempBounds","y","coordX","coordY","dir","anti","vector","Point","push","sort","l","r","angle","set","point","enumerable","configurable","cursorMap","topLeft","topCenter","topRight","rightCenter","bottomRight","bottomCenter","bottomLeft","leftCenter","spaces","fails","ws","$parseInt","RGB2HSL","g","b","maxc","minc","delta","achromatic","h","s","HSL2RGB","t3s","t2","t1","c","i","t3","RGB2Gray","HEX2RGB","hex","length","TypeError","num","_parseInt","red","green","blue","Gray2RGB","Gray2HSB","Color","distanceSquare","v1","v2","cubicAt","p0","p1","p2","p3","t","onet","cubicProjectPoint","x1","y1","x2","y2","x3","y3","x4","y4","out","interval","d","Infinity","_t","d1","d2","prev","next","EPSILON","v0","sqrt","containStroke","x0","y0","lineWidth","_l","PI2","normalizeRadian","containStrokeArc","cx","cy","startAngle","endAngle","anticlockwise","abs","tmp","atan2","calcBoundsOfBezier","tvalues","bounds","a","b2ac","sqrtb2ac","j","jlen","mt","w","Rect","containStrokeLine","_a","_b","_s","tslib_1.__extends","Segment","fitCurve","points","maxError","_points","curves","equals","clone","fitCubic","subtract","error","first","last","tan1","tan2","pt1","pt2","dist","getDistance","seg","BezierSegment","add","normalize","contextPoint","uPrime","chordLengthParameterize","split","parametersInOrder","curve","generateBezier","findMaxError","index","reparameterize","tanCenter","concat","negate","epsilon","C","X","u","b0","b1","b2","b3","multiply","dot","detC0C1","alpha1","alpha2","detC0X","detXC1","c0","c1","segLength","eps","handle1","handle2","line","findRoot","curve1","curve2","pt","evaluate","diff","df","degree","slice","m","floor","maxDist","P","v","smoothCurve","closed","opts","options","asymmetric","segments","getIndex","value","_default","path","self","Error","_class","loop","from","undefined","to","amount","n","padding","paddingLeft","paddingRight","knots","_point","_x","_y","f","n_1","rx","ry","rf","px","py","internal","segment","hx","hy","control2","control1","tslib_1.__decorate","requestAnimationFrame","window","bind","msRequestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame","fn","setTimeout","noop","cancelAnimationFrame","clearTimeout","animate","timestamp","start","Date","duration","finish","time","onChange","abort","onComplete","easing","k","startValue","endValue","byValue","onStart","tick","ticktime","currentTime","timePerc","current","valuePerc","gOPS","pIE","$trim","$parseFloat","calculateColor","begin","end","pos","color","_parseFloat","animateColor","fromColor","toColor","startColor","toJSON","endColor","_Object$assign","posValue","colorEasing","item","debounce","func","wait","lastArgs","lastThis","maxWait","result","timerId","lastCallTime","lastInvokeTime","leading","maxing","trailing","useRAF","root","invokeFunc","args","thisArg","startTimer","pendingFunc","cancelTimer","id","leadingEdge","timerExpired","remainingWait","timeSinceLastCall","timeSinceLastInvoke","timeWaiting","shouldInvoke","_Date$now","trailingEdge","cancel","flush","pending","debounced","isInvoking","throttle","POINT_WIDTH","OFFSET","getAngle","cp","sp","ep","disCS","disCE","disSE","resultRadian","tslib_1.__values","TextInput","defaultOptions","linear","quadraticIn","quadraticOut","quadraticInOut","cubicIn","cubicOut","cubicInOut","quarticIn","quarticOut","quarticInOut","quinticIn","quinticOut","quinticInOut","sinusoidalIn","sinusoidalOut","sinusoidalInOut","exponentialIn","exponentialOut","exponentialInOut","circularIn","circularOut","circularInOut","elasticIn","p","asin","elasticOut","elasticInOut","backIn","backOut","backInOut","bounceIn","bounceOut","bounceInOut","INTERVAL","Pointer","_clientStartTime","SnapshotProvider","EventPlayer","logs","_preprocess","snapshotProvider","head","events","members","minfo","map","JSON","parse","roomInfo","rinfo","console","log","lastPointTS","len","_event","sid","ssid","ts","body","rest","pointer","snapshot","calcSnapShot","_timer","setInterval","_tickAction","clearInterval","_pointer","init","whiteboard","Whiteboard","container","getElementById","width","height","zoom","selectionMode","whiteboard2","items","on","arg","watch","simulateComm","player","eventlog","wb2","addItem","hash","removeItem","remove","typingText","pointerMove","pointerDraw","moveItem","move","resizeItems","resize","drawPolyline","type","Path","moveTo","ease","lineTo","draw","paths","animateScale","position","valueProgress","timeProgress","rotate","lastValue","canvas","refresh","timeEnd","setPosition","animateRotate"],"mappings":"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"}